<!DOCTYPE html>
<!-- saved from url=(0065)https://segmentfault.com/a/1190000020747302?utm_source=sf-related -->
<html lang="zh-CN" data-react-helmet="lang"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <meta httpequiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="alexaVerifyID" content="LkzCRJ7rPEUwt6fVey2vhxiw1vQ">
    <meta name="apple-itunes-app" content="app-id=958101793, app-argument=">
    <meta property="qc:admins" content="15317273575564615446375">
    <meta name="msapplication-TileColor" content="#009a61">
    <meta name="baidu_union_verify" content="bcf7fd80dca60d53d46d5b46e1b990ca">
    <meta name="sogou_site_verification" content="MKVKCoIjwL">
    <meta name="360-site-verification" content="737314c9bf48873a1a0a22295203d9d1">
    <meta rel="apple-touch-icon" href="https://cdn.segmentfault.com/r-7b7553ca/touch-icon.png">
    <meta name="msapplication-square150x150logo" content="https://cdn.segmentfault.com/r-7b7553ca/touch-icon.png">
    <link rel="shortcut icon" type="image/x-icon" href="https://cdn.segmentfault.com/r-7b7553ca/favicon.ico">
    <link rel="search" type="application/opensearchdescription+xml" href="https://segmentfault.com/opensearch.xml" title="SegmentFault">
    <link rel="alternate" type="application/atom+xml" href="https://segmentfault.com/feeds/questions" title="SegmentFault 最新问题">
    <link rel="alternate" type="application/atom+xml" href="https://segmentfault.com/feeds/blogs" title="SegmentFault 最新文章">
    <link rel="stylesheet" href="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/umi.css">
    <script src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/osd.js.下载"></script><script src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/f(5).txt"></script><script src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/f(6).txt" id="google_shimpl"></script><script async="" defer="" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/f(7).txt"></script><script async="" defer="" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/fl.js.下载"></script><script async="" defer="" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/spc.php"></script><script async="" defer="" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/spcjs.php"></script><script type="text/javascript" async="" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/analytics.js.下载"></script><script src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/hm.js.下载"></script><script>
      window.routerBase = "/";
    </script>
    <script>
      window.publicPath =
        window.resourceBaseUrl || "https://cdn.segmentfault.com/r-7b7553ca/";
    </script>
    <script>
      //! umi version: 3.3.9
    </script>
    <script>
      var _hmt = _hmt || [];
    </script>
    <script>
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?e23800c454aa573c0ccb16b52665ac26";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  <meta data-react-helmet="true" name="keywords" content="spring,java"><meta data-react-helmet="true" name="description" content="在应用开发中，常常需要执行一些特定的初始化工作，这些工作都是相对比较固定的，比如建立数据库连接，打开网络连接等，同时，在结束服务时，也有一些相对固定的销毁工作需要执行。为了便于这些工作的设计，Spring IoC容器提供了相关的功能，可以让应用定制Bean的初始化和销毁过程。"><meta data-react-helmet="true" name="userId" value="" id="SFUserId"><meta data-react-helmet="true" name="userRank" value="" id="SFUserRank"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="twitter:image" content="https://cdn.segmentfault.com/r-7b7553ca/touch-icon.png"><meta data-react-helmet="true" name="twitter:site" content="@segment_fault"><meta data-react-helmet="true" name="twitter:creator" content="@segmentfault"><meta data-react-helmet="true" name="twitter:title" content="Spring Bean 生命周期 （实例结合源码彻底讲透）"><meta data-react-helmet="true" name="og:type" content="article"><meta data-react-helmet="true" name="og:image" content="https://cdn.segmentfault.com/r-7b7553ca/touch-icon.png"><meta data-react-helmet="true" name="og:title" content="Spring Bean 生命周期 （实例结合源码彻底讲透）"><meta data-react-helmet="true" name="msvalidate.01" content="2C018C53297C8388F3E7052F5E9CA6AF"><link rel="stylesheet" href="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/layouts__index_p__Live__Add_p__Video__Add_p__Write.chunk.css">
<link rel="stylesheet" href="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/layouts__index.chunk.css">
<link rel="stylesheet" href="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/p__ArticleDetail.chunk.css">
<script src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/js" async=""></script><style>#__vconsole {
  --VC-BG-0: #ededed;
  --VC-BG-1: #f7f7f7;
  --VC-BG-2: #fff;
  --VC-BG-3: #f7f7f7;
  --VC-BG-4: #4c4c4c;
  --VC-BG-5: #fff;
  --VC-FG-0: rgba(0, 0, 0, 0.9);
  --VC-FG-HALF: rgba(0, 0, 0, 0.9);
  --VC-FG-1: rgba(0, 0, 0, 0.5);
  --VC-FG-2: rgba(0, 0, 0, 0.3);
  --VC-FG-3: rgba(0, 0, 0, 0.1);
  --VC-RED: #fa5151;
  --VC-ORANGE: #fa9d3b;
  --VC-YELLOW: #ffc300;
  --VC-GREEN: #91d300;
  --VC-LIGHTGREEN: #95ec69;
  --VC-BRAND: #07c160;
  --VC-BLUE: #10aeff;
  --VC-INDIGO: #1485ee;
  --VC-PURPLE: #6467f0;
  --VC-LINK: #576b95;
  --VC-TEXTGREEN: #06ae56;
  --VC-FG: black;
  --VC-BG: white;
  --VC-BG-COLOR-ACTIVE: #ececec;
  --VC-WARN-BG: #fff3cc;
  --VC-WARN-BORDER: #ffe799;
  --VC-ERROR-BG: #fedcdc;
  --VC-ERROR-BORDER: #fdb9b9;
  --VC-DOM-TAG-NAME-COLOR: #881280;
  --VC-DOM-ATTRIBUTE-NAME-COLOR: #994500;
  --VC-DOM-ATTRIBUTE-VALUE-COLOR: #1a1aa6;
  --VC-CODE-KEY-FG: #881391;
  --VC-CODE-PRIVATE-KEY-FG: #cfa1d3;
  --VC-CODE-FUNC-FG: #0d22aa;
  --VC-CODE-NUMBER-FG: #1c00cf;
  --VC-CODE-STR-FG: #c41a16;
  --VC-CODE-NULL-FG: #808080;
  color: var(--VC-FG-0);
  font-size: 13px;
  font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
  -webkit-user-select: auto;
  /* global */
  /* compoment */
}
#__vconsole .vc-max-height {
  max-height: 19.23076923em;
}
#__vconsole .vc-max-height-line {
  max-height: 3.38461538em;
}
#__vconsole .vc-min-height {
  min-height: 3.07692308em;
}
#__vconsole dd,
#__vconsole dl,
#__vconsole pre {
  margin: 0;
}
#__vconsole .vc-switch {
  display: block;
  position: fixed;
  right: 0.76923077em;
  bottom: 0.76923077em;
  color: #FFF;
  background-color: var(--VC-BRAND);
  line-height: 1;
  font-size: 1.07692308em;
  padding: 0.61538462em 1.23076923em;
  z-index: 10000;
  border-radius: 0.30769231em;
  box-shadow: 0 0 0.61538462em rgba(0, 0, 0, 0.4);
}
#__vconsole .vc-mask {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0);
  z-index: 10001;
  -webkit-transition: background 0.3s;
  transition: background 0.3s;
  -webkit-tap-highlight-color: transparent;
  overflow-y: scroll;
}
#__vconsole .vc-panel {
  display: none;
  position: fixed;
  min-height: 85%;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 10002;
  background-color: var(--VC-BG-0);
  -webkit-transition: -webkit-transform 0.3s;
  transition: -webkit-transform 0.3s;
  transition: transform 0.3s;
  transition: transform 0.3s, -webkit-transform 0.3s;
  -webkit-transform: translate(0, 100%);
  transform: translate(0, 100%);
}
#__vconsole .vc-tabbar {
  border-bottom: 1px solid var(--VC-FG-3);
  overflow-x: auto;
  height: 3em;
  width: auto;
  white-space: nowrap;
}
#__vconsole .vc-tabbar .vc-tab {
  display: inline-block;
  line-height: 3em;
  padding: 0 1.15384615em;
  border-right: 1px solid var(--VC-FG-3);
  text-decoration: none;
  color: var(--VC-FG-0);
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}
#__vconsole .vc-tabbar .vc-tab:active {
  background-color: rgba(0, 0, 0, 0.15);
}
#__vconsole .vc-tabbar .vc-tab.vc-actived {
  background-color: var(--VC-BG-1);
}
#__vconsole .vc-content {
  background-color: var(--VC-BG-2);
  overflow-x: hidden;
  overflow-y: auto;
  position: absolute;
  top: 3.07692308em;
  left: 0;
  right: 0;
  bottom: 3.07692308em;
  -webkit-overflow-scrolling: touch;
  margin-bottom: constant(safe-area-inset-bottom);
  margin-bottom: env(safe-area-inset-bottom);
}
#__vconsole .vc-content.vc-has-topbar {
  top: 5.46153846em;
}
#__vconsole .vc-topbar {
  background-color: var(--VC-BG-1);
  display: -webkit-box;
  display: -webkit-flex;
  display: -moz-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -webkit-flex-direction: row;
  -moz-box-orient: horizontal;
  -moz-box-direction: normal;
  -ms-flex-direction: row;
  flex-direction: row;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  width: 100%;
}
#__vconsole .vc-topbar .vc-toptab {
  display: none;
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -moz-box-flex: 1;
  -ms-flex: 1;
  flex: 1;
  line-height: 2.30769231em;
  padding: 0 1.15384615em;
  border-bottom: 1px solid var(--VC-FG-3);
  text-decoration: none;
  text-align: center;
  color: var(--VC-FG-0);
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}
#__vconsole .vc-topbar .vc-toptab.vc-toggle {
  display: block;
}
#__vconsole .vc-topbar .vc-toptab:active {
  background-color: rgba(0, 0, 0, 0.15);
}
#__vconsole .vc-topbar .vc-toptab.vc-actived {
  border-bottom: 1px solid var(--VC-INDIGO);
}
#__vconsole .vc-logbox {
  display: none;
  position: relative;
  min-height: 100%;
}
#__vconsole .vc-logbox i {
  font-style: normal;
}
#__vconsole .vc-logbox .vc-log {
  padding-bottom: 6em;
  -webkit-tap-highlight-color: transparent;
}
#__vconsole .vc-logbox .vc-log:empty:before {
  content: "Empty";
  color: var(--VC-FG-1);
  position: absolute;
  top: 45%;
  left: 0;
  right: 0;
  bottom: 0;
  font-size: 1.15384615em;
  text-align: center;
}
#__vconsole .vc-logbox .vc-item {
  margin: 0;
  padding: 0.46153846em 0.61538462em;
  overflow: hidden;
  line-height: 1.3;
  border-bottom: 1px solid var(--VC-FG-3);
  word-break: break-word;
}
#__vconsole .vc-logbox .vc-item-info {
  color: var(--VC-PURPLE);
}
#__vconsole .vc-logbox .vc-item-debug {
  color: var(--VC-YELLOW);
}
#__vconsole .vc-logbox .vc-item-warn {
  color: var(--VC-ORANGE);
  border-color: var(--VC-WARN-BORDER);
  background-color: var(--VC-WARN-BG);
}
#__vconsole .vc-logbox .vc-item-error {
  color: var(--VC-RED);
  border-color: var(--VC-ERROR-BORDER);
  background-color: var(--VC-ERROR-BG);
}
#__vconsole .vc-logbox .vc-log.vc-log-partly .vc-item {
  display: none;
}
#__vconsole .vc-logbox .vc-log.vc-log-partly-log .vc-item-log,
#__vconsole .vc-logbox .vc-log.vc-log-partly-info .vc-item-info,
#__vconsole .vc-logbox .vc-log.vc-log-partly-warn .vc-item-warn,
#__vconsole .vc-logbox .vc-log.vc-log-partly-error .vc-item-error {
  display: block;
}
#__vconsole .vc-logbox .vc-item.hide {
  display: none;
}
#__vconsole .vc-logbox .vc-item .vc-item-content {
  margin-right: 4.61538462em;
  display: inline-block;
}
#__vconsole .vc-logbox .vc-item .vc-item-repeat {
  display: inline-block;
  margin-right: 0.30769231em;
  padding: 0 6.5px;
  color: #D7E0EF;
  background-color: #42597F;
  border-radius: 8.66666667px;
}
#__vconsole .vc-logbox .vc-item.vc-item-error .vc-item-repeat {
  color: #901818;
  background-color: var(--VC-RED);
}
#__vconsole .vc-logbox .vc-item.vc-item-warn .vc-item-repeat {
  color: #987D20;
  background-color: #F4BD02;
}
#__vconsole .vc-logbox .vc-item .vc-item-code {
  display: block;
  white-space: pre-wrap;
  overflow: auto;
  position: relative;
}
#__vconsole .vc-logbox .vc-item .vc-item-code.vc-item-code-input,
#__vconsole .vc-logbox .vc-item .vc-item-code.vc-item-code-output {
  padding-left: 0.92307692em;
}
#__vconsole .vc-logbox .vc-item .vc-item-code.vc-item-code-input:before,
#__vconsole .vc-logbox .vc-item .vc-item-code.vc-item-code-output:before {
  content: "›";
  position: absolute;
  top: -0.23076923em;
  left: 0;
  font-size: 1.23076923em;
  color: #6A5ACD;
}
#__vconsole .vc-logbox .vc-item .vc-item-code.vc-item-code-output:before {
  content: "‹";
}
#__vconsole .vc-logbox .vc-item .vc-fold {
  display: block;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}
#__vconsole .vc-logbox .vc-item .vc-fold .vc-fold-outer {
  display: block;
  font-style: italic;
  padding-left: 0.76923077em;
  position: relative;
}
#__vconsole .vc-logbox .vc-item .vc-fold .vc-fold-outer:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
#__vconsole .vc-logbox .vc-item .vc-fold .vc-fold-outer:before {
  content: "";
  position: absolute;
  top: 0.30769231em;
  left: 0.15384615em;
  width: 0;
  height: 0;
  border: transparent solid 0.30769231em;
  border-left-color: var(--VC-FG-1);
}
#__vconsole .vc-logbox .vc-item .vc-fold .vc-fold-outer.vc-toggle:before {
  top: 0.46153846em;
  left: 0;
  border-top-color: var(--VC-FG-1);
  border-left-color: transparent;
}
#__vconsole .vc-logbox .vc-item .vc-fold .vc-fold-inner {
  display: none;
  margin-left: 0.76923077em;
}
#__vconsole .vc-logbox .vc-item .vc-fold .vc-fold-inner.vc-toggle {
  display: block;
}
#__vconsole .vc-logbox .vc-item .vc-fold .vc-fold-inner .vc-code-key {
  margin-left: 0.76923077em;
}
#__vconsole .vc-logbox .vc-item .vc-fold .vc-fold-outer .vc-code-key {
  margin-left: 0;
}
#__vconsole .vc-logbox .vc-code-key {
  color: var(--VC-CODE-KEY-FG);
}
#__vconsole .vc-logbox .vc-code-private-key {
  color: var(--VC-CODE-PRIVATE-KEY-FG);
}
#__vconsole .vc-logbox .vc-code-function {
  color: var(--VC-CODE-FUNC-FG);
  font-style: italic;
}
#__vconsole .vc-logbox .vc-code-number,
#__vconsole .vc-logbox .vc-code-boolean {
  color: var(--VC-CODE-NUMBER-FG);
}
#__vconsole .vc-logbox .vc-code-string {
  color: var(--VC-CODE-STR-FG);
}
#__vconsole .vc-logbox .vc-code-null,
#__vconsole .vc-logbox .vc-code-undefined {
  color: var(--VC-CODE-NULL-FG);
}
#__vconsole .vc-logbox .vc-cmd {
  position: absolute;
  height: 3.07692308em;
  left: 0;
  right: 0;
  bottom: 41px;
  border-top: 1px solid var(--VC-FG-3);
  display: block!important;
}
#__vconsole .vc-logbox .vc-cmd.vc-filter {
  bottom: 0;
}
#__vconsole .vc-logbox .vc-cmd .vc-cmd-input-wrap {
  display: block;
  height: 2.15384615em;
  margin-right: 3.07692308em;
  padding: 0.46153846em 0.61538462em;
}
#__vconsole .vc-logbox .vc-cmd .vc-cmd-input {
  width: 100%;
  border: none;
  resize: none;
  outline: none;
  padding: 0;
  font-size: 0.92307692em;
  background-color: transparent;
  color: var(--VC-FG-0);
}
#__vconsole .vc-logbox .vc-cmd .vc-cmd-input::-webkit-input-placeholder {
  line-height: 2.15384615em;
}
#__vconsole .vc-logbox .vc-cmd .vc-cmd-btn {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: 3.07692308em;
  border: none;
  background-color: var(--VC-BG-0);
  color: var(--VC-FG-0);
  outline: none;
  -webkit-touch-callout: none;
  font-size: 1em;
}
#__vconsole .vc-logbox .vc-cmd .vc-cmd-btn:active {
  background-color: rgba(0, 0, 0, 0.15);
}
#__vconsole .vc-logbox .vc-cmd .vc-cmd-prompted {
  position: fixed;
  width: 100%;
  background-color: var(--VC-BG-3);
  border: 1px solid var(--VC-FG-3);
  overflow-x: scroll;
  display: none;
}
#__vconsole .vc-logbox .vc-cmd .vc-cmd-prompted li {
  list-style: none;
  line-height: 30px;
  padding: 0 0.46153846em;
  border-bottom: 1px solid var(--VC-FG-3);
}
#__vconsole .vc-logbox .vc-group .vc-group-preview {
  -webkit-touch-callout: none;
}
#__vconsole .vc-logbox .vc-group .vc-group-preview:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
#__vconsole .vc-logbox .vc-group .vc-group-detail {
  display: none;
  padding: 0 0 0.76923077em 1.53846154em;
  border-bottom: 1px solid var(--VC-FG-3);
}
#__vconsole .vc-logbox .vc-group.vc-actived .vc-group-detail {
  display: block;
  background-color: var(--VC-BG-1);
}
#__vconsole .vc-logbox .vc-group.vc-actived .vc-table-row {
  background-color: var(--VC-BG-2);
}
#__vconsole .vc-logbox .vc-group.vc-actived .vc-group-preview {
  background-color: var(--VC-BG-1);
}
#__vconsole .vc-logbox .vc-table .vc-table-row {
  display: -webkit-box;
  display: -webkit-flex;
  display: -moz-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -webkit-flex-direction: row;
  -moz-box-orient: horizontal;
  -moz-box-direction: normal;
  -ms-flex-direction: row;
  flex-direction: row;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  overflow: hidden;
  border-bottom: 1px solid var(--VC-FG-3);
}
#__vconsole .vc-logbox .vc-table .vc-table-row.vc-left-border {
  border-left: 1px solid var(--VC-FG-3);
}
#__vconsole .vc-logbox .vc-table .vc-table-col {
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -moz-box-flex: 1;
  -ms-flex: 1;
  flex: 1;
  padding: 0.23076923em 0.30769231em;
  border-left: 1px solid var(--VC-FG-3);
  overflow: auto;
  white-space: pre-wrap;
  word-break: break-word;
  /*white-space: nowrap;
        text-overflow: ellipsis;*/
  -webkit-overflow-scrolling: touch;
}
#__vconsole .vc-logbox .vc-table .vc-table-col:first-child {
  border: none;
}
#__vconsole .vc-logbox .vc-table .vc-small .vc-table-col {
  padding: 0 0.30769231em;
  font-size: 0.92307692em;
}
#__vconsole .vc-logbox .vc-table .vc-table-col-2 {
  -webkit-box-flex: 2;
  -webkit-flex: 2;
  -moz-box-flex: 2;
  -ms-flex: 2;
  flex: 2;
}
#__vconsole .vc-logbox .vc-table .vc-table-col-3 {
  -webkit-box-flex: 3;
  -webkit-flex: 3;
  -moz-box-flex: 3;
  -ms-flex: 3;
  flex: 3;
}
#__vconsole .vc-logbox .vc-table .vc-table-col-4 {
  -webkit-box-flex: 4;
  -webkit-flex: 4;
  -moz-box-flex: 4;
  -ms-flex: 4;
  flex: 4;
}
#__vconsole .vc-logbox .vc-table .vc-table-col-5 {
  -webkit-box-flex: 5;
  -webkit-flex: 5;
  -moz-box-flex: 5;
  -ms-flex: 5;
  flex: 5;
}
#__vconsole .vc-logbox .vc-table .vc-table-col-6 {
  -webkit-box-flex: 6;
  -webkit-flex: 6;
  -moz-box-flex: 6;
  -ms-flex: 6;
  flex: 6;
}
#__vconsole .vc-logbox .vc-table .vc-table-row-error {
  border-color: var(--VC-ERROR-BORDER);
  background-color: var(--VC-ERROR-BG);
}
#__vconsole .vc-logbox .vc-table .vc-table-row-error .vc-table-col {
  color: var(--VC-RED);
  border-color: var(--VC-ERROR-BORDER);
}
#__vconsole .vc-logbox .vc-table .vc-table-col-title {
  font-weight: bold;
}
#__vconsole .vc-logbox.vc-actived {
  display: block;
}
#__vconsole .vc-toolbar {
  border-top: 1px solid var(--VC-FG-3);
  line-height: 3em;
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  display: -webkit-box;
  display: -webkit-flex;
  display: -moz-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -webkit-flex-direction: row;
  -moz-box-orient: horizontal;
  -moz-box-direction: normal;
  -ms-flex-direction: row;
  flex-direction: row;
}
#__vconsole .vc-toolbar .vc-tool {
  display: none;
  text-decoration: none;
  color: var(--VC-FG-0);
  width: 50%;
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -moz-box-flex: 1;
  -ms-flex: 1;
  flex: 1;
  text-align: center;
  position: relative;
  -webkit-touch-callout: none;
}
#__vconsole .vc-toolbar .vc-tool.vc-toggle,
#__vconsole .vc-toolbar .vc-tool.vc-global-tool {
  display: block;
}
#__vconsole .vc-toolbar .vc-tool:active {
  background-color: rgba(0, 0, 0, 0.15);
}
#__vconsole .vc-toolbar .vc-tool:after {
  content: " ";
  position: absolute;
  top: 0.53846154em;
  bottom: 0.53846154em;
  right: 0;
  border-left: 1px solid var(--VC-FG-3);
}
#__vconsole .vc-toolbar .vc-tool-last:after {
  border: none;
}
@supports (bottom: constant(safe-area-inset-bottom)) or (bottom: env(safe-area-inset-bottom)) {
  #__vconsole .vc-toolbar,
  #__vconsole .vc-switch {
    bottom: constant(safe-area-inset-bottom);
    bottom: env(safe-area-inset-bottom);
  }
}
#__vconsole.vc-toggle .vc-switch {
  display: none;
}
#__vconsole.vc-toggle .vc-mask {
  background: rgba(0, 0, 0, 0.6);
  display: block;
}
#__vconsole.vc-toggle .vc-panel {
  -webkit-transform: translate(0, 0);
  transform: translate(0, 0);
}
@media (prefers-color-scheme: dark) {
  #__vconsole:not([data-theme="light"]) {
    --VC-BG-0: #191919;
    --VC-BG-1: #1f1f1f;
    --VC-BG-2: #232323;
    --VC-BG-3: #2f2f2f;
    --VC-BG-4: #606060;
    --VC-BG-5: #2c2c2c;
    --VC-FG-0: rgba(255, 255, 255, 0.8);
    --VC-FG-HALF: rgba(255, 255, 255, 0.6);
    --VC-FG-1: rgba(255, 255, 255, 0.5);
    --VC-FG-2: rgba(255, 255, 255, 0.3);
    --VC-FG-3: rgba(255, 255, 255, 0.05);
    --VC-RED: #fa5151;
    --VC-ORANGE: #c87d2f;
    --VC-YELLOW: #cc9c00;
    --VC-GREEN: #74a800;
    --VC-LIGHTGREEN: #28b561;
    --VC-BRAND: #07c160;
    --VC-BLUE: #10aeff;
    --VC-INDIGO: #1196ff;
    --VC-PURPLE: #8183ff;
    --VC-LINK: #7d90a9;
    --VC-TEXTGREEN: #259c5c;
    --VC-FG: white;
    --VC-BG: black;
    --VC-BG-COLOR-ACTIVE: #282828;
    --VC-WARN-BG: #332700;
    --VC-WARN-BORDER: #664e00;
    --VC-ERROR-BG: #321010;
    --VC-ERROR-BORDER: #642020;
    --VC-DOM-TAG-NAME-COLOR: #5DB0D7;
    --VC-DOM-ATTRIBUTE-NAME-COLOR: #9BBBDC;
    --VC-DOM-ATTRIBUTE-VALUE-COLOR: #f29766;
    --VC-CODE-KEY-FG: #e36eec;
    --VC-CODE-PRIVATE-KEY-FG: #f4c5f7;
    --VC-CODE-FUNC-FG: #556af2;
    --VC-CODE-NUMBER-FG: #9980ff;
    --VC-CODE-STR-FG: #e93f3b;
    --VC-CODE-NULL-FG: #808080;
  }
}
#__vconsole[data-theme="dark"] {
  --VC-BG-0: #191919;
  --VC-BG-1: #1f1f1f;
  --VC-BG-2: #232323;
  --VC-BG-3: #2f2f2f;
  --VC-BG-4: #606060;
  --VC-BG-5: #2c2c2c;
  --VC-FG-0: rgba(255, 255, 255, 0.8);
  --VC-FG-HALF: rgba(255, 255, 255, 0.6);
  --VC-FG-1: rgba(255, 255, 255, 0.5);
  --VC-FG-2: rgba(255, 255, 255, 0.3);
  --VC-FG-3: rgba(255, 255, 255, 0.05);
  --VC-RED: #fa5151;
  --VC-ORANGE: #c87d2f;
  --VC-YELLOW: #cc9c00;
  --VC-GREEN: #74a800;
  --VC-LIGHTGREEN: #28b561;
  --VC-BRAND: #07c160;
  --VC-BLUE: #10aeff;
  --VC-INDIGO: #1196ff;
  --VC-PURPLE: #8183ff;
  --VC-LINK: #7d90a9;
  --VC-TEXTGREEN: #259c5c;
  --VC-FG: white;
  --VC-BG: black;
  --VC-BG-COLOR-ACTIVE: #282828;
  --VC-WARN-BG: #332700;
  --VC-WARN-BORDER: #664e00;
  --VC-ERROR-BG: #321010;
  --VC-ERROR-BORDER: #642020;
  --VC-DOM-TAG-NAME-COLOR: #5DB0D7;
  --VC-DOM-ATTRIBUTE-NAME-COLOR: #9BBBDC;
  --VC-DOM-ATTRIBUTE-VALUE-COLOR: #f29766;
  --VC-CODE-KEY-FG: #e36eec;
  --VC-CODE-PRIVATE-KEY-FG: #f4c5f7;
  --VC-CODE-FUNC-FG: #556af2;
  --VC-CODE-NUMBER-FG: #9980ff;
  --VC-CODE-STR-FG: #e93f3b;
  --VC-CODE-NULL-FG: #808080;
}
</style><style>/* color */
.vcelm-node {
  color: var(--VC-DOM-TAG-NAME-COLOR);
}
.vcelm-k {
  color: var(--VC-DOM-ATTRIBUTE-NAME-COLOR);
}
.vcelm-v {
  color: var(--VC-DOM-ATTRIBUTE-VALUE-COLOR);
}
/* layout */
.vcelm-l {
  padding-left: 8px;
  position: relative;
  word-wrap: break-word;
  line-height: 1;
}
/*.vcelm-l.vcelm-noc {
  padding-left: 0;
}*/
.vcelm-l.vc-toggle > .vcelm-node {
  display: block;
}
.vcelm-l .vcelm-node:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vcelm-l.vcelm-noc .vcelm-node:active {
  background-color: transparent;
}
.vcelm-t {
  white-space: pre-wrap;
  word-wrap: break-word;
}
/* level */
.vcelm-l .vcelm-l {
  display: none;
}
.vcelm-l.vc-toggle > .vcelm-l {
  margin-left: 4px;
  display: block;
}
/* arrow */
.vcelm-l:before {
  content: "";
  display: block;
  position: absolute;
  top: 6px;
  left: 3px;
  width: 0;
  height: 0;
  border: transparent solid 3px;
  border-left-color: var(--VC-FG-1);
}
.vcelm-l.vc-toggle:before {
  display: block;
  top: 6px;
  left: 0;
  border-top-color: var(--VC-FG-1);
  border-left-color: transparent;
}
.vcelm-l.vcelm-noc:before {
  display: none;
}
</style><script charset="utf-8" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/vendors_layouts__index_p__Area__GDS-2020_p__Area__HarmonyOSForerunner_p__ArticleDetail_p__Home_p__Li_a66cec21.js.下载"></script><script charset="utf-8" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/vendors_layouts__index_p__ArticleDetail_p__Home_p__Live_p__Live__Add_p__QuestionDetail_p__Questions__c0b66e4e.js.下载"></script><script charset="utf-8" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/vendors_layouts__index.js.下载"></script><script charset="utf-8" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/layouts__index_p__Live__Add_p__Video__Add_p__Write.js.下载"></script><script charset="utf-8" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/layouts__index.js.下载"></script><script charset="utf-8" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/3.js.下载"></script><link rel="stylesheet" type="text/css" href="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/vendors_p__ArticleDetail_p__Live_p__QuestionDetail_p__Video.chunk.css"><script charset="utf-8" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/vendors_p__ArticleDetail_p__Live_p__QuestionDetail_p__Video.js.下载"></script><script charset="utf-8" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/p__ArticleDetail.js.下载"></script><script charset="utf-8" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/56.js.下载"></script><link rel="stylesheet" type="text/css" href="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/2.chunk.css"><script charset="utf-8" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/2.js.下载"></script><script charset="utf-8" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/7.js.下载"></script><script charset="utf-8" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/9.js.下载"></script><script src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/katexCssLoader.js.下载"></script><meta http-equiv="origin-trial" content="A+b/H0b8RPXNaJgaNFpO0YOFuGK6myDQXlwnJB3SwzvNMfcndat4DZYMrP4ClJIzYWo3/yP2S+8FTZ/lpqbPAAEAAABueyJvcmlnaW4iOiJodHRwczovL2ltYXNkay5nb29nbGVhcGlzLmNvbTo0NDMiLCJmZWF0dXJlIjoiVHJ1c3RUb2tlbnMiLCJleHBpcnkiOjE2MjYyMjA3OTksImlzVGhpcmRQYXJ0eSI6dHJ1ZX0="><meta http-equiv="origin-trial" content="A9ZgbRtm4pU3oZiuNzOsKcC8ppFSZdcjP2qYcdQrFKVzkmiWH1kdYY1Mi9x7G8+PS8HV9Ha9Cz0gaMdKsiVZIgMAAAB7eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiVHJ1c3RUb2tlbnMiLCJleHBpcnkiOjE2MjYyMjA3OTksImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="AxL6oBxcpn5rQDPKSAs+d0oxNyJYq2/4esBUh3Yx5z8QfcLu+AU8iFCXYRcr/CEEfDnkxxLTsvXPJFQBxHfvkgMAAACBeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiVHJ1c3RUb2tlbnMiLCJleHBpcnkiOjE2MjYyMjA3OTksImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="A9KPtG5kl3oLTk21xqynDPGQ5t18bSOpwt0w6kGa6dEWbuwjpffmdUpR3W+faZDubGT+KIk2do0BX2ca16x8qAcAAACBeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiVHJ1c3RUb2tlbnMiLCJleHBpcnkiOjE2MjYyMjA3OTksImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="A3HucHUo1oW9s+9kIKz8mLkbcmdaj5lxt3eiIMp1Nh49dkkBlg1Fhg4Fd/r0vL69mRRA36YutI9P/lJUfL8csQoAAACFeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQ29udmVyc2lvbk1lYXN1cmVtZW50IiwiZXhwaXJ5IjoxNjI2MjIwNzk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ=="><style type="text/css">
/* stylelint-disable font-family-no-missing-generic-family-keyword */
@font-face {
  font-family: 'KaTeX_AMS';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_AMS-Regular.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_AMS-Regular.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_AMS-Regular.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Caligraphic';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Caligraphic-Bold.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Caligraphic-Bold.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Caligraphic-Bold.ttf) format('truetype');
  font-weight: bold;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Caligraphic';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Caligraphic-Regular.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Caligraphic-Regular.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Caligraphic-Regular.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Fraktur';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Fraktur-Bold.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Fraktur-Bold.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Fraktur-Bold.ttf) format('truetype');
  font-weight: bold;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Fraktur';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Fraktur-Regular.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Fraktur-Regular.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Fraktur-Regular.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Main';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Main-Bold.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Main-Bold.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Main-Bold.ttf) format('truetype');
  font-weight: bold;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Main';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Main-BoldItalic.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Main-BoldItalic.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Main-BoldItalic.ttf) format('truetype');
  font-weight: bold;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_Main';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Main-Italic.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Main-Italic.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Main-Italic.ttf) format('truetype');
  font-weight: normal;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_Main';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Main-Regular.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Main-Regular.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Main-Regular.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Math';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Math-BoldItalic.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Math-BoldItalic.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Math-BoldItalic.ttf) format('truetype');
  font-weight: bold;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_Math';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Math-Italic.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Math-Italic.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Math-Italic.ttf) format('truetype');
  font-weight: normal;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_SansSerif-Bold.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_SansSerif-Bold.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_SansSerif-Bold.ttf) format('truetype');
  font-weight: bold;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_SansSerif-Italic.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_SansSerif-Italic.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_SansSerif-Italic.ttf) format('truetype');
  font-weight: normal;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_SansSerif-Regular.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_SansSerif-Regular.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_SansSerif-Regular.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Script';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Script-Regular.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Script-Regular.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Script-Regular.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Size1';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Size1-Regular.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Size1-Regular.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Size1-Regular.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Size2';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Size2-Regular.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Size2-Regular.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Size2-Regular.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Size3';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Size3-Regular.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Size3-Regular.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Size3-Regular.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Size4';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Size4-Regular.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Size4-Regular.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Size4-Regular.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Typewriter';
  src: url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Typewriter-Regular.woff2) format('woff2'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Typewriter-Regular.woff) format('woff'), url(https://cdn.segmentfault.com/r-7b7553ca/fonts/katex/KaTeX_Typewriter-Regular.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
.katex {
  font: normal 1.21em KaTeX_Main, Times New Roman, serif;
  line-height: 1.2;
  text-indent: 0;
  text-rendering: auto;
  border-color: currentColor;
}
.katex * {
  -ms-high-contrast-adjust: none !important;
}
.katex .katex-version::after {
  content: "0.12.0";
}
.katex .katex-mathml {
  position: absolute;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 0;
  border: 0;
  height: 1px;
  width: 1px;
  overflow: hidden;
}
.katex .katex-html {
  /* 
ewline is an empty block at top level, between .base elements */
}
.katex .katex-html > .newline {
  display: block;
}
.katex .base {
  position: relative;
  display: inline-block;
  white-space: nowrap;
  width: min-content;
}
.katex .strut {
  display: inline-block;
}
.katex .textbf {
  font-weight: bold;
}
.katex .textit {
  font-style: italic;
}
.katex .textrm {
  font-family: KaTeX_Main;
}
.katex .textsf {
  font-family: KaTeX_SansSerif;
}
.katex .texttt {
  font-family: KaTeX_Typewriter;
}
.katex .mathnormal {
  font-family: KaTeX_Math;
  font-style: italic;
}
.katex .mathit {
  font-family: KaTeX_Main;
  font-style: italic;
}
.katex .mathrm {
  font-style: normal;
}
.katex .mathbf {
  font-family: KaTeX_Main;
  font-weight: bold;
}
.katex .boldsymbol {
  font-family: KaTeX_Math;
  font-weight: bold;
  font-style: italic;
}
.katex .amsrm {
  font-family: KaTeX_AMS;
}
.katex .mathbb,
.katex .textbb {
  font-family: KaTeX_AMS;
}
.katex .mathcal {
  font-family: KaTeX_Caligraphic;
}
.katex .mathfrak,
.katex .textfrak {
  font-family: KaTeX_Fraktur;
}
.katex .mathtt {
  font-family: KaTeX_Typewriter;
}
.katex .mathscr,
.katex .textscr {
  font-family: KaTeX_Script;
}
.katex .mathsf,
.katex .textsf {
  font-family: KaTeX_SansSerif;
}
.katex .mathboldsf,
.katex .textboldsf {
  font-family: KaTeX_SansSerif;
  font-weight: bold;
}
.katex .mathitsf,
.katex .textitsf {
  font-family: KaTeX_SansSerif;
  font-style: italic;
}
.katex .mainrm {
  font-family: KaTeX_Main;
  font-style: normal;
}
.katex .vlist-t {
  display: inline-table;
  table-layout: fixed;
  border-collapse: collapse;
}
.katex .vlist-r {
  display: table-row;
}
.katex .vlist {
  display: table-cell;
  vertical-align: bottom;
  position: relative;
}
.katex .vlist > span {
  display: block;
  height: 0;
  position: relative;
}
.katex .vlist > span > span {
  display: inline-block;
}
.katex .vlist > span > .pstrut {
  overflow: hidden;
  width: 0;
}
.katex .vlist-t2 {
  margin-right: -2px;
}
.katex .vlist-s {
  display: table-cell;
  vertical-align: bottom;
  font-size: 1px;
  width: 2px;
  min-width: 2px;
}
.katex .vbox {
  display: -ms-inline-flexbox;
  display: inline-flex;
  -ms-flex-direction: column;
  flex-direction: column;
  align-items: baseline;
}
.katex .hbox {
  display: -ms-inline-flexbox;
  display: inline-flex;
  -ms-flex-direction: row;
  flex-direction: row;
  width: 100%;
}
.katex .thinbox {
  display: inline-flex;
  flex-direction: row;
  width: 0;
  max-width: 0;
}
.katex .msupsub {
  text-align: left;
}
.katex .mfrac > span > span {
  text-align: center;
}
.katex .mfrac .frac-line {
  display: inline-block;
  width: 100%;
  border-bottom-style: solid;
}
.katex .mfrac .frac-line,
.katex .overline .overline-line,
.katex .underline .underline-line,
.katex .hline,
.katex .hdashline,
.katex .rule {
  min-height: 1px;
}
.katex .mspace {
  display: inline-block;
}
.katex .llap,
.katex .rlap,
.katex .clap {
  width: 0;
  position: relative;
}
.katex .llap > .inner,
.katex .rlap > .inner,
.katex .clap > .inner {
  position: absolute;
}
.katex .llap > .fix,
.katex .rlap > .fix,
.katex .clap > .fix {
  display: inline-block;
}
.katex .llap > .inner {
  right: 0;
}
.katex .rlap > .inner,
.katex .clap > .inner {
  left: 0;
}
.katex .clap > .inner > span {
  margin-left: -50%;
  margin-right: 50%;
}
.katex .rule {
  display: inline-block;
  border: solid 0;
  position: relative;
}
.katex .overline .overline-line,
.katex .underline .underline-line,
.katex .hline {
  display: inline-block;
  width: 100%;
  border-bottom-style: solid;
}
.katex .hdashline {
  display: inline-block;
  width: 100%;
  border-bottom-style: dashed;
}
.katex .sqrt > .root {
  margin-left: 0.27777778em;
  margin-right: -0.55555556em;
}
.katex .sizing.reset-size1.size1,
.katex .fontsize-ensurer.reset-size1.size1 {
  font-size: 1em;
}
.katex .sizing.reset-size1.size2,
.katex .fontsize-ensurer.reset-size1.size2 {
  font-size: 1.2em;
}
.katex .sizing.reset-size1.size3,
.katex .fontsize-ensurer.reset-size1.size3 {
  font-size: 1.4em;
}
.katex .sizing.reset-size1.size4,
.katex .fontsize-ensurer.reset-size1.size4 {
  font-size: 1.6em;
}
.katex .sizing.reset-size1.size5,
.katex .fontsize-ensurer.reset-size1.size5 {
  font-size: 1.8em;
}
.katex .sizing.reset-size1.size6,
.katex .fontsize-ensurer.reset-size1.size6 {
  font-size: 2em;
}
.katex .sizing.reset-size1.size7,
.katex .fontsize-ensurer.reset-size1.size7 {
  font-size: 2.4em;
}
.katex .sizing.reset-size1.size8,
.katex .fontsize-ensurer.reset-size1.size8 {
  font-size: 2.88em;
}
.katex .sizing.reset-size1.size9,
.katex .fontsize-ensurer.reset-size1.size9 {
  font-size: 3.456em;
}
.katex .sizing.reset-size1.size10,
.katex .fontsize-ensurer.reset-size1.size10 {
  font-size: 4.148em;
}
.katex .sizing.reset-size1.size11,
.katex .fontsize-ensurer.reset-size1.size11 {
  font-size: 4.976em;
}
.katex .sizing.reset-size2.size1,
.katex .fontsize-ensurer.reset-size2.size1 {
  font-size: 0.83333333em;
}
.katex .sizing.reset-size2.size2,
.katex .fontsize-ensurer.reset-size2.size2 {
  font-size: 1em;
}
.katex .sizing.reset-size2.size3,
.katex .fontsize-ensurer.reset-size2.size3 {
  font-size: 1.16666667em;
}
.katex .sizing.reset-size2.size4,
.katex .fontsize-ensurer.reset-size2.size4 {
  font-size: 1.33333333em;
}
.katex .sizing.reset-size2.size5,
.katex .fontsize-ensurer.reset-size2.size5 {
  font-size: 1.5em;
}
.katex .sizing.reset-size2.size6,
.katex .fontsize-ensurer.reset-size2.size6 {
  font-size: 1.66666667em;
}
.katex .sizing.reset-size2.size7,
.katex .fontsize-ensurer.reset-size2.size7 {
  font-size: 2em;
}
.katex .sizing.reset-size2.size8,
.katex .fontsize-ensurer.reset-size2.size8 {
  font-size: 2.4em;
}
.katex .sizing.reset-size2.size9,
.katex .fontsize-ensurer.reset-size2.size9 {
  font-size: 2.88em;
}
.katex .sizing.reset-size2.size10,
.katex .fontsize-ensurer.reset-size2.size10 {
  font-size: 3.45666667em;
}
.katex .sizing.reset-size2.size11,
.katex .fontsize-ensurer.reset-size2.size11 {
  font-size: 4.14666667em;
}
.katex .sizing.reset-size3.size1,
.katex .fontsize-ensurer.reset-size3.size1 {
  font-size: 0.71428571em;
}
.katex .sizing.reset-size3.size2,
.katex .fontsize-ensurer.reset-size3.size2 {
  font-size: 0.85714286em;
}
.katex .sizing.reset-size3.size3,
.katex .fontsize-ensurer.reset-size3.size3 {
  font-size: 1em;
}
.katex .sizing.reset-size3.size4,
.katex .fontsize-ensurer.reset-size3.size4 {
  font-size: 1.14285714em;
}
.katex .sizing.reset-size3.size5,
.katex .fontsize-ensurer.reset-size3.size5 {
  font-size: 1.28571429em;
}
.katex .sizing.reset-size3.size6,
.katex .fontsize-ensurer.reset-size3.size6 {
  font-size: 1.42857143em;
}
.katex .sizing.reset-size3.size7,
.katex .fontsize-ensurer.reset-size3.size7 {
  font-size: 1.71428571em;
}
.katex .sizing.reset-size3.size8,
.katex .fontsize-ensurer.reset-size3.size8 {
  font-size: 2.05714286em;
}
.katex .sizing.reset-size3.size9,
.katex .fontsize-ensurer.reset-size3.size9 {
  font-size: 2.46857143em;
}
.katex .sizing.reset-size3.size10,
.katex .fontsize-ensurer.reset-size3.size10 {
  font-size: 2.96285714em;
}
.katex .sizing.reset-size3.size11,
.katex .fontsize-ensurer.reset-size3.size11 {
  font-size: 3.55428571em;
}
.katex .sizing.reset-size4.size1,
.katex .fontsize-ensurer.reset-size4.size1 {
  font-size: 0.625em;
}
.katex .sizing.reset-size4.size2,
.katex .fontsize-ensurer.reset-size4.size2 {
  font-size: 0.75em;
}
.katex .sizing.reset-size4.size3,
.katex .fontsize-ensurer.reset-size4.size3 {
  font-size: 0.875em;
}
.katex .sizing.reset-size4.size4,
.katex .fontsize-ensurer.reset-size4.size4 {
  font-size: 1em;
}
.katex .sizing.reset-size4.size5,
.katex .fontsize-ensurer.reset-size4.size5 {
  font-size: 1.125em;
}
.katex .sizing.reset-size4.size6,
.katex .fontsize-ensurer.reset-size4.size6 {
  font-size: 1.25em;
}
.katex .sizing.reset-size4.size7,
.katex .fontsize-ensurer.reset-size4.size7 {
  font-size: 1.5em;
}
.katex .sizing.reset-size4.size8,
.katex .fontsize-ensurer.reset-size4.size8 {
  font-size: 1.8em;
}
.katex .sizing.reset-size4.size9,
.katex .fontsize-ensurer.reset-size4.size9 {
  font-size: 2.16em;
}
.katex .sizing.reset-size4.size10,
.katex .fontsize-ensurer.reset-size4.size10 {
  font-size: 2.5925em;
}
.katex .sizing.reset-size4.size11,
.katex .fontsize-ensurer.reset-size4.size11 {
  font-size: 3.11em;
}
.katex .sizing.reset-size5.size1,
.katex .fontsize-ensurer.reset-size5.size1 {
  font-size: 0.55555556em;
}
.katex .sizing.reset-size5.size2,
.katex .fontsize-ensurer.reset-size5.size2 {
  font-size: 0.66666667em;
}
.katex .sizing.reset-size5.size3,
.katex .fontsize-ensurer.reset-size5.size3 {
  font-size: 0.77777778em;
}
.katex .sizing.reset-size5.size4,
.katex .fontsize-ensurer.reset-size5.size4 {
  font-size: 0.88888889em;
}
.katex .sizing.reset-size5.size5,
.katex .fontsize-ensurer.reset-size5.size5 {
  font-size: 1em;
}
.katex .sizing.reset-size5.size6,
.katex .fontsize-ensurer.reset-size5.size6 {
  font-size: 1.11111111em;
}
.katex .sizing.reset-size5.size7,
.katex .fontsize-ensurer.reset-size5.size7 {
  font-size: 1.33333333em;
}
.katex .sizing.reset-size5.size8,
.katex .fontsize-ensurer.reset-size5.size8 {
  font-size: 1.6em;
}
.katex .sizing.reset-size5.size9,
.katex .fontsize-ensurer.reset-size5.size9 {
  font-size: 1.92em;
}
.katex .sizing.reset-size5.size10,
.katex .fontsize-ensurer.reset-size5.size10 {
  font-size: 2.30444444em;
}
.katex .sizing.reset-size5.size11,
.katex .fontsize-ensurer.reset-size5.size11 {
  font-size: 2.76444444em;
}
.katex .sizing.reset-size6.size1,
.katex .fontsize-ensurer.reset-size6.size1 {
  font-size: 0.5em;
}
.katex .sizing.reset-size6.size2,
.katex .fontsize-ensurer.reset-size6.size2 {
  font-size: 0.6em;
}
.katex .sizing.reset-size6.size3,
.katex .fontsize-ensurer.reset-size6.size3 {
  font-size: 0.7em;
}
.katex .sizing.reset-size6.size4,
.katex .fontsize-ensurer.reset-size6.size4 {
  font-size: 0.8em;
}
.katex .sizing.reset-size6.size5,
.katex .fontsize-ensurer.reset-size6.size5 {
  font-size: 0.9em;
}
.katex .sizing.reset-size6.size6,
.katex .fontsize-ensurer.reset-size6.size6 {
  font-size: 1em;
}
.katex .sizing.reset-size6.size7,
.katex .fontsize-ensurer.reset-size6.size7 {
  font-size: 1.2em;
}
.katex .sizing.reset-size6.size8,
.katex .fontsize-ensurer.reset-size6.size8 {
  font-size: 1.44em;
}
.katex .sizing.reset-size6.size9,
.katex .fontsize-ensurer.reset-size6.size9 {
  font-size: 1.728em;
}
.katex .sizing.reset-size6.size10,
.katex .fontsize-ensurer.reset-size6.size10 {
  font-size: 2.074em;
}
.katex .sizing.reset-size6.size11,
.katex .fontsize-ensurer.reset-size6.size11 {
  font-size: 2.488em;
}
.katex .sizing.reset-size7.size1,
.katex .fontsize-ensurer.reset-size7.size1 {
  font-size: 0.41666667em;
}
.katex .sizing.reset-size7.size2,
.katex .fontsize-ensurer.reset-size7.size2 {
  font-size: 0.5em;
}
.katex .sizing.reset-size7.size3,
.katex .fontsize-ensurer.reset-size7.size3 {
  font-size: 0.58333333em;
}
.katex .sizing.reset-size7.size4,
.katex .fontsize-ensurer.reset-size7.size4 {
  font-size: 0.66666667em;
}
.katex .sizing.reset-size7.size5,
.katex .fontsize-ensurer.reset-size7.size5 {
  font-size: 0.75em;
}
.katex .sizing.reset-size7.size6,
.katex .fontsize-ensurer.reset-size7.size6 {
  font-size: 0.83333333em;
}
.katex .sizing.reset-size7.size7,
.katex .fontsize-ensurer.reset-size7.size7 {
  font-size: 1em;
}
.katex .sizing.reset-size7.size8,
.katex .fontsize-ensurer.reset-size7.size8 {
  font-size: 1.2em;
}
.katex .sizing.reset-size7.size9,
.katex .fontsize-ensurer.reset-size7.size9 {
  font-size: 1.44em;
}
.katex .sizing.reset-size7.size10,
.katex .fontsize-ensurer.reset-size7.size10 {
  font-size: 1.72833333em;
}
.katex .sizing.reset-size7.size11,
.katex .fontsize-ensurer.reset-size7.size11 {
  font-size: 2.07333333em;
}
.katex .sizing.reset-size8.size1,
.katex .fontsize-ensurer.reset-size8.size1 {
  font-size: 0.34722222em;
}
.katex .sizing.reset-size8.size2,
.katex .fontsize-ensurer.reset-size8.size2 {
  font-size: 0.41666667em;
}
.katex .sizing.reset-size8.size3,
.katex .fontsize-ensurer.reset-size8.size3 {
  font-size: 0.48611111em;
}
.katex .sizing.reset-size8.size4,
.katex .fontsize-ensurer.reset-size8.size4 {
  font-size: 0.55555556em;
}
.katex .sizing.reset-size8.size5,
.katex .fontsize-ensurer.reset-size8.size5 {
  font-size: 0.625em;
}
.katex .sizing.reset-size8.size6,
.katex .fontsize-ensurer.reset-size8.size6 {
  font-size: 0.69444444em;
}
.katex .sizing.reset-size8.size7,
.katex .fontsize-ensurer.reset-size8.size7 {
  font-size: 0.83333333em;
}
.katex .sizing.reset-size8.size8,
.katex .fontsize-ensurer.reset-size8.size8 {
  font-size: 1em;
}
.katex .sizing.reset-size8.size9,
.katex .fontsize-ensurer.reset-size8.size9 {
  font-size: 1.2em;
}
.katex .sizing.reset-size8.size10,
.katex .fontsize-ensurer.reset-size8.size10 {
  font-size: 1.44027778em;
}
.katex .sizing.reset-size8.size11,
.katex .fontsize-ensurer.reset-size8.size11 {
  font-size: 1.72777778em;
}
.katex .sizing.reset-size9.size1,
.katex .fontsize-ensurer.reset-size9.size1 {
  font-size: 0.28935185em;
}
.katex .sizing.reset-size9.size2,
.katex .fontsize-ensurer.reset-size9.size2 {
  font-size: 0.34722222em;
}
.katex .sizing.reset-size9.size3,
.katex .fontsize-ensurer.reset-size9.size3 {
  font-size: 0.40509259em;
}
.katex .sizing.reset-size9.size4,
.katex .fontsize-ensurer.reset-size9.size4 {
  font-size: 0.46296296em;
}
.katex .sizing.reset-size9.size5,
.katex .fontsize-ensurer.reset-size9.size5 {
  font-size: 0.52083333em;
}
.katex .sizing.reset-size9.size6,
.katex .fontsize-ensurer.reset-size9.size6 {
  font-size: 0.5787037em;
}
.katex .sizing.reset-size9.size7,
.katex .fontsize-ensurer.reset-size9.size7 {
  font-size: 0.69444444em;
}
.katex .sizing.reset-size9.size8,
.katex .fontsize-ensurer.reset-size9.size8 {
  font-size: 0.83333333em;
}
.katex .sizing.reset-size9.size9,
.katex .fontsize-ensurer.reset-size9.size9 {
  font-size: 1em;
}
.katex .sizing.reset-size9.size10,
.katex .fontsize-ensurer.reset-size9.size10 {
  font-size: 1.20023148em;
}
.katex .sizing.reset-size9.size11,
.katex .fontsize-ensurer.reset-size9.size11 {
  font-size: 1.43981481em;
}
.katex .sizing.reset-size10.size1,
.katex .fontsize-ensurer.reset-size10.size1 {
  font-size: 0.24108004em;
}
.katex .sizing.reset-size10.size2,
.katex .fontsize-ensurer.reset-size10.size2 {
  font-size: 0.28929605em;
}
.katex .sizing.reset-size10.size3,
.katex .fontsize-ensurer.reset-size10.size3 {
  font-size: 0.33751205em;
}
.katex .sizing.reset-size10.size4,
.katex .fontsize-ensurer.reset-size10.size4 {
  font-size: 0.38572806em;
}
.katex .sizing.reset-size10.size5,
.katex .fontsize-ensurer.reset-size10.size5 {
  font-size: 0.43394407em;
}
.katex .sizing.reset-size10.size6,
.katex .fontsize-ensurer.reset-size10.size6 {
  font-size: 0.48216008em;
}
.katex .sizing.reset-size10.size7,
.katex .fontsize-ensurer.reset-size10.size7 {
  font-size: 0.57859209em;
}
.katex .sizing.reset-size10.size8,
.katex .fontsize-ensurer.reset-size10.size8 {
  font-size: 0.69431051em;
}
.katex .sizing.reset-size10.size9,
.katex .fontsize-ensurer.reset-size10.size9 {
  font-size: 0.83317261em;
}
.katex .sizing.reset-size10.size10,
.katex .fontsize-ensurer.reset-size10.size10 {
  font-size: 1em;
}
.katex .sizing.reset-size10.size11,
.katex .fontsize-ensurer.reset-size10.size11 {
  font-size: 1.19961427em;
}
.katex .sizing.reset-size11.size1,
.katex .fontsize-ensurer.reset-size11.size1 {
  font-size: 0.20096463em;
}
.katex .sizing.reset-size11.size2,
.katex .fontsize-ensurer.reset-size11.size2 {
  font-size: 0.24115756em;
}
.katex .sizing.reset-size11.size3,
.katex .fontsize-ensurer.reset-size11.size3 {
  font-size: 0.28135048em;
}
.katex .sizing.reset-size11.size4,
.katex .fontsize-ensurer.reset-size11.size4 {
  font-size: 0.32154341em;
}
.katex .sizing.reset-size11.size5,
.katex .fontsize-ensurer.reset-size11.size5 {
  font-size: 0.36173633em;
}
.katex .sizing.reset-size11.size6,
.katex .fontsize-ensurer.reset-size11.size6 {
  font-size: 0.40192926em;
}
.katex .sizing.reset-size11.size7,
.katex .fontsize-ensurer.reset-size11.size7 {
  font-size: 0.48231511em;
}
.katex .sizing.reset-size11.size8,
.katex .fontsize-ensurer.reset-size11.size8 {
  font-size: 0.57877814em;
}
.katex .sizing.reset-size11.size9,
.katex .fontsize-ensurer.reset-size11.size9 {
  font-size: 0.69453376em;
}
.katex .sizing.reset-size11.size10,
.katex .fontsize-ensurer.reset-size11.size10 {
  font-size: 0.83360129em;
}
.katex .sizing.reset-size11.size11,
.katex .fontsize-ensurer.reset-size11.size11 {
  font-size: 1em;
}
.katex .delimsizing.size1 {
  font-family: KaTeX_Size1;
}
.katex .delimsizing.size2 {
  font-family: KaTeX_Size2;
}
.katex .delimsizing.size3 {
  font-family: KaTeX_Size3;
}
.katex .delimsizing.size4 {
  font-family: KaTeX_Size4;
}
.katex .delimsizing.mult .delim-size1 > span {
  font-family: KaTeX_Size1;
}
.katex .delimsizing.mult .delim-size4 > span {
  font-family: KaTeX_Size4;
}
.katex .nulldelimiter {
  display: inline-block;
  width: 0.12em;
}
.katex .delimcenter {
  position: relative;
}
.katex .op-symbol {
  position: relative;
}
.katex .op-symbol.small-op {
  font-family: KaTeX_Size1;
}
.katex .op-symbol.large-op {
  font-family: KaTeX_Size2;
}
.katex .op-limits > .vlist-t {
  text-align: center;
}
.katex .accent > .vlist-t {
  text-align: center;
}
.katex .accent .accent-body {
  position: relative;
}
.katex .accent .accent-body:not(.accent-full) {
  width: 0;
}
.katex .overlay {
  display: block;
}
.katex .mtable .vertical-separator {
  display: inline-block;
  min-width: 1px;
}
.katex .mtable .arraycolsep {
  display: inline-block;
}
.katex .mtable .col-align-c > .vlist-t {
  text-align: center;
}
.katex .mtable .col-align-l > .vlist-t {
  text-align: left;
}
.katex .mtable .col-align-r > .vlist-t {
  text-align: right;
}
.katex .svg-align {
  text-align: left;
}
.katex svg {
  display: block;
  position: absolute;
  width: 100%;
  height: inherit;
  fill: currentColor;
  stroke: currentColor;
  fill-rule: nonzero;
  fill-opacity: 1;
  stroke-width: 1;
  stroke-linecap: butt;
  stroke-linejoin: miter;
  stroke-miterlimit: 4;
  stroke-dasharray: none;
  stroke-dashoffset: 0;
  stroke-opacity: 1;
}
.katex svg path {
  stroke: none;
}
.katex img {
  border-style: none;
  min-width: 0;
  min-height: 0;
  max-width: none;
  max-height: none;
}
.katex .stretchy {
  width: 100%;
  display: block;
  position: relative;
  overflow: hidden;
}
.katex .stretchy::before,
.katex .stretchy::after {
  content: "";
}
.katex .hide-tail {
  width: 100%;
  position: relative;
  overflow: hidden;
}
.katex .halfarrow-left {
  position: absolute;
  left: 0;
  width: 50.2%;
  overflow: hidden;
}
.katex .halfarrow-right {
  position: absolute;
  right: 0;
  width: 50.2%;
  overflow: hidden;
}
.katex .brace-left {
  position: absolute;
  left: 0;
  width: 25.1%;
  overflow: hidden;
}
.katex .brace-center {
  position: absolute;
  left: 25%;
  width: 50%;
  overflow: hidden;
}
.katex .brace-right {
  position: absolute;
  right: 0;
  width: 25.1%;
  overflow: hidden;
}
.katex .x-arrow-pad {
  padding: 0 0.5em;
}
.katex .x-arrow,
.katex .mover,
.katex .munder {
  text-align: center;
}
.katex .boxpad {
  padding: 0 0.3em 0 0.3em;
}
.katex .fbox,
.katex .fcolorbox {
  box-sizing: border-box;
  border: 0.04em solid;
}
.katex .cancel-pad {
  padding: 0 0.2em 0 0.2em;
}
.katex .cancel-lap {
  margin-left: -0.2em;
  margin-right: -0.2em;
}
.katex .sout {
  border-bottom-style: solid;
  border-bottom-width: 0.08em;
}
.katex-display {
  display: block;
  margin: 1em 0;
  text-align: center;
}
.katex-display > .katex {
  display: block;
  text-align: center;
  white-space: nowrap;
}
.katex-display > .katex > .katex-html {
  display: block;
  position: relative;
}
.katex-display > .katex > .katex-html > .tag {
  position: absolute;
  right: 0;
}
.katex-display.leqno > .katex > .katex-html > .tag {
  left: 0;
  right: auto;
}
.katex-display.fleqn > .katex {
  text-align: left;
  padding-left: 2em;
}
</style><link rel="preload" href="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/f(8).txt" as="script"><script type="text/javascript" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/f(8).txt"></script><meta name="event-object" value="{&quot;current&quot;: [&quot;article&quot;, [&quot;1190000020747302&quot;]], &quot;root&quot;: [&quot;article&quot;, &quot;1190000020747302&quot;]}" id="SFEventObject" data-react-helmet="true"><script async="true" defer="true" data-domain="segmentfault.com" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/plausible.js.下载" data-react-helmet="true"></script><script type="application/ld+json" data-react-helmet="true">{
            "@context": "https://schema.org",
            "@type": "Article",
            "mainEntityOfPage": {
              "@type": "WebPage",
              "@id": "https://google.com/article"
            },
            "name": "Spring Bean 生命周期 （实例结合源码彻底讲透）",
            "headline": "Spring Bean 生命周期 （实例结合源码彻底讲透）",
            "image": "https://cdn.segmentfault.com/r-7b7553ca/touch-icon.png",
            "datePublished": "2019-10-20T23:28:07.000Z",
            "dateModified": "2019-10-21T09:51:43.000Z",
            "url": "https://segmentfault.com/a/1190000020747302",
            "author": {
              "@type": "Person",
              "name": "Richard_Yi"
            },
            "publisher": {
              "@type": "Organization",
              "name": "SegmentFault",
              "logo": {
                "@type": "ImageObject",
                "url":
                  "https://assets.segmentfault.com/v-5fc4b0b2/global/img/static/touch-icon.png"
              }
            }
          }</script><link rel="preload" href="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/f(8).txt" as="script"><script type="text/javascript" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/f(8).txt"></script></head>
  <body>
    <div id="root"><div class="d-none d-lg-block text-center"><div id="OA_holder_5" class="ad-container" style="display:none"><div id="beacon_bd1d7f07de" style="position: absolute; left: 0px; top: 0px; visibility: hidden;"><img src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/lg.php" width="0" height="0" alt="" style="width: 0px; height: 0px;"></div>
</div></div><div id="root-top-container"></div><nav id="sf-header" class="bg-white shadow-sm sticky-top navbar navbar-expand-lg navbar-light"><div class="container"><a href="https://segmentfault.com/" class="navbar-brand"><img src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/logo-b.d865fc97.svg" width="139" height="26" class="d-inline-block" alt="segmentfault"></a><a class="btn btn-primary d-lg-none ml-auto mr-2" href="https://segmentfault.com/user/login">注册登录</a><button aria-controls="basic-navbar-nav" type="button" aria-label="Toggle navigation" class="navbar-toggler collapsed"><span class="navbar-toggler-icon"></span></button><div class="justify-content-between navbar-collapse collapse" id="basic-navbar-nav"><div class="font-weight-bold navbar-nav"><a href="https://segmentfault.com/" data-rb-event-key="/" class="nav-link">首页</a><a href="https://segmentfault.com/questions" data-rb-event-key="/questions" class="nav-link">问答</a><a href="https://segmentfault.com/blogs" data-rb-event-key="/blogs" class="nav-link">专栏</a><a href="https://segmentfault.com/news" data-rb-event-key="/news" class="nav-link">资讯</a><a href="https://ke.sifou.com/" target="_blank" rel="noreferrer" class="nav-link">课程<i class="ml-1 text-danger fas fa-fire-alt" style="width:0.88rem;vertical-align:text-bottom"></i></a><a href="https://segmentfault.com/events" data-rb-event-key="/events" class="nav-link">活动</a><div class="hover-down nav-item dropdown"><a aria-haspopup="true" aria-expanded="false" id="basic-nav-dropdown" href="https://segmentfault.com/a/1190000020747302?utm_source=sf-related#" class="dropdown-toggle nav-link" role="button">发现</a></div></div><form action="https://segmentfault.com/search" class="d-none d-xl-block px-3 header-search___28AtS form-inline"><input type="text" name="q" placeholder="搜索关键字" aria-label="搜索" class="mr-sm-2 w-100 form-control"></form><nav class="p-0 navbar navbar-expand navbar-light"><div class="d-none d-lg-flex mr-2 nav-item"><a href="https://segmentfault.com/user/login" class="btn btn-link">立即登录</a></div><div class="d-none d-lg-flex nav-item"><a href="https://segmentfault.com/user/register" class="btn btn-primary">免费注册</a></div></nav></div></div></nav><div class="d-none d-xl-flex justify-content-center"><div id="OA_holder_2" class="ad-container" style="display:block"><div id="beacon_fd1ebb43f4" style="position: absolute; left: 0px; top: 0px; visibility: hidden;"><img src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/lg(1).php" width="0" height="0" alt="" style="width: 0px; height: 0px;"></div>
</div></div><div class="article-content container"><nav aria-label="breadcrumb" class="font-size-14 px-0 my-0 mx-4 mx-md-0"><ol class="breadcrumb bg-transparent"><li class="breadcrumb-item"><a href="https://segmentfault.com/">首页</a></li><li class="breadcrumb-item"><a href="https://segmentfault.com/blogs">专栏</a></li><li class="breadcrumb-item"><a href="https://segmentfault.com/t/java/blogs">java</a></li><li class="breadcrumb-item active" aria-current="page">文章详情</li></ol></nav><div class="row"><div class="col-12 col-xl w-0 col"><div class="sticky-wrap sticky-top functional-area-left d-none d-xl-flex justify-content-center pt-5 functional-area-left2"><div role="group" class="align-items-center btn-group-vertical"><button aria-label="点赞" type="button" class="func-btn mainLike  sflex-center shadow-sm rounded-circle main-lg-Like mb-3 btn btn-outline-primary"><i class="far fa-thumbs-up"></i><span class="mainLikeNum ">4</span></button><button aria-label="收藏" type="button" class="func-btn sflex-center rounded-circle mb-2 btn btn-outline-secondary"><i class="far fa-bookmark"></i></button><a class="func-btn sflex-center btn btn-outline-secondary rounded-circle mb-2" href="https://segmentfault.com/a/1190000020747302?utm_source=sf-related#comment-area" aria-label="评论"><i class="far fa-comment-alt-lines"></i></a><div class="dropdown"><a href="https://segmentfault.com/a/1190000020747302?utm_source=sf-related#" class="func-btn nav-tab-item  rounded-pill btn btn-outline-secondary sflex-center rounded-circle dropdown-toggle" aria-label="分享"><i class="far fa-share-alt"></i></a></div></div></div><canvas hidden="" class="qrcode" height="132" width="132" style="height: 132px; width: 132px;"></canvas><div class="border-0 mb-4 card"><div class="p-lg-30 position-relative card-body"><h1 class="h2 mb-3"><a href="https://segmentfault.com/a/1190000020747302" class="text-body">Spring Bean 生命周期 （实例结合源码彻底讲透）</a></h1><div class="d-flex align-items-center mb-4"><a href="https://segmentfault.com/u/richard_yi" class="d-flex align-items-center"><picture class="mr-2 d-sm-block d-none"><img src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/654012719-5a4f841b1daab_big64" alt="" class="d-inline-block rounded-circle" width="32"></picture><strong class="align-self-center font-size-14">Richard_Yi</strong></a><time class="text-secondary font-size-14" datetime="2019-10-20T23:28:07.000Z" itemprop="datePublished" style="margin-left:12px">发布于 <!-- -->2019-10-21 </time></div><div id="OA_holder_25" class="ad-container" style="display:block"><div id="beacon_012078c30e" style="position: absolute; left: 0px; top: 0px; visibility: hidden;"><img src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/lg(2).php" width="0" height="0" alt="" style="width: 0px; height: 0px;"></div>
</div><article class="article fmt article-content ">
<h2 id="item-1">前言</h2>
<p>本篇文章主要是要介绍如何在Spring IoC 容器中 如何管理Spring Bean生命周期。 </p>
<p>在应用开发中，常常需要执行一些特定的初始化工作，这些工作都是相对比较固定的，比如建立数据库连接，打开网络连接等，同时，在结束服务时，也有一些相对固定的销毁工作需要执行。为了便于这些工作的设计，Spring IoC容器提供了相关的功能，可以让应用定制Bean的初始化和销毁过程。</p>
<h2 id="item-2">Spring Bean 生命周期</h2>
<h3 id="item-2-1">图片描述</h3>
<p>先来看看 Spring Bean 的生命周期流程图。结合图看后面的描述会更轻松一点哦。</p>
<p><span class="img-wrap"><img class="lazy entered loaded" data-src="/img/remote/1460000020747305?w=561&amp;h=800" alt="spring bean life cycle.png" title="spring bean life cycle.png" data-ll-status="loaded" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/1460000020747305"></span></p>
<h3 id="item-2-2">文字描述</h3>
<ol>
<li>Bean容器在配置文件中找到Spring Bean的定义。</li>
<li>Bean容器使用Java Reflection API创建Bean的实例。</li>
<li>如果声明了任何属性，声明的属性会被设置。如果属性本身是Bean，则将对其进行解析和设置。</li>
<li>如果Bean类实现<code>BeanNameAware</code>接口，则将通过传递Bean的名称来调用<code>setBeanName()</code>方法。</li>
<li>如果Bean类实现<code>BeanClassLoaderAware</code>接口，则将通过传递加载此Bean的ClassLoader对象的实例来调用<code>setBeanClassLoader()</code>方法。</li>
<li>如果Bean类实现<code>BeanFactoryAware</code>接口，则将通过传递BeanFactory对象的实例来调用<code>setBeanFactory()</code>方法。</li>
<li>如果有任何与BeanFactory关联的BeanPostProcessors对象已加载Bean，则将在设置Bean属性之前调用<code>postProcessBeforeInitialization()</code>方法。</li>
<li>如果Bean类实现了<code>InitializingBean</code>接口，则在设置了配置文件中定义的所有Bean属性后，将调用<code>afterPropertiesSet()</code>方法。</li>
<li>如果配置文件中的Bean定义包含<code>init-method</code>属性，则该属性的值将解析为Bean类中的方法名称，并将调用该方法。</li>
<li>如果为Bean Factory对象附加了任何Bean 后置处理器，则将调用<code>postProcessAfterInitialization()</code>方法。</li>
<li>如果Bean类实现<code>DisposableBean</code>接口，则当Application不再需要Bean引用时，将调用<code>destroy()</code>方法。</li>
<li>如果配置文件中的Bean定义包含<code>destroy-method</code>属性，那么将调用Bean类中的相应方法定义。</li>
</ol>
<h2 id="item-3">实例演示</h2>
<p>接下来，我们用一个简单的DEMO来演示一下，整个生命周期的流转过程，加深你的印象。</p>
<ol><li>定义一个<code>Person</code>类，实现了<code>DisposableBean, InitializingBean, BeanFactoryAware, BeanNameAware</code>这4个接口，同时还有自定义的<code>init-method</code>和<code>destroy-method</code>。这里，如果不了解这几个接口的读者，可以先去看看这几个接口的定义。</li></ol>
<div class="widget-codetool" style="display:none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="
public class Person implements DisposableBean, InitializingBean, BeanFactoryAware, BeanNameAware {

    private String name;

    Person() {
        System.out.println(&quot;Constructor of person bean is invoked!&quot;);
    }

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    @Override
    public void setBeanFactory(BeanFactory beanFactory) throws BeansException {
        System.out.println(&quot;setBeanFactory method of person is invoked&quot;);
    }

    @Override
    public void setBeanName(String name) {
        System.out.println(&quot;setBeanName method of person is invoked&quot;);
    }

    public void init() {
        System.out.println(&quot;custom init method of person bean is invoked!&quot;);
    }

    //Bean initialization code  equals to
    @Override
    public void afterPropertiesSet() throws Exception {
        System.out.println(&quot;afterPropertiesSet method of person bean is invoked!&quot;);
    }

    //Bean destruction code
    @Override
    public void destroy() throws Exception {
        System.out.println(&quot;DisposableBean Destroy method of person bean is invoked!&quot;);
    }

    public void destroyMethod() {
        System.out.println(&quot;custom Destroy method of person bean is invoked!&quot;);
    }

}" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="java hljs"><code class="java">
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">DisposableBean</span>, <span class="hljs-title">InitializingBean</span>, <span class="hljs-title">BeanFactoryAware</span>, <span class="hljs-title">BeanNameAware</span> </span>{

    <span class="hljs-keyword">private</span> String name;

    Person() {
        System.out.println(<span class="hljs-string">"Constructor of person bean is invoked!"</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> name;
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>{
        <span class="hljs-keyword">this</span>.name = name;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBeanFactory</span><span class="hljs-params">(BeanFactory beanFactory)</span> <span class="hljs-keyword">throws</span> BeansException </span>{
        System.out.println(<span class="hljs-string">"setBeanFactory method of person is invoked"</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBeanName</span><span class="hljs-params">(String name)</span> </span>{
        System.out.println(<span class="hljs-string">"setBeanName method of person is invoked"</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>{
        System.out.println(<span class="hljs-string">"custom init method of person bean is invoked!"</span>);
    }

    <span class="hljs-comment">//Bean initialization code  equals to</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterPropertiesSet</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        System.out.println(<span class="hljs-string">"afterPropertiesSet method of person bean is invoked!"</span>);
    }

    <span class="hljs-comment">//Bean destruction code</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        System.out.println(<span class="hljs-string">"DisposableBean Destroy method of person bean is invoked!"</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroyMethod</span><span class="hljs-params">()</span> </span>{
        System.out.println(<span class="hljs-string">"custom Destroy method of person bean is invoked!"</span>);
    }

}</code></pre>
<ol><li>定义一个<code>MyBeanPostProcessor</code>实现<code>BeanPostProcessor</code>接口。</li></ol>
<div class="widget-codetool" style="display:none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="public class MyBeanPostProcessor implements BeanPostProcessor {


    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
        System.out.println(&quot;post Process Before Initialization is invoked&quot;);
        return bean;
    }

    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
        System.out.println(&quot;post Process after Initialization is invoked&quot;);
        return bean;
    }
}
" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="java hljs"><code class="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBeanPostProcessor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">BeanPostProcessor</span> </span>{


    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">postProcessBeforeInitialization</span><span class="hljs-params">(Object bean, String beanName)</span> <span class="hljs-keyword">throws</span> BeansException </span>{
        System.out.println(<span class="hljs-string">"post Process Before Initialization is invoked"</span>);
        <span class="hljs-keyword">return</span> bean;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">postProcessAfterInitialization</span><span class="hljs-params">(Object bean, String beanName)</span> <span class="hljs-keyword">throws</span> BeansException </span>{
        System.out.println(<span class="hljs-string">"post Process after Initialization is invoked"</span>);
        <span class="hljs-keyword">return</span> bean;
    }
}
</code></pre>
<ol><li>配置文件，指定<code>init-method</code>和<code>destroy-method</code>属性</li></ol>
<div class="widget-codetool" style="display:none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

    &lt;bean name=&quot;myBeanPostProcessor&quot; class=&quot;ric.study.demo.ioc.life_cycle_demo_set.MyBeanPostProcessor&quot; /&gt;
    &lt;bean name=&quot;personBean&quot; class=&quot;ric.study.demo.ioc.life_cycle_demo_set.Person&quot;
          init-method=&quot;init&quot; destroy-method=&quot;destroyMethod&quot;&gt;
        &lt;property name=&quot;name&quot; value=&quot;Richard Yi&quot; /&gt;
    &lt;/bean&gt;

&lt;/beans&gt;" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="xml hljs"><code class="xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"myBeanPostProcessor"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ric.study.demo.ioc.life_cycle_demo_set.MyBeanPostProcessor"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"personBean"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ric.study.demo.ioc.life_cycle_demo_set.Person"</span>
          <span class="hljs-attr">init-method</span>=<span class="hljs-string">"init"</span> <span class="hljs-attr">destroy-method</span>=<span class="hljs-string">"destroyMethod"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Richard Yi"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre>
<ol><li>启动容器、销毁容器</li></ol>
<div class="widget-codetool" style="display:none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="public class Main {

    public static void main(String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext(&quot;spring-config-1.xml&quot;);
        ((ClassPathXmlApplicationContext) context).destroy();
    }
}" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="java hljs"><code class="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>{

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
        ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"spring-config-1.xml"</span>);
        ((ClassPathXmlApplicationContext) context).destroy();
    }
}</code></pre>
<ol><li>输出</li></ol>
<div class="widget-codetool" style="display:none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="Constructor of person bean is invoked!
setBeanName method of person is invoked
setBeanFactory method of person is invoked
post Process Before Initialization is invoked
afterPropertiesSet method of person bean is invoked!
custom init method of person bean is invoked!
post Process after Initialization is invoked
DisposableBean Destroy method of person bean is invoked!
custom Destroy method of person bean is invoked!" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="hljs pgsql"><code>Constructor <span class="hljs-keyword">of</span> person bean <span class="hljs-keyword">is</span> invoked!
setBeanName <span class="hljs-keyword">method</span> <span class="hljs-keyword">of</span> person <span class="hljs-keyword">is</span> invoked
setBeanFactory <span class="hljs-keyword">method</span> <span class="hljs-keyword">of</span> person <span class="hljs-keyword">is</span> invoked
post Process <span class="hljs-keyword">Before</span> Initialization <span class="hljs-keyword">is</span> invoked
afterPropertiesSet <span class="hljs-keyword">method</span> <span class="hljs-keyword">of</span> person bean <span class="hljs-keyword">is</span> invoked!
custom init <span class="hljs-keyword">method</span> <span class="hljs-keyword">of</span> person bean <span class="hljs-keyword">is</span> invoked!
post Process <span class="hljs-keyword">after</span> Initialization <span class="hljs-keyword">is</span> invoked
DisposableBean Destroy <span class="hljs-keyword">method</span> <span class="hljs-keyword">of</span> person bean <span class="hljs-keyword">is</span> invoked!
custom Destroy <span class="hljs-keyword">method</span> <span class="hljs-keyword">of</span> person bean <span class="hljs-keyword">is</span> invoked!</code></pre>
<p>可以看到这个结果和我们上面描述的一样。</p>
<h2 id="item-4">源码解析</h2>
<p>下面我们从源码角度来看看，上述描述的调用是如何实现的。</p>
<p>实际上如果你看过我之前的文章 <a href="https://juejin.im/post/5da7a0555188257a7306822d" rel="nofollow">Spring IoC 依赖注入 源码解析</a>的话，应该知道上述调用的具体实现。</p>
<p>这里相当于把相关部分再拎出来讲一遍。</p>
<h3 id="item-4-3">容器初始化</h3>
<p>Spring IoC 依赖注入的阶段，创建Bean有三个关键步骤</p>
<ol>
<li><strong>createBeanInstance() 实例化</strong></li>
<li><strong>populateBean(); 属性装配</strong></li>
<li><strong>initializeBean() 处理Bean初始化之后的各种回调事件</strong></li>
</ol>
<p>其中，<code>initializeBean()</code>负责处理Bean初始化后的各种回调事件。</p>
<div class="widget-codetool" style="display:none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="protected Object initializeBean(final String beanName, final Object bean, RootBeanDefinition mbd) {
        if (System.getSecurityManager() != null) {
            AccessController.doPrivileged(new PrivilegedAction&lt;Object&gt;() {
                @Override
                public Object run() {
                    invokeAwareMethods(beanName, bean);
                    return null;
                }
            }, getAccessControlContext());
        }
        else {
            // 涉及到的回调接口点进去一目了然，代码都是自解释的
            // BeanNameAware、BeanClassLoaderAware或BeanFactoryAware
            invokeAwareMethods(beanName, bean);
        }

        Object wrappedBean = bean;
        if (mbd == null || !mbd.isSynthetic()) {
            // BeanPostProcessor 的 postProcessBeforeInitialization 回调
            wrappedBean = applyBeanPostProcessorsBeforeInitialization(wrappedBean, beanName);
        }

        try {
            // init-methods
            // 或者是实现了InitializingBean接口，会调用afterPropertiesSet() 方法
            invokeInitMethods(beanName, wrappedBean, mbd);
        }
        catch (Throwable ex) {
            throw new BeanCreationException(
                    (mbd != null ? mbd.getResourceDescription() : null),
                    beanName, &quot;Invocation of init method failed&quot;, ex);
        }
        if (mbd == null || !mbd.isSynthetic()) {
            // BeanPostProcessor 的 postProcessAfterInitialization 回调
            wrappedBean = applyBeanPostProcessorsAfterInitialization(wrappedBean, beanName);
        }
        return wrappedBean;
    }" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="java hljs"><code class="java"><span class="hljs-function"><span class="hljs-keyword">protected</span> Object <span class="hljs-title">initializeBean</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String beanName, <span class="hljs-keyword">final</span> Object bean, RootBeanDefinition mbd)</span> </span>{
        <span class="hljs-keyword">if</span> (System.getSecurityManager() != <span class="hljs-keyword">null</span>) {
            AccessController.doPrivileged(<span class="hljs-keyword">new</span> PrivilegedAction&lt;Object&gt;() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>{
                    invokeAwareMethods(beanName, bean);
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
                }
            }, getAccessControlContext());
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// 涉及到的回调接口点进去一目了然，代码都是自解释的</span>
            <span class="hljs-comment">// BeanNameAware、BeanClassLoaderAware或BeanFactoryAware</span>
            invokeAwareMethods(beanName, bean);
        }

        Object wrappedBean = bean;
        <span class="hljs-keyword">if</span> (mbd == <span class="hljs-keyword">null</span> || !mbd.isSynthetic()) {
            <span class="hljs-comment">// BeanPostProcessor 的 postProcessBeforeInitialization 回调</span>
            wrappedBean = applyBeanPostProcessorsBeforeInitialization(wrappedBean, beanName);
        }

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// init-methods</span>
            <span class="hljs-comment">// 或者是实现了InitializingBean接口，会调用afterPropertiesSet() 方法</span>
            invokeInitMethods(beanName, wrappedBean, mbd);
        }
        <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BeanCreationException(
                    (mbd != <span class="hljs-keyword">null</span> ? mbd.getResourceDescription() : <span class="hljs-keyword">null</span>),
                    beanName, <span class="hljs-string">"Invocation of init method failed"</span>, ex);
        }
        <span class="hljs-keyword">if</span> (mbd == <span class="hljs-keyword">null</span> || !mbd.isSynthetic()) {
            <span class="hljs-comment">// BeanPostProcessor 的 postProcessAfterInitialization 回调</span>
            wrappedBean = applyBeanPostProcessorsAfterInitialization(wrappedBean, beanName);
        }
        <span class="hljs-keyword">return</span> wrappedBean;
    }</code></pre>
<p>其中<code>invokeAwareMethods</code>会先调用一系列的<code>***Aware</code>接口实现</p>
<div class="widget-codetool" style="display:none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="private void invokeAwareMethods(final String beanName, final Object bean) {
        if (bean instanceof Aware) {
            if (bean instanceof BeanNameAware) {
                ((BeanNameAware) bean).setBeanName(beanName);
            }
            if (bean instanceof BeanClassLoaderAware) {
                ((BeanClassLoaderAware) bean).setBeanClassLoader(getBeanClassLoader());
            }
            if (bean instanceof BeanFactoryAware) {
                ((BeanFactoryAware) bean).setBeanFactory(AbstractAutowireCapableBeanFactory.this);
            }
        }
    }" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="java hljs"><code class="java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">invokeAwareMethods</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String beanName, <span class="hljs-keyword">final</span> Object bean)</span> </span>{
        <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> Aware) {
            <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> BeanNameAware) {
                ((BeanNameAware) bean).setBeanName(beanName);
            }
            <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> BeanClassLoaderAware) {
                ((BeanClassLoaderAware) bean).setBeanClassLoader(getBeanClassLoader());
            }
            <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> BeanFactoryAware) {
                ((BeanFactoryAware) bean).setBeanFactory(AbstractAutowireCapableBeanFactory.<span class="hljs-keyword">this</span>);
            }
        }
    }</code></pre>
<p>然后再执行 <code>BeanPostProcessor</code> 的 <code>postProcessBeforeInitialization</code> 回调</p>
<div class="widget-codetool" style="display:none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="    @Override
    public Object applyBeanPostProcessorsBeforeInitialization(Object existingBean, String beanName)
            throws BeansException {

        Object result = existingBean;
        for (BeanPostProcessor beanProcessor : getBeanPostProcessors()) {
            result = beanProcessor.postProcessBeforeInitialization(result, beanName);
            if (result == null) {
                return result;
            }
        }
        return result;
    }" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="java hljs"><code class="java">    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">applyBeanPostProcessorsBeforeInitialization</span><span class="hljs-params">(Object existingBean, String beanName)</span>
            <span class="hljs-keyword">throws</span> BeansException </span>{

        Object result = existingBean;
        <span class="hljs-keyword">for</span> (BeanPostProcessor beanProcessor : getBeanPostProcessors()) {
            result = beanProcessor.postProcessBeforeInitialization(result, beanName);
            <span class="hljs-keyword">if</span> (result == <span class="hljs-keyword">null</span>) {
                <span class="hljs-keyword">return</span> result;
            }
        }
        <span class="hljs-keyword">return</span> result;
    }</code></pre>
<p>然后再调用 初始化方法，其中包括 <code>InitializingBean</code>的<code>afterPropertiesSet</code>方法和指定的<code>init-method</code>方法，</p>
<div class="widget-codetool" style="display:none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="protected void invokeInitMethods(String beanName, final Object bean, RootBeanDefinition mbd)
            throws Throwable {

        boolean isInitializingBean = (bean instanceof InitializingBean);
        if (isInitializingBean &amp;&amp; (mbd == null || !mbd.isExternallyManagedInitMethod(&quot;afterPropertiesSet&quot;))) {
            if (logger.isDebugEnabled()) {
                logger.debug(&quot;Invoking afterPropertiesSet() on bean with name &#39;&quot; + beanName + &quot;&#39;&quot;);
            }
            if (System.getSecurityManager() != null) {
                try {
                    AccessController.doPrivileged(new PrivilegedExceptionAction&lt;Object&gt;() {
                        @Override
                        public Object run() throws Exception {
                            ((InitializingBean) bean).afterPropertiesSet();
                            return null;
                        }
                    }, getAccessControlContext());
                }
                catch (PrivilegedActionException pae) {
                    throw pae.getException();
                }
            }
            else {
                ((InitializingBean) bean).afterPropertiesSet();
            }
        }

        if (mbd != null) {
            String initMethodName = mbd.getInitMethodName();
            if (initMethodName != null &amp;&amp; !(isInitializingBean &amp;&amp; &quot;afterPropertiesSet&quot;.equals(initMethodName)) &amp;&amp;
                    !mbd.isExternallyManagedInitMethod(initMethodName)) {
                invokeCustomInitMethod(beanName, bean, mbd);
            }
        }
    }" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="java hljs"><code class="java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">invokeInitMethods</span><span class="hljs-params">(String beanName, <span class="hljs-keyword">final</span> Object bean, RootBeanDefinition mbd)</span>
            <span class="hljs-keyword">throws</span> Throwable </span>{

        <span class="hljs-keyword">boolean</span> isInitializingBean = (bean <span class="hljs-keyword">instanceof</span> InitializingBean);
        <span class="hljs-keyword">if</span> (isInitializingBean &amp;&amp; (mbd == <span class="hljs-keyword">null</span> || !mbd.isExternallyManagedInitMethod(<span class="hljs-string">"afterPropertiesSet"</span>))) {
            <span class="hljs-keyword">if</span> (logger.isDebugEnabled()) {
                logger.debug(<span class="hljs-string">"Invoking afterPropertiesSet() on bean with name '"</span> + beanName + <span class="hljs-string">"'"</span>);
            }
            <span class="hljs-keyword">if</span> (System.getSecurityManager() != <span class="hljs-keyword">null</span>) {
                <span class="hljs-keyword">try</span> {
                    AccessController.doPrivileged(<span class="hljs-keyword">new</span> PrivilegedExceptionAction&lt;Object&gt;() {
                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">run</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
                            ((InitializingBean) bean).afterPropertiesSet();
                            <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
                        }
                    }, getAccessControlContext());
                }
                <span class="hljs-keyword">catch</span> (PrivilegedActionException pae) {
                    <span class="hljs-keyword">throw</span> pae.getException();
                }
            }
            <span class="hljs-keyword">else</span> {
                ((InitializingBean) bean).afterPropertiesSet();
            }
        }

        <span class="hljs-keyword">if</span> (mbd != <span class="hljs-keyword">null</span>) {
            String initMethodName = mbd.getInitMethodName();
            <span class="hljs-keyword">if</span> (initMethodName != <span class="hljs-keyword">null</span> &amp;&amp; !(isInitializingBean &amp;&amp; <span class="hljs-string">"afterPropertiesSet"</span>.equals(initMethodName)) &amp;&amp;
                    !mbd.isExternallyManagedInitMethod(initMethodName)) {
                invokeCustomInitMethod(beanName, bean, mbd);
            }
        }
    }</code></pre>
<p>最后再执行 <code>BeanPostProcessor</code> 的 <code>postProcessAfterInitialization</code> 回调</p>
<div class="widget-codetool" style="display:none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="    @Override
    public Object applyBeanPostProcessorsAfterInitialization(Object existingBean, String beanName)
            throws BeansException {

        Object result = existingBean;
        for (BeanPostProcessor beanProcessor : getBeanPostProcessors()) {
            result = beanProcessor.postProcessAfterInitialization(result, beanName);
            if (result == null) {
                return result;
            }
        }
        return result;
    }" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="java hljs"><code class="java">    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">applyBeanPostProcessorsAfterInitialization</span><span class="hljs-params">(Object existingBean, String beanName)</span>
            <span class="hljs-keyword">throws</span> BeansException </span>{

        Object result = existingBean;
        <span class="hljs-keyword">for</span> (BeanPostProcessor beanProcessor : getBeanPostProcessors()) {
            result = beanProcessor.postProcessAfterInitialization(result, beanName);
            <span class="hljs-keyword">if</span> (result == <span class="hljs-keyword">null</span>) {
                <span class="hljs-keyword">return</span> result;
            }
        }
        <span class="hljs-keyword">return</span> result;
    }</code></pre>
<p>好的，到这里我们介绍了Spring 容器初始化过程Bean加载过程当中的各种回调实现，下面介绍Spring 容器销毁阶段。</p>
<h3 id="item-4-4">容器关闭</h3>
<p>与Bean初始化类似，当容器关闭时，可以看到对Bean销毁方法的调用。销毁过程是这样的。顺着<code>close()-&gt; doClose() -&gt; destroyBeans() -&gt; destroySingletons() -&gt; destroySingleton() -&gt; destroyBean() -&gt; bean.destroy()  </code>，会看到最终调用Bean的销毁方法。</p>
<div class="widget-codetool" style="display:none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="protected void destroyBean(String beanName, DisposableBean bean) {
        // 忽略

        // Actually destroy the bean now...
        if (bean != null) {
            try {
                bean.destroy();
            }
            catch (Throwable ex) {
                logger.error(&quot;Destroy method on bean with name &#39;&quot; + beanName + &quot;&#39; threw an exception&quot;, ex);
            }
        }

        // 忽略
    }" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="java hljs"><code class="java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroyBean</span><span class="hljs-params">(String beanName, DisposableBean bean)</span> </span>{
        <span class="hljs-comment">// 忽略</span>

        <span class="hljs-comment">// Actually destroy the bean now...</span>
        <span class="hljs-keyword">if</span> (bean != <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">try</span> {
                bean.destroy();
            }
            <span class="hljs-keyword">catch</span> (Throwable ex) {
                logger.error(<span class="hljs-string">"Destroy method on bean with name '"</span> + beanName + <span class="hljs-string">"' threw an exception"</span>, ex);
            }
        }

        <span class="hljs-comment">// 忽略</span>
    }</code></pre>
<p>这里注意哦，这个Bean的类型实际上是<code>DisposableBeanAdapter</code>,<code>DisposableBeanAdapter</code>是管理Spring Bean的销毁的，实际上这里运用了适配器模式。再来看看<code>destroy()</code>的具体方法。</p>
<div class="widget-codetool" style="display:none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="@Override
    public void destroy() {
        if (!CollectionUtils.isEmpty(this.beanPostProcessors)) {
            for (DestructionAwareBeanPostProcessor processor : this.beanPostProcessors) {
                processor.postProcessBeforeDestruction(this.bean, this.beanName);
            }
        }

        if (this.invokeDisposableBean) {
            if (logger.isDebugEnabled()) {
                logger.debug(&quot;Invoking destroy() on bean with name &#39;&quot; + this.beanName + &quot;&#39;&quot;);
            }
            try {
                if (System.getSecurityManager() != null) {
                    AccessController.doPrivileged(new PrivilegedExceptionAction&lt;Object&gt;() {
                        @Override
                        public Object run() throws Exception {
                            ((DisposableBean) bean).destroy();
                            return null;
                        }
                    }, acc);
                }
                else {
                    // 调用 DisposableBean 的 destroy()方法
                    ((DisposableBean) bean).destroy();
                }
            }
            catch (Throwable ex) {
                String msg = &quot;Invocation of destroy method failed on bean with name &#39;&quot; + this.beanName + &quot;&#39;&quot;;
                if (logger.isDebugEnabled()) {
                    logger.warn(msg, ex);
                }
                else {
                    logger.warn(msg + &quot;: &quot; + ex);
                }
            }
        }

        if (this.destroyMethod != null) {
            // 调用 设置的destroyMethod
            invokeCustomDestroyMethod(this.destroyMethod);
        }
        else if (this.destroyMethodName != null) {
            Method methodToCall = determineDestroyMethod();
            if (methodToCall != null) {
                invokeCustomDestroyMethod(methodToCall);
            }
        }
    }" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="java hljs"><code class="java"><span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (!CollectionUtils.isEmpty(<span class="hljs-keyword">this</span>.beanPostProcessors)) {
            <span class="hljs-keyword">for</span> (DestructionAwareBeanPostProcessor processor : <span class="hljs-keyword">this</span>.beanPostProcessors) {
                processor.postProcessBeforeDestruction(<span class="hljs-keyword">this</span>.bean, <span class="hljs-keyword">this</span>.beanName);
            }
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.invokeDisposableBean) {
            <span class="hljs-keyword">if</span> (logger.isDebugEnabled()) {
                logger.debug(<span class="hljs-string">"Invoking destroy() on bean with name '"</span> + <span class="hljs-keyword">this</span>.beanName + <span class="hljs-string">"'"</span>);
            }
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">if</span> (System.getSecurityManager() != <span class="hljs-keyword">null</span>) {
                    AccessController.doPrivileged(<span class="hljs-keyword">new</span> PrivilegedExceptionAction&lt;Object&gt;() {
                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">run</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
                            ((DisposableBean) bean).destroy();
                            <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
                        }
                    }, acc);
                }
                <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// 调用 DisposableBean 的 destroy()方法</span>
                    ((DisposableBean) bean).destroy();
                }
            }
            <span class="hljs-keyword">catch</span> (Throwable ex) {
                String msg = <span class="hljs-string">"Invocation of destroy method failed on bean with name '"</span> + <span class="hljs-keyword">this</span>.beanName + <span class="hljs-string">"'"</span>;
                <span class="hljs-keyword">if</span> (logger.isDebugEnabled()) {
                    logger.warn(msg, ex);
                }
                <span class="hljs-keyword">else</span> {
                    logger.warn(msg + <span class="hljs-string">": "</span> + ex);
                }
            }
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.destroyMethod != <span class="hljs-keyword">null</span>) {
            <span class="hljs-comment">// 调用 设置的destroyMethod</span>
            invokeCustomDestroyMethod(<span class="hljs-keyword">this</span>.destroyMethod);
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.destroyMethodName != <span class="hljs-keyword">null</span>) {
            Method methodToCall = determineDestroyMethod();
            <span class="hljs-keyword">if</span> (methodToCall != <span class="hljs-keyword">null</span>) {
                invokeCustomDestroyMethod(methodToCall);
            }
        }
    }</code></pre>
<h3 id="item-4-5">BeanPostProcessor 是什么时候注册到容器的？</h3>
<p>前面只介绍了BeanPostProcessor类在 Spring Bean 生命周期中的回调实现，却没有说明 BeanPostProcessor 是什么时候注册到容器的。下面我们来介绍下。</p>
<p>在Spring IoC 容器初始化的时候，容器会做一些初始化操作，其中就包括了BeanPostProcessor的register过程。详细的过程可以看我这篇<a href="https://juejin.im/post/5da59f585188254e915c9522" rel="nofollow">IoC 容器初始化</a>。</p>
<p>这里直接放源码吧。</p>
<p>源码位置<code>AbstractApplicationContext#refresh() </code></p>
<div class="widget-codetool" style="display:none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="@Override
    public void refresh() throws BeansException, IllegalStateException {
        synchronized (this.startupShutdownMonitor) {
            // Prepare this context for refreshing.
            prepareRefresh();

            // Tell the subclass to refresh the internal bean factory.
            ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();

            // Prepare the bean factory for use in this context.
            prepareBeanFactory(beanFactory);

            try {
                // Allows post-processing of the bean factory in context subclasses.
                postProcessBeanFactory(beanFactory);

                // Invoke factory processors registered as beans in the context.
                invokeBeanFactoryPostProcessors(beanFactory);

                // Register bean processors that intercept bean creation.
                // 在这里
                registerBeanPostProcessors(beanFactory);
            // ....忽略
        }
    }" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="java hljs"><code class="java"><span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">refresh</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> BeansException, IllegalStateException </span>{
        <span class="hljs-keyword">synchronized</span> (<span class="hljs-keyword">this</span>.startupShutdownMonitor) {
            <span class="hljs-comment">// Prepare this context for refreshing.</span>
            prepareRefresh();

            <span class="hljs-comment">// Tell the subclass to refresh the internal bean factory.</span>
            ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();

            <span class="hljs-comment">// Prepare the bean factory for use in this context.</span>
            prepareBeanFactory(beanFactory);

            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// Allows post-processing of the bean factory in context subclasses.</span>
                postProcessBeanFactory(beanFactory);

                <span class="hljs-comment">// Invoke factory processors registered as beans in the context.</span>
                invokeBeanFactoryPostProcessors(beanFactory);

                <span class="hljs-comment">// Register bean processors that intercept bean creation.</span>
                <span class="hljs-comment">// 在这里</span>
                registerBeanPostProcessors(beanFactory);
            <span class="hljs-comment">// ....忽略</span>
        }
    }</code></pre>
<div class="widget-codetool" style="display:none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="    protected void registerBeanPostProcessors(ConfigurableListableBeanFactory beanFactory) {
        PostProcessorRegistrationDelegate.registerBeanPostProcessors(beanFactory, this);
    }" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="java hljs"><code class="java">    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">registerBeanPostProcessors</span><span class="hljs-params">(ConfigurableListableBeanFactory beanFactory)</span> </span>{
        PostProcessorRegistrationDelegate.registerBeanPostProcessors(beanFactory, <span class="hljs-keyword">this</span>);
    }</code></pre>
<p>源码位置<code>PostProcessorRegistrationDelegate#registerBeanPostProcessors() </code></p>
<div class="widget-codetool" style="display:none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="public static void registerBeanPostProcessors(
            ConfigurableListableBeanFactory beanFactory, AbstractApplicationContext applicationContext) {

        String[] postProcessorNames = beanFactory.getBeanNamesForType(BeanPostProcessor.class, true, false);
// step1
        // Register BeanPostProcessorChecker that logs an info message when
        // a bean is created during BeanPostProcessor instantiation, i.e. when
        // a bean is not eligible for getting processed by all BeanPostProcessors.
        int beanProcessorTargetCount = beanFactory.getBeanPostProcessorCount() + 1 + postProcessorNames.length;
        beanFactory.addBeanPostProcessor(new BeanPostProcessorChecker(beanFactory, beanProcessorTargetCount));

// step2
        // Separate between BeanPostProcessors that implement PriorityOrdered,
        // Ordered, and the rest.
        List&lt;BeanPostProcessor&gt; priorityOrderedPostProcessors = new ArrayList&lt;BeanPostProcessor&gt;();
        List&lt;BeanPostProcessor&gt; internalPostProcessors = new ArrayList&lt;BeanPostProcessor&gt;();
        List&lt;String&gt; orderedPostProcessorNames = new ArrayList&lt;String&gt;();
        List&lt;String&gt; nonOrderedPostProcessorNames = new ArrayList&lt;String&gt;();
        for (String ppName : postProcessorNames) {
            if (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) {
                BeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);
                priorityOrderedPostProcessors.add(pp);
                if (pp instanceof MergedBeanDefinitionPostProcessor) {
                    internalPostProcessors.add(pp);
                }
            }
            else if (beanFactory.isTypeMatch(ppName, Ordered.class)) {
                orderedPostProcessorNames.add(ppName);
            }
            else {
                nonOrderedPostProcessorNames.add(ppName);
            }
        }
// step3
        // First, register the BeanPostProcessors that implement PriorityOrdered.
        sortPostProcessors(priorityOrderedPostProcessors, beanFactory);
        registerBeanPostProcessors(beanFactory, priorityOrderedPostProcessors);

        // Next, register the BeanPostProcessors that implement Ordered.
        List&lt;BeanPostProcessor&gt; orderedPostProcessors = new ArrayList&lt;BeanPostProcessor&gt;();
        for (String ppName : orderedPostProcessorNames) {
            BeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);
            orderedPostProcessors.add(pp);
            if (pp instanceof MergedBeanDefinitionPostProcessor) {
                internalPostProcessors.add(pp);
            }
        }
        sortPostProcessors(orderedPostProcessors, beanFactory);
        registerBeanPostProcessors(beanFactory, orderedPostProcessors);

        // Now, register all regular BeanPostProcessors.
        List&lt;BeanPostProcessor&gt; nonOrderedPostProcessors = new ArrayList&lt;BeanPostProcessor&gt;();
        for (String ppName : nonOrderedPostProcessorNames) {
            BeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);
            nonOrderedPostProcessors.add(pp);
            if (pp instanceof MergedBeanDefinitionPostProcessor) {
                internalPostProcessors.add(pp);
            }
        }
        registerBeanPostProcessors(beanFactory, nonOrderedPostProcessors);

        // Finally, re-register all internal BeanPostProcessors.
        sortPostProcessors(internalPostProcessors, beanFactory);
        registerBeanPostProcessors(beanFactory, internalPostProcessors);

        // Re-register post-processor for detecting inner beans as ApplicationListeners,
        // moving it to the end of the processor chain (for picking up proxies etc).
        beanFactory.addBeanPostProcessor(new ApplicationListenerDetector(applicationContext));
    }" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="java hljs"><code class="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">registerBeanPostProcessors</span><span class="hljs-params">(
            ConfigurableListableBeanFactory beanFactory, AbstractApplicationContext applicationContext)</span> </span>{

        String[] postProcessorNames = beanFactory.getBeanNamesForType(BeanPostProcessor.class, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">false</span>);
<span class="hljs-comment">// step1</span>
        <span class="hljs-comment">// Register BeanPostProcessorChecker that logs an info message when</span>
        <span class="hljs-comment">// a bean is created during BeanPostProcessor instantiation, i.e. when</span>
        <span class="hljs-comment">// a bean is not eligible for getting processed by all BeanPostProcessors.</span>
        <span class="hljs-keyword">int</span> beanProcessorTargetCount = beanFactory.getBeanPostProcessorCount() + <span class="hljs-number">1</span> + postProcessorNames.length;
        beanFactory.addBeanPostProcessor(<span class="hljs-keyword">new</span> BeanPostProcessorChecker(beanFactory, beanProcessorTargetCount));

<span class="hljs-comment">// step2</span>
        <span class="hljs-comment">// Separate between BeanPostProcessors that implement PriorityOrdered,</span>
        <span class="hljs-comment">// Ordered, and the rest.</span>
        List&lt;BeanPostProcessor&gt; priorityOrderedPostProcessors = <span class="hljs-keyword">new</span> ArrayList&lt;BeanPostProcessor&gt;();
        List&lt;BeanPostProcessor&gt; internalPostProcessors = <span class="hljs-keyword">new</span> ArrayList&lt;BeanPostProcessor&gt;();
        List&lt;String&gt; orderedPostProcessorNames = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();
        List&lt;String&gt; nonOrderedPostProcessorNames = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();
        <span class="hljs-keyword">for</span> (String ppName : postProcessorNames) {
            <span class="hljs-keyword">if</span> (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) {
                BeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);
                priorityOrderedPostProcessors.add(pp);
                <span class="hljs-keyword">if</span> (pp <span class="hljs-keyword">instanceof</span> MergedBeanDefinitionPostProcessor) {
                    internalPostProcessors.add(pp);
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (beanFactory.isTypeMatch(ppName, Ordered.class)) {
                orderedPostProcessorNames.add(ppName);
            }
            <span class="hljs-keyword">else</span> {
                nonOrderedPostProcessorNames.add(ppName);
            }
        }
<span class="hljs-comment">// step3</span>
        <span class="hljs-comment">// First, register the BeanPostProcessors that implement PriorityOrdered.</span>
        sortPostProcessors(priorityOrderedPostProcessors, beanFactory);
        registerBeanPostProcessors(beanFactory, priorityOrderedPostProcessors);

        <span class="hljs-comment">// Next, register the BeanPostProcessors that implement Ordered.</span>
        List&lt;BeanPostProcessor&gt; orderedPostProcessors = <span class="hljs-keyword">new</span> ArrayList&lt;BeanPostProcessor&gt;();
        <span class="hljs-keyword">for</span> (String ppName : orderedPostProcessorNames) {
            BeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);
            orderedPostProcessors.add(pp);
            <span class="hljs-keyword">if</span> (pp <span class="hljs-keyword">instanceof</span> MergedBeanDefinitionPostProcessor) {
                internalPostProcessors.add(pp);
            }
        }
        sortPostProcessors(orderedPostProcessors, beanFactory);
        registerBeanPostProcessors(beanFactory, orderedPostProcessors);

        <span class="hljs-comment">// Now, register all regular BeanPostProcessors.</span>
        List&lt;BeanPostProcessor&gt; nonOrderedPostProcessors = <span class="hljs-keyword">new</span> ArrayList&lt;BeanPostProcessor&gt;();
        <span class="hljs-keyword">for</span> (String ppName : nonOrderedPostProcessorNames) {
            BeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);
            nonOrderedPostProcessors.add(pp);
            <span class="hljs-keyword">if</span> (pp <span class="hljs-keyword">instanceof</span> MergedBeanDefinitionPostProcessor) {
                internalPostProcessors.add(pp);
            }
        }
        registerBeanPostProcessors(beanFactory, nonOrderedPostProcessors);

        <span class="hljs-comment">// Finally, re-register all internal BeanPostProcessors.</span>
        sortPostProcessors(internalPostProcessors, beanFactory);
        registerBeanPostProcessors(beanFactory, internalPostProcessors);

        <span class="hljs-comment">// Re-register post-processor for detecting inner beans as ApplicationListeners,</span>
        <span class="hljs-comment">// moving it to the end of the processor chain (for picking up proxies etc).</span>
        beanFactory.addBeanPostProcessor(<span class="hljs-keyword">new</span> ApplicationListenerDetector(applicationContext));
    }</code></pre>
<p>上述过程可以分成四步：</p>
<ol>
<li>通过<code>beanFactory.getBeanNamesForType(BeanPostProcessor.class, true, false);</code>方法获取beanFactory里继承了BeanPostProcessor接口的name的集合；</li>
<li>把后置器beans分为<code>PriorityOrdered、Ordered、nonOrdered</code>三大类，前两类是增加了排序条件的后置器；（Spring可以通过<code>PriorityOrdered</code>和<code>Ordered</code>接口控制处理器的优先级），这里实际上还有一类是<code>MergedBeanDefinitionPostProcessor</code>，不是核心点，不展开讲。</li>
<li>
<p>第三步可以分为以下小步</p>
<ol>
<li>
<code>priorityOrderedPostProcessors</code>，先排序后注册</li>
<li>
<code>orderedPostProcessors</code>，先排序后注册</li>
<li>注册<code>nonOrderedPostProcessors</code>，就是一般的处理器</li>
<li>
<code>internalPostProcessors</code>，先排序后注册</li>
<li>注册一个<code>ApplicationListenerDetector</code>的 processor</li>
</ol>
</li>
</ol>
<h3 id="item-4-6">DisposableBeanAdapter 什么时候注册到容器的？</h3>
<p><code>DisposableBeanAdapter</code>和上文的<code>BeanPostProcessor</code>的抽象层级不同，这个是和Bean绑定的，所以它的注册时机是在Spring Bean的依赖注入阶段，详细源码可以看我的这篇文章<a href="https://juejin.im/post/5da7a0555188257a7306822d" rel="nofollow">Spring IoC 依赖注入 源码解析</a>。</p>
<p>源码位置：<code>AbstractAutowireCapableBeanFactory#doCreateBean()</code></p>
<div class="widget-codetool" style="display:none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="protected Object doCreateBean(final String beanName, final RootBeanDefinition mbd, final Object[] args)
            throws BeanCreationException {
        // 省略前面的超多步骤，想了解的可以去看源码或者我的那篇文章

        // Register bean as disposable.
        // 这里就是DisposableBeanAdapter的注册步骤了
        try {
            registerDisposableBeanIfNecessary(beanName, bean, mbd);
        }
        catch (BeanDefinitionValidationException ex) {
            throw new BeanCreationException(
                    mbd.getResourceDescription(), beanName, &quot;Invalid destruction signature&quot;, ex);
        }

        return exposedObject;
    }" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="java hljs"><code class="java"><span class="hljs-function"><span class="hljs-keyword">protected</span> Object <span class="hljs-title">doCreateBean</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String beanName, <span class="hljs-keyword">final</span> RootBeanDefinition mbd, <span class="hljs-keyword">final</span> Object[] args)</span>
            <span class="hljs-keyword">throws</span> BeanCreationException </span>{
        <span class="hljs-comment">// 省略前面的超多步骤，想了解的可以去看源码或者我的那篇文章</span>

        <span class="hljs-comment">// Register bean as disposable.</span>
        <span class="hljs-comment">// 这里就是DisposableBeanAdapter的注册步骤了</span>
        <span class="hljs-keyword">try</span> {
            registerDisposableBeanIfNecessary(beanName, bean, mbd);
        }
        <span class="hljs-keyword">catch</span> (BeanDefinitionValidationException ex) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BeanCreationException(
                    mbd.getResourceDescription(), beanName, <span class="hljs-string">"Invalid destruction signature"</span>, ex);
        }

        <span class="hljs-keyword">return</span> exposedObject;
    }</code></pre>
<p>源码位置：<code>AbstractBeanFactory#registerDisposableBeanIfNecessary()</code></p>
<div class="widget-codetool" style="display: none;">
        <div class="widget-codetool--inner">
        <button type="button" class="btn btn-dark far fa-copy rounded-0 sflex-center copyCode" data-toggle="tooltip" data-placement="top" data-clipboard-text="protected void registerDisposableBeanIfNecessary(String beanName, Object bean, RootBeanDefinition mbd) {
        AccessControlContext acc = (System.getSecurityManager() != null ? getAccessControlContext() : null);
        if (!mbd.isPrototype() &amp;&amp; requiresDestruction(bean, mbd)) {
            if (mbd.isSingleton()) {
                // 注册一个DisposableBean实现，该实现将执行给定bean的所有销毁工作。
                // 包括：DestructionAwareBeanPostProcessors，DisposableBean接口，自定义destroy方法。
                registerDisposableBean(beanName,
                        new DisposableBeanAdapter(bean, beanName, mbd, getBeanPostProcessors(), acc));
            }
            else {
                // A bean with a custom scope...
                Scope scope = this.scopes.get(mbd.getScope());
                if (scope == null) {
                    throw new IllegalStateException(&quot;No Scope registered for scope name &#39;&quot; + mbd.getScope() + &quot;&#39;&quot;);
                }
                scope.registerDestructionCallback(beanName,
                        new DisposableBeanAdapter(bean, beanName, mbd, getBeanPostProcessors(), acc));
            }
        }
    }" title="" data-original-title="复制"></button>
        </div>
        </div><pre class="java hljs"><code class="java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">registerDisposableBeanIfNecessary</span><span class="hljs-params">(String beanName, Object bean, RootBeanDefinition mbd)</span> </span>{
        AccessControlContext acc = (System.getSecurityManager() != <span class="hljs-keyword">null</span> ? getAccessControlContext() : <span class="hljs-keyword">null</span>);
        <span class="hljs-keyword">if</span> (!mbd.isPrototype() &amp;&amp; requiresDestruction(bean, mbd)) {
            <span class="hljs-keyword">if</span> (mbd.isSingleton()) {
                <span class="hljs-comment">// 注册一个DisposableBean实现，该实现将执行给定bean的所有销毁工作。</span>
                <span class="hljs-comment">// 包括：DestructionAwareBeanPostProcessors，DisposableBean接口，自定义destroy方法。</span>
                registerDisposableBean(beanName,
                        <span class="hljs-keyword">new</span> DisposableBeanAdapter(bean, beanName, mbd, getBeanPostProcessors(), acc));
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// A bean with a custom scope...</span>
                Scope scope = <span class="hljs-keyword">this</span>.scopes.get(mbd.getScope());
                <span class="hljs-keyword">if</span> (scope == <span class="hljs-keyword">null</span>) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalStateException(<span class="hljs-string">"No Scope registered for scope name '"</span> + mbd.getScope() + <span class="hljs-string">"'"</span>);
                }
                scope.registerDestructionCallback(beanName,
                        <span class="hljs-keyword">new</span> DisposableBeanAdapter(bean, beanName, mbd, getBeanPostProcessors(), acc));
            }
        }
    }</code></pre>
<h2 id="item-5">结语</h2>
<p>至此，Spring Bean的整个生命周期算是讲解完了，从容器初始化到容器销毁，以及回调事件的注册时机等方面都说明了一下，希望能对你有所帮助。</p>
<blockquote>本文由博客一文多发平台 <a href="https://openwrite.cn/?from=article_bottom" rel="nofollow">OpenWrite</a> 发布！</blockquote>
</article><div class="d-flex flex-wrap align-items-center "><div class="m-n1"><a href="https://segmentfault.com/t/spring" class="m-1 badge-tag">spring</a><a href="https://segmentfault.com/t/java" class="m-1 badge-tag">java</a></div></div><div class="my-4"><div id="OA_holder_3" class="ad-container" style="display:block"><div class="d-none d-lg-flex justify-content-center">
<script async="" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/f(7).txt"></script>
<!-- 中部横幅广告位 -->
<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-6330872677300335" data-ad-slot="5598290435" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent;" tabindex="0" title="Advertisement" aria-label="Advertisement"><ins id="aswift_1_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent;"><iframe id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;border:0;width:728px;height:90px;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="728" height="90" frameborder="0" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/ads.html" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!1" data-google-query-id="CNeejv3jre8CFRJYYAoddvoOJA" data-load-complete="true"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script><div id="beacon_526f6508b0" style="position: absolute; left: 0px; top: 0px; visibility: hidden;"><img src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/lg(3).php" width="0" height="0" alt="" style="width: 0px; height: 0px;"></div></div>
</div></div><div class="text-secondary font-size-14 mt-3 mb-5 d-flex justify-content-between row"><div class="col"><span>阅读 <!-- -->5.3k</span><span class="split-dot"></span><time datetime="2019-10-20T23:28:07.000Z" itemprop="datePublished">更新于 <!-- -->2019-10-21 </time></div><div class="operation col-6 text-right col-xs-3 col"><div></div></div></div><div class="functional-area-bottom text-center"><div role="group" class="btn-group like-group align-items-center btn-group"><button type="button" class="btn mr-2 rounded btn btn-outline-primary"><i class="far fa-thumbs-up"></i><span class="ml-1">赞</span><span class="mainLikeNum ml-1">4</span></button><button type="button" class="btn mr-2 rounded btn btn-outline-secondary"><i class="far fa-bookmark"></i><span class="ml-1">收藏</span><span class="ml-1">2</span></button><div class="bottom-share-wrap dropdown"><a href="https://segmentfault.com/a/1190000020747302?utm_source=sf-related#" class="nav-tab-item  btn d-flex justify-content-center align-items-center dropdown-toggle" aria-label="分享"><button type="button" class="btn rounded btn btn-outline-secondary"><i class="far fa-share-alt"></i><span class="ml-1">分享</span></button></a></div></div></div><canvas hidden="" class="qrcode"></canvas><div class="font-size-14 text-secondary text-center mt-3 mb-5"><span>本作品系原创，</span><a target="_blank" rel="noreferrer" class="text-secondary" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">采用《署名-非商业性使用-禁止演绎 4.0 国际》许可协议</a></div><hr class="mb-0"><div class="d-flex flex-sm-row align-items-center pt-4 row"><div class="d-flex align-items-center flex-grow-1 author-left col-sm-9 col-12"><img class="mr-3 rounded" width="64" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/3833030929-5ffd15fc110ab" aria-hidden="true"><div class="w-100"><a href="https://segmentfault.com/blog/ricnote" class="text-body"><h5 class="mb-0">Ric.Studio 进击的程序员笔记</h5></a><div class="text-truncate text-secondary mt-2">学习记录分享。</div></div></div><div class="author-right flex-shrink-0 col-sm-3 col-12 text-sm-right text-left mt-sm-0 mt-3" id="followUser"><button type="button" class="btn btn-primary">关注专栏</button></div></div></div></div><div class="d-block d-xl-none mt-sm-4"><div class="mb-4 border-0 card"><div class="card-body"><div class="d-flex align-items-center mb-3"><picture class="rounded-circle mr-3"><a href="https://segmentfault.com/u/richard_yi"><img src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/654012719-5a4f841b1daab_big64" alt="avatar" width="64" height="64" class="rounded-circle"></a></picture><div><h5 class="mb-0"><a href="https://segmentfault.com/u/richard_yi" class="text-body">Richard_Yi</a></h5></div></div><div class="text-secondary text-truncate-2 userExcerpt mb-3"><p>个人主页：<a href="https://ricstudio.top/">https://ricstudio.top</a></p></div><div class="d-flex align-items-center mb-3"><div class="mr-4"><strong>2.1k</strong><span class="text-secondary"> 声望</span></div><div><strong>570</strong><span class="text-secondary"> 粉丝</span></div></div><button type="button" class="btn btn-primary btn-block">关注作者</button></div></div></div><div id="comment-area"><div class="d-flex justify-content-between mb-2 px-4 px-md-0"><div id="comment-total" class="h5 mb-0">2<!-- --> 条评论</div><div><a href="https://segmentfault.com/a/1190000020747302?utm_source=sf-related#" class="sort text-dark">得票</a><span class="split-dot text-secondary"></span><a href="https://segmentfault.com/a/1190000020747302?utm_source=sf-related#" class="sort text-secondary">时间</a></div></div><div class="comment-wrap border-0  card"><div class="card-body"><div class="mb-4 media"><img src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/3179314346-5f61e47221e07" class="rounded-circle mr-3" width="38" aria-hidden="true"><div class="media-body"><div class="form-group"><textarea rows="1" placeholder="撰写评论 …" aria-label="评论" class="comment-text form-control" data-tribute="true" style="overflow: hidden; overflow-wrap: break-word; resize: none; height: 38px;"></textarea><div class="invalid-feedback"></div></div><div class="d-flex justify-content-end align-items-center"><a href="https://segmentfault.com/a/1190000020747302?utm_source=sf-related#" class="mr-3" aria-label="提示"><i class="far fa-info-circle text-secondary"></i></a><button disabled="" type="button" class="float-right btn btn-primary">提交评论</button></div></div></div><div class="comment-body-wrap false"><div class="mb-r d-flex align-items-start mb-4 media"><img class="d-block rounded-circle mr-3" width="38" height="38" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/3179314346-5f61e47221e07" alt=""><div class="w-0  media-body"><div class="commentUnit "><div class="mb-1"><a class="d-uname" href="https://segmentfault.com/u/cihuizu" rel="noreferrer" target="_blank"><strong>词汇族</strong></a>：<div class="parsedText fmt"><p>好文章 好图~</p></div></div><div class="handle-bar font-size-14 d-flex justify-content-between"><div><a class="text-secondary" href="https://segmentfault.com/a/1190000020747302?utm_source=sf-related#"><span class="mainLike-comment "><i class="fa-w-16 far fa-thumbs-up" style="width: 1em;"></i></span></a><span class="split-dot"></span><a class="text-secondary btn-comment" href="https://segmentfault.com/a/1190000020747302?utm_source=sf-related#">回复</a><span class="split-dot"></span><span class="text-secondary">2020-05-18 </span></div><div class="control-area d-none"></div></div></div><div class="replies hidden"><div class="bg-light border-0 mt-2 card"><div class="p-3 card-body"><div class="reply-list list-group"></div></div></div></div></div></div><div class="mb-r d-flex align-items-start false media"><img class="d-block rounded-circle mr-3" width="38" height="38" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/2195366961-598d52bcd9c91_big64" alt=""><div class="w-0  media-body"><div class="commentUnit "><div class="mb-1"><a class="d-uname" href="https://segmentfault.com/u/yaoyichen" rel="noreferrer" target="_blank"><strong>姚屹晨</strong></a>：<div class="parsedText fmt"><p>好例子</p></div></div><div class="handle-bar font-size-14 d-flex justify-content-between"><div><a class="text-secondary" href="https://segmentfault.com/a/1190000020747302?utm_source=sf-related#"><span class="mainLike-comment "><i class="fa-w-16 far fa-thumbs-up" style="width: 1em;"></i></span></a><span class="split-dot"></span><a class="text-secondary btn-comment" href="https://segmentfault.com/a/1190000020747302?utm_source=sf-related#">回复</a><span class="split-dot"></span><span class="text-secondary">2020-08-18 </span></div><div class="control-area d-none"></div></div></div><div class="replies hidden"><div class="bg-light border-0 mt-2 card"><div class="p-3 card-body"><div class="reply-list list-group"></div></div></div></div></div></div></div></div></div></div><div class="recommend-list-wrap mt-4 list-group"><h5 class="h5 mb-2 px-4 px-md-0" style="font-weight: 600;">推荐阅读</h5><div class="card border-0"><div class="list-group list-group-flush"><a class="list-group-item list-group-item-action py-3" href="https://segmentfault.com/a/1190000015830477?utm_source=sf-related" target="_blank"><h5 class="h5 mb-2 text-break" style="color: rgb(33, 37, 41);">通过BeanPostProcessor理解Spring中Bean的生命周期及AOP原理</h5><p class="mb-2 text-truncate text-secondary">内容有错误 内容有错误 内容有错误 目录 目录 Spring中Bean的生命周期 注册BeanPostProcessor BeanFactory.getBean()（注册Bean） createBean() resolveBeforeInstantiation InstantiationAwareBeanPostProcessor...</p><p class="d-flex align-items-center font-size-14 mb-0"><span class="text-primary">arnold</span><span class="split-dot"></span><span>阅读 17.1k</span><span class="split-dot"></span><span>22 赞</span><span class="split-dot"></span><span>1 评论</span></p></a><a class="list-group-item list-group-item-action py-3" href="https://segmentfault.com/a/1190000023712428?utm_source=sf-related" target="_blank"><h5 class="h5 mb-2 text-break" style="color: rgb(33, 37, 41);">Spring-Bean的生命周期</h5><p class="mb-2 text-truncate text-secondary">最初接触java的接口服务是servlet，最基础要掌握的就是servlet的生命周期。现在都是基于springboot开发后台接口，spring框架的复杂度远远高于原始的servlet，弄清楚spring中bean的生命周期，有利于我们对其框架的...</p><p class="d-flex align-items-center font-size-14 mb-0"><span class="text-primary">KerryWu</span><span class="split-dot"></span><span>阅读 445</span><span class="split-dot"></span><span>3 赞</span></p></a><a class="list-group-item list-group-item-action py-3" href="https://segmentfault.com/a/1190000013875943?utm_source=sf-related" target="_blank"><h5 class="h5 mb-2 text-break" style="color: rgb(33, 37, 41);">Spring Bean 生命周期</h5><p class="mb-2 text-truncate text-secondary">前言 Spring Bean 的生命周期在整个 Spring 中占有很重要的位置，掌握这些可以加深对 Spring 的理解。 首先看下生命周期图： 再谈生命周期之前有一点需要先明确： Spring 只帮我们管理单例模式 Bean 的完整生命周...</p><p class="d-flex align-items-center font-size-14 mb-0"><span class="text-primary">crossoverJie</span><span class="split-dot"></span><span>阅读 2.4k</span><span class="split-dot"></span><span>2 赞</span><span class="split-dot"></span><span>1 评论</span></p></a><a class="list-group-item list-group-item-action py-3" href="https://segmentfault.com/a/1190000015174296?utm_source=sf-related" target="_blank"><h5 class="h5 mb-2 text-break" style="color: rgb(33, 37, 41);">spring提供的关于bean生命周期的接口 </h5><p class="mb-2 text-truncate text-secondary">先看一张图：spring4.x 企业实战 spring版本：4.3.171、bean自身的生命周期接口 1.1、实现 InitializingBean、DisposableBean 接口这2个接口，会要求你实现2个方法 {代码...} afterPropertieseSet 会在属性设置完...</p><p class="d-flex align-items-center font-size-14 mb-0"><span class="text-primary">心无私天地宽</span><span class="split-dot"></span><span>阅读 2.2k</span><span class="split-dot"></span><span>2 赞</span></p></a><a class="list-group-item list-group-item-action py-3" href="https://segmentfault.com/a/1190000022989119?utm_source=sf-related" target="_blank"><h5 class="h5 mb-2 text-break" style="color: rgb(33, 37, 41);">深入理解Spring中Bean的生命周期</h5><p class="mb-2 text-truncate text-secondary">Spring中Bean 的完整生命周期，在学习Spring 框架的时候，理解Spring的Bean的管理的非常重要，下图是Spring的Bean构造的全过程：</p><p class="d-flex align-items-center font-size-14 mb-0"><span class="text-primary">阿福聊编程</span><span class="split-dot"></span><span>阅读 171</span><span class="split-dot"></span><span>1 赞</span></p></a><a class="list-group-item list-group-item-action py-3" href="https://segmentfault.com/a/1190000037447665?utm_source=sf-related" target="_blank"><h5 class="h5 mb-2 text-break" style="color: rgb(33, 37, 41);">spring bean 的实例化</h5><p class="mb-2 text-truncate text-secondary">spring bean 的实例化的过程在容器刷新的 finishBeanFactoryInitialization 方法中（除了懒加载的 bean)。跟进这个方法：</p><p class="d-flex align-items-center font-size-14 mb-0"><span class="text-primary">jiao个朋友</span><span class="split-dot"></span><span>阅读 119</span></p></a><a class="list-group-item list-group-item-action py-3" href="https://segmentfault.com/a/1190000022490935?utm_source=sf-related" target="_blank"><h5 class="h5 mb-2 text-break" style="color: rgb(33, 37, 41);">spring源码解析 -- 构造bean</h5><p class="mb-2 text-truncate text-secondary">前面文章已经分析了spring如何加载xml配置中的bean元数据，现在来分析一下spring构造bean的过程。关于阅读源码的思路，可参考 -- 如何阅读java源码</p><p class="d-flex align-items-center font-size-14 mb-0"><span class="text-primary">binecy</span><span class="split-dot"></span><span>阅读 310</span></p></a><a class="list-group-item list-group-item-action py-3" href="https://segmentfault.com/a/1190000039156603?utm_source=sf-related" target="_blank"><h5 class="h5 mb-2 text-break" style="color: rgb(33, 37, 41);">Spring源码分析（一） 从Spring Bean的生命周期谈起</h5><p class="mb-2 text-truncate text-secondary">Spring Bean的生命周期真的是面试的时候关于Spring的最高频的考点之一了，笔者曾经被这个问题问懵了不止一次，一直记不住那一大串的步骤，但实际上尝试去死记硬背那些步骤的我是错误的，表面上看只是背诵一个流程...</p><p class="d-flex align-items-center font-size-14 mb-0"><span class="text-primary">CareyWYR</span><span class="split-dot"></span><span>阅读 87</span></p></a></div></div></div></div><div class="col-12 col-xl-auto col"><div class="w-xl-300"><div class="w-xl-300 d-none d-xl-block" id="author" style="top: 81.2px;"><div class="mb-4 border-0 card"><div class="card-body"><div class="d-flex align-items-center mb-3"><picture class="rounded-circle mr-3"><a href="https://segmentfault.com/u/richard_yi"><img src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/654012719-5a4f841b1daab_big64" alt="avatar" width="64" height="64" class="rounded-circle"></a></picture><div><h5 class="mb-0"><a href="https://segmentfault.com/u/richard_yi" class="text-body">Richard_Yi</a></h5></div></div><div class="text-secondary text-truncate-2 userExcerpt mb-3"><p>个人主页：<a href="https://ricstudio.top/">https://ricstudio.top</a></p></div><div class="d-flex align-items-center mb-3"><div class="mr-4"><strong>2.1k</strong><span class="text-secondary"> 声望</span></div><div><strong>570</strong><span class="text-secondary"> 粉丝</span></div></div><button type="button" class="btn btn-primary btn-block">关注作者</button></div></div></div><div class="w-xl-300 mb-4" id="first-ad" style="top: 343.2px;"><div class="card border-0 overflow-hidden d-none d-xl-flex justify-content-center align-items-center float-ads"><div id="OA_holder_1" class="ad-container" style="display:block"><div style="line-height: 0"><script async="" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/f(7).txt"></script>
<!-- 文章详情 - 侧栏矩形 -->
<ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-6330872677300335" data-ad-slot="6800875204" data-adsbygoogle-status="done"><ins id="aswift_3_expand" style="display:inline-table;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent;" tabindex="0" title="Advertisement" aria-label="Advertisement"><ins id="aswift_3_anchor" style="display:block;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent;"><iframe id="aswift_3" name="aswift_3" style="left:0;position:absolute;top:0;border:0;width:300px;height:250px;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="300" height="250" frameborder="0" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/ads(1).html" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!3" data-google-query-id="CKyggvbjre8CFTXLTAIdms8H2g" data-load-complete="true"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script><div id="beacon_d31b5c697f" style="position: absolute; left: 0px; top: 0px; visibility: hidden;"><img src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/lg(4).php" width="0" height="0" alt="" style="width: 0px; height: 0px;"></div></div>
</div></div></div><div id="gridAd" class="d-none d-xl-block mb-4"><div class="border-0 card"><div class="bg-white border-0 card-header"><h5 class="mb-0">宣传栏</h5></div><div class="card-body"><div class="mb-3"><div id="OA_holder_7" class="ad-container" style="display:block"><a href="http://sponsor.segmentfault.com/ck.php?oaparams=2__bannerid=400__zoneid=7__cb=0da0aec27c__oadest=https%3A%2F%2Fke.sifou.com%2Fcourse%2F1650000023864436%3Futm_source%3Dsegmentfault%26utm_medium%3Dbanner_Tlink" target="_blank"><strong>自顶向下学 React 源码</strong><br>
<small style="color: #6c757d">从理念到架构到实现到代码，透彻理解 </small></a><div id="beacon_0da0aec27c" style="position: absolute; left: 0px; top: 0px; visibility: hidden;"><img src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/lg(5).php" width="0" height="0" alt="" style="width: 0px; height: 0px;"></div>
</div></div><div class="mb-3"><div id="OA_holder_9" class="ad-container" style="display:block"><a href="http://sponsor.segmentfault.com/ck.php?oaparams=2__bannerid=401__zoneid=9__cb=d6342e94db__oadest=https%3A%2F%2Fke.sifou.com%2Fcourse%2F1650000037474720%3Futm_source%3Dsegmentfault%26utm_medium%3Dbanner_Tlink" target="_blank"><strong>专家带你构建一个高性能秒杀系统</strong><br>
<small style="color: #6c757d">大厂电商 Java 秒杀系统架构实战</small></a><div id="beacon_d6342e94db" style="position: absolute; left: 0px; top: 0px; visibility: hidden;"><img src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/lg(6).php" width="0" height="0" alt="" style="width: 0px; height: 0px;"></div>
</div></div><div><div id="OA_holder_10" class="ad-container" style="display:block"><div id="beacon_edcc081231" style="position: absolute; left: 0px; top: 0px; visibility: hidden;"><img src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/lg(7).php" width="0" height="0" alt="" style="width: 0px; height: 0px;"></div>
</div></div></div></div></div><div id="second-ad" class="d-none d-xl-block" style="top: auto; margin-top: 0px;"><div id="OA_holder_31" class="ad-container" style="display:block"><div class="rounded overflow-hidden"><a href="http://sponsor.segmentfault.com/ck.php?oaparams=2__bannerid=334__zoneid=31__cb=09ed6cd1a7__oadest=https%3A%2F%2Fsegmentfault.com%2Fa%2F1190000020336555" target="_blank"><img src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/bb270f7c8f4604f08f8530813cc9e40c.png" width="300" height="100" alt="程序员求职攻略" title="程序员求职攻略" border="0"></a><div id="beacon_09ed6cd1a7" style="position: absolute; left: 0px; top: 0px; visibility: hidden;"><img src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/lg(8).php" width="0" height="0" alt="" style="width: 0px; height: 0px;"></div></div>
</div></div><div id="cataLog" class="d-none d-xl-block w-xl-300 mt-4" style="top: auto;"><div data-article-nav="true" class="accordion"><div class="border-0 overflow-hidden d-none d-xl-flex card"><div class="card-body"><div><h6 class="nav-header h6 p-0 m-0"><i class="fas fa-play fa-rotate-undefined"></i><span> 目录</span></h6></div><div id="collapseTarget" class="collapse"><nav id="article-nav-list" class="d-flex flex-column font-size-14 ss-container" data-article-nav-list="true"><div class="ss-wrapper"><div class="ss-content"><a class="nav-link text-secondary p-0 my-1 text-truncate" scroll-href="#item-1" href="javascript:;">前言</a><a class="nav-link text-secondary p-0 my-1 text-truncate" scroll-href="#item-2" href="javascript:;">Spring Bean 生命周期</a><a class="nav-link text-secondary py-0 pr-0 my-1 text-truncate" scroll-href="#item-2-1" href="javascript:;">图片描述</a><a class="nav-link text-secondary py-0 pr-0 my-1 text-truncate" scroll-href="#item-2-2" href="javascript:;">文字描述</a><a class="nav-link text-secondary p-0 my-1 text-truncate" scroll-href="#item-3" href="javascript:;">实例演示</a><a class="nav-link text-secondary p-0 my-1 text-truncate" scroll-href="#item-4" href="javascript:;">源码解析</a><a class="nav-link text-secondary py-0 pr-0 my-1 text-truncate" scroll-href="#item-4-3" href="javascript:;">容器初始化</a><a class="nav-link text-secondary py-0 pr-0 my-1 text-truncate" scroll-href="#item-4-4" href="javascript:;">容器关闭</a><a class="nav-link text-secondary py-0 pr-0 my-1 text-truncate" scroll-href="#item-4-5" href="javascript:;">BeanPostProcessor 是什么时候注册到容器的？</a><a class="nav-link text-secondary py-0 pr-0 my-1 text-truncate" scroll-href="#item-4-6" href="javascript:;">DisposableBeanAdapter 什么时候注册到容器的？</a><a class="nav-link text-secondary p-0 my-1 text-truncate" scroll-href="#item-5" href="javascript:;">结语</a></div></div><div class="ss-scroll" style="right: 0px;"></div></nav></div></div></div></div></div></div></div></div><div id="fixedTools" class="position-fixed d-none " style="right:24px;bottom:24px"><button type="button" class="btn btn-light" title="回顶部">▲</button></div></div><footer id="footer" class="bg-white py-5 font-size-14"><div class="container"><div class="row"><dl class="col-4 col-md-2"><dt class="h6">产品</dt><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/questions/hottest?utm_source=sf-footer" target="_blank" rel="noreferrer">热门问答</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/blogs/hottest?utm_source=sf-footer" target="_blank" rel="noreferrer">热门专栏</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/lives?utm_source=sf-footer" target="_blank" rel="noreferrer">热门课程</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/events?utm_source=sf-footer" target="_blank" rel="noreferrer">最新活动</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/groups?utm_source=sf-footer" target="_blank" rel="noreferrer">技术圈</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/groups?tab=jobs&amp;utm_source=sf-footer" target="_blank" rel="noreferrer">酷工作</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/app?utm_source=sf-footer" target="_blank" rel="noreferrer">移动客户端</a></dd></dl><dl class="col-4 col-md-2"><dt class="h6">课程</dt><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/lives/edu?tag=java&amp;sort=hottest&amp;utm_source=sf-footer" target="_blank" rel="noreferrer">Java 开发课程</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/lives/edu?tag=php&amp;sort=hottest&amp;utm_source=sf-footer" target="_blank" rel="noreferrer">PHP 开发课程</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/lives/edu?tag=python&amp;sort=hottest&amp;utm_source=sf-footer" target="_blank" rel="noreferrer">Python 开发课程</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/lives/edu?category=1&amp;sort=hottest&amp;utm_source=sf-footer" target="_blank" rel="noreferrer">前端开发课程</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/lives/study?category=3&amp;sort=hottest&amp;utm_source=sf-footer" target="_blank" rel="noreferrer">移动开发课程</a></dd></dl><dl class="col-4 col-md-2 "><dt class="h6">资源</dt><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/weekly?utm_source=sf-footer" target="_blank" rel="noreferrer">每周精选</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/users?utm_source=sf-footer" target="_blank" rel="noreferrer">用户排行榜</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/badges?utm_source=sf-footer" target="_blank" rel="noreferrer">徽章</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/faq?utm_source=sf-footer" target="_blank" rel="noreferrer">帮助中心</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/repu?utm_source=sf-footer" target="_blank" rel="noreferrer">声望与权限</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/community?utm_source=sf-footer" target="_blank" rel="noreferrer">社区服务中心</a></dd></dl><dl class="col-4 col-md-2"><dt class="h6">合作</dt><dd class="my-1"><a class="text-secondary" href="https://about.segmentfault.com/?utm_source=sf-footer" target="_blank" rel="noreferrer">关于我们</a></dd><dd class="my-1"><a class="text-secondary" href="https://business.segmentfault.com/ads?utm_source=sf-footer" target="_blank" rel="noreferrer">广告投放</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/groups?tab=jobs&amp;utm_source=sf-footer" target="_blank" rel="noreferrer">职位发布</a></dd><dd class="my-1"><a class="text-secondary" href="https://jinshuju.net/f/HK5r9K?utm_source=sf-footer" target="_blank" rel="noreferrer">讲师招募</a></dd><dd class="my-1"><a class="text-secondary" href="https://about.segmentfault.com/contact.html?utm_source=sf-footer" target="_blank" rel="noreferrer">联系我们</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/link?utm_source=sf-footer" target="_blank" rel="noreferrer">合作伙伴</a></dd></dl><dl class="col-4 col-md-2"><dt class="h6">关注</dt><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/blog/segmentfault?utm_source=sf-footer" target="_blank" rel="noreferrer">产品技术日志</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/blog/community_admin?utm_source=sf-footer" target="_blank" rel="noreferrer">社区运营日志</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/blog/segmentfault_news?utm_source=sf-footer" target="_blank" rel="noreferrer">市场运营日志</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/blog/segmentfault_team?utm_source=sf-footer" target="_blank" rel="noreferrer">团队日志</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/blog/interview?utm_source=sf-footer" target="_blank" rel="noreferrer">社区访谈</a></dd></dl><dl class="col-4 col-md-2" id="license"><dt class="h6">条款</dt><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/tos?utm_source=sf-footer" target="_blank" rel="noreferrer">服务条款</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/privacy?utm_source=sf-footer" target="_blank" rel="noreferrer">隐私政策</a></dd><dd class="my-1"><a class="text-secondary" href="https://segmentfault.com/app?utm_source=sf-footer">下载 App</a></dd><dd class="my-1"><div class="weixin-qrcode ml-n1" title="微信公众号"></div></dd></dl></div><hr class="mt-2 mb-4"><div class="row"><div class="col-md-8"><div class="text-secondary"><p class="mb-1">Copyright © 2011-<!-- -->2021<!-- --> SegmentFault. 当前呈现版本 <!-- -->21.03.12</p><p class="mb-1"><a class="text-secondary mr-2" target="_blank" href="http://beian.miit.gov.cn/" rel="nofollow noreferrer">浙ICP备15005796号-2</a><a class="text-secondary mr-2" target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010602002000" rel="nofollow noreferrer">浙公网安备33010602002000号</a><span class="text-secondary">ICP 经营许可 浙B2-20201554</span></p><p class="mb-0">杭州堆栈科技有限公司版权所有</p></div></div><div class="col-md-4 text-right"><div class="shareContent"><a class="share_weixin" data-share="weixin" href="https://segmentfault.com/a/1190000020747302?utm_source=sf-related#javascript" aria-label="微信"><i class="mr-1 fab fa-weixin"></i></a><a class="share_weibo" data-share="weibo" href="http://weibo.com/segmentfault" target="_blank" rel="noreferrer" aria-label="微博"><i class="fab fa-weibo mr-1"></i></a><a class="share_github" data-share="github" href="https://github.com/SegmentFault" target="_blank" rel="noreferrer" aria-label="github"><i class="mr-1 fab fa-github"></i></a><a class="share_twitter" data-share="twitter" href="https://twitter.com/segment_fault" target="_blank" rel="noreferrer" aria-label="twitter"><i class="mr-1 fab fa-twitter"></i></a></div></div></div></div></footer></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {"router":{"location":{"pathname":"\u002Fa\u002F1190000020747302","search":"?utm_source=sf-related","hash":"","query":{"utm_source":"sf-related"},"state":undefined,"key":"spdxt2"},"action":"POP"},"@@dva":0,"action":{"votes":4,"bookmarks":2,"votesState":false,"bookmarkState":false},"article":{"articles":{"rows":[],"size":0,"offset":0,"hasMore":true,"error":false,"loading":false,"isStopLoad":false,"cutLoadNum":1,"isLoadedFirstRecommend":false,"query":""},"currentTab":""},"articleDetail":{"artDetail":{"1190000020747302":{"title":"java - Spring Bean 生命周期 （实例结合源码彻底讲透）_个人文章","keywords":"spring,java","description":"在应用开发中，常常需要执行一些特定的初始化工作，这些工作都是相对比较固定的，比如建立数据库连接，打开网络连接等，同时，在结束服务时，也有一些相对固定的销毁工作需要执行。为了便于这些工作的设计，Spring IoC容器提供了相关的功能，可以让应用定制Bean的初始化和销毁过程。","article":{"id":1190000020747302,"title":"Spring Bean 生命周期 （实例结合源码彻底讲透）","cover":null,"tags_list":"1040000000090103,1040000000089449","user_id":1030000012718748,"blog_id":1200000019688526,"excerpt":"在应用开发中，常常需要执行一些特定的初始化工作，这些工作都是相对比较固定的，比如建立数据库连接，打开网络连接等，同时，在结束服务时，也有一些相对固定的销毁工作需要执行。为了便于这些工作的设计，Spring IoC容器提供了相关的功能，可以让应用定制Bean的初始化和销毁过程。","parsed_text":"","is_bookmarked":false,"is_liked":false,"created":1571614087,"modified":1571651503,"real_views":5255,"real_unique_views":5104,"votes":4,"bookmarks":2,"status":0,"origin_url":"","article_type":1,"license":"1","tags":[{"id":1040000000090103,"url":"\u002Ft\u002Fspring","name":"spring","icon_url":""},{"id":1040000000089449,"url":"\u002Ft\u002Fjava","name":"java","icon_url":"https:\u002F\u002Favatar-static.segmentfault.com\u002F868\u002F271\u002F868271510-54cb382abb7a1_small"}],"user":{"id":1030000012718748,"name":"Richard_Yi","avatar_url":"https:\u002F\u002Favatar-static.segmentfault.com\u002F654\u002F012\u002F654012719-5a4f841b1daab_big64","url":"\u002Fu\u002Frichard_yi","rank":2088,"rankWord":"2.1k","is_followed":false,"excerpt":"\u003Cp\u003E个人主页：\u003Ca href=\"https:\u002F\u002Fricstudio.top\"\u003Ehttps:\u002F\u002Fricstudio.top\u003C\u002Fa\u003E\u003C\u002Fp\u003E","followers":570,"articles":48,"user_auth":null},"status_key":"available"},"blog":{"id":1200000019688526,"name":"Ric.Studio 进击的程序员笔记","url":"\u002Fblog\u002Fricnote","is_followed":false,"excerpt":"学习记录分享。","followers":515,"articles":48,"license":"cc"},"actions":[],"member_actions":[],"article_types":{"1":"原创","2":"转载","3":"翻译"},"extra":{"reason":null,"operator":null,"operator_time":null},"tag":{"name":"java","url":"\u002Ft\u002Fjava","icon_url":"https:\u002F\u002Favatar-static.segmentfault.com\u002F868\u002F271\u002F868271510-54cb382abb7a1_small"},"isServerLoaded":true}},"alertMsg":{"showAlert":false,"msg":""},"articleRelated":[]},"editor":{"markdownContent":"","syncMarkdown":false,"title":{"value":"","isInvalid":false,"errorMsg":""},"log":{"value":"","isInvalid":false,"errorMsg":""},"draftInfo":{"id":"","status":""}},"global":{"sessionUser":null,"isHiddenHeader":false,"isHiddenFooter":false,"title":"Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否","selectedTags":[],"isShowLogin":false,"beginnerGuideState":{"visible":false,"type":1},"isShowBindMobile":false,"unactivated":false,"isShowRegister":false,"headOptions":{"keywords":"spring,java","description":"在应用开发中，常常需要执行一些特定的初始化工作，这些工作都是相对比较固定的，比如建立数据库连接，打开网络连接等，同时，在结束服务时，也有一些相对固定的销毁工作需要执行。为了便于这些工作的设计，Spring IoC容器提供了相关的功能，可以让应用定制Bean的初始化和销毁过程。"},"notices":[],"sessionInfo":{"key":"b274bc04079c7e1134a01d80e27ab66a","login":false,"id":null},"singleNotice":"","currentRoute":{"exact":true,"path":"\u002Fa\u002F:aid","component":{"render":function(e,t){i();var o=Object(s["useContext"])(N),a=Object(l["useSubscription"])(r);return Object(s["useImperativeHandle"])(t,(function(){return{retry:r.retry}})),o&&Array.isArray(n.modules)&&n.modules.forEach((function(e){o(e)})),a.loading||a.error?Object(s["createElement"])(n.loading,{isLoading:a.loading,pastDelay:a.pastDelay,timedOut:a.timedOut,error:a.error,retry:r.retry}):a.loaded?n.render(a.loaded,e):null},"preload":function(){return i()},"displayName":"LoadableComponent"},"_chunkName":"p__ArticleDetail"},"letterNum":0,"noticeNum":0,"serverData":{"userAgent":"Mozilla\u002F5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\u002F537.36 (KHTML, like Gecko) Chrome\u002F89.0.4389.82 Safari\u002F537.36 Edg\u002F89.0.774.50","Token":"b274bc04079c7e1134a01d80e27ab66a"},"userStat":{},"newTask":{}},"video":{"videoData":{},"relationVideos":[],"videos":{"rows":[],"limit":0,"offset":0,"hasMore":true},"lives":[]},"home":{"channels":{},"articles":{"rows":[],"size":0,"offset":0,"hasMore":true,"error":false,"loading":false,"isStopLoad":false,"cutLoadNum":1,"isLoadedFirstRecommend":false},"currentTab":"recommendation","notices":{},"events":{},"recommendArticles":{},"hotQuestions":{},"banners":{}},"letterDetail":{"letterData":{"rows":[],"page":1,"size":100,"total_page":0,"hasMore":true},"loading":false,"readAll":false},"inbox":{"list":{"page":1,"count":0,"rows":{"inbox":{},"messages":[]},"total_page":1},"loading":false},"noticeDetail":{"noticeData":{"rows":[],"offset":"","hasMore":true},"loading":false,"readAll":false},"question":{"questionDetail":{},"relateDetail":{}},"questionList":{"questionList":{"page":1,"size":30,"count":0,"total_page":0,"rows":[]},"updateList":{"offset":"","rows":[]},"showLoading":false,"hostData":{},"userRank":{},"notices":{},"loading":false,"followedTags":[]},"loading":{"global":false,"models":{"global":false,"articleDetail":false},"effects":{"global\u002FgetSessionInfo":false,"articleDetail\u002FgetArtDetail":false}}};
	</script>

    <script src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/gt.js.下载"></script>
    <script>
      (function () {
        var data = window.g_initialProps["gtagData"] || window["gtagData"];
        var script = document.createElement("script");
        script.src = "https://www.googletagmanager.com/gtag/js?id=UA-918487-8";
        script.async = true;
        script.onload = function () {
          window.dataLayer = window.dataLayer || [];
          window.gtag = function () {
            window.dataLayer.push(arguments);
          };
          window.gtag("js", new Date());
          window.gtag("config", "UA-918487-8");
          data && window.gtag("set", data);
        };
        document.getElementsByTagName("head")[0].appendChild(script);
      })();
    </script>
    <script src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/umi.js.下载"></script>
  


  <div class="is-active ImageView p-4" style="display: none;">
      <div class="ImageView-inner" style="overflow: auto;">
          <img src="https://segmentfault.com/a/1190000020747302?utm_source=sf-related" class="ImageView-img" alt="preview" style="max-width: 100%">
      </div>
  </div><ins class="adsbygoogle adsbygoogle-noablate" data-adsbygoogle-status="done" style="display: none !important;"><ins id="aswift_2_expand" style="display:inline-table;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent;" tabindex="0" title="Advertisement" aria-label="Advertisement"><ins id="aswift_2_anchor" style="display:block;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent;"><iframe id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;border:0;width:undefinedpx;height:undefinedpx;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" frameborder="0" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/ads(2).html" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!2" data-load-complete="true"></iframe></ins></ins></ins><iframe id="google_osd_static_frame_3329373156175" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/saved_resource(2).html"></iframe></body><iframe id="google_esf" name="google_esf" src="./Spring Bean 生命周期 （实例结合源码彻底讲透） - SegmentFault 思否_files/zrt_lookup.html" data-ad-client="ca-pub-6330872677300335" style="display: none;"></iframe></html>