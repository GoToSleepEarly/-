(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"2CDT":function(e,t,a){"use strict";function n(e){var t,a,n,c,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e?window.OA_script("https://sponsor.segmentfault.com/spcjs.php?id=1&block=1&repu=".concat(l,"&v=5f0a9217&tag=").concat(escape(e))):(null===(t=window.location)||void 0===t||null===(a=t.pathname)||void 0===a?void 0:a.includes("/a/"))||(null===(n=window.location)||void 0===n||null===(c=n.pathname)||void 0===c?void 0:c.includes("/q/"))||window.OA_script("https://sponsor.segmentfault.com/spcjs.php?id=1&block=1&repu=".concat(l,"&v=5f0a9217"))}t["a"]=n},"47/0":function(e,t,a){},"4GjR":function(e,t,a){"use strict";var n=a("o0o1"),c=a.n(n),l=a("VTBJ"),i=a("HaE+"),r=a("ODXe"),o=a("q1tI"),s=a.n(o),m=a("YdHu"),d=a("97+O"),u=a("tSvB"),v=a("Dp36"),f=a("9kvl"),b=function(e){var t=e.id,a=e.type,n=e.actions,f=void 0===n?[]:n,b=e.member_actions,p=void 0===b?[]:b,E=e.onCallBack,g=e.sessionUser,h=e.className,O=e.qid,y=Object(o["useState"])({visable:!1,action:"",actionName:""}),j=Object(r["a"])(y,2),k=j[0],N=j[1],w=Object(o["useState"])(!1),x=Object(r["a"])(w,2),S=x[0],C=x[1],_=Object(o["useState"])(!1),I=Object(r["a"])(_,2),D=I[0],R=I[1],T=Object(o["useState"])(!1),B=Object(r["a"])(T,2),F=B[0],L=B[1],A=function(e){Object(v["sb"])({id:t,type:a,handle:e}).then((function(e){E(e)}))},U=function(){var e=Object(i["a"])(c.a.mark((function e(n){var i,r;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("report"!==k.action){e.next=6;break}return e.next=3,Object(v["Fb"])(Object(l["a"])({object_id:t},n))["catch"]((function(e){i=null===e||void 0===e?void 0:e.object_id}));case 3:return r=e.sent,E(r||i,k.action),e.abrupt("return");case 6:if("seo"!==k.action&&"hide-setting"!==k.action){e.next=9;break}return E("",k.action),e.abrupt("return");case 9:if("delete"!==k.action){e.next=12;break}return Object(v["tb"])(Object(l["a"])({id:t,type:a},n)).then((function(e){E(e,k.action)})),e.abrupt("return");case 12:Object(v["sb"])(Object(l["a"])({id:t,type:a,handle:k.action},n)).then((function(e){E(e,k.action)}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:h},f.length>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"d-inline-block"},s.a.createElement(d["a"],null,s.a.createElement(d["a"].Toggle,{as:m["a"],className:"text-secondary"},s.a.createElement("span",null,"\u7ba1\u7406")),s.a.createElement(d["a"].Menu,null,f.map((function(e,n){if("edit"===e.type){var c;switch(a){case"article":c="/a/".concat(t,"/edit");break;case"question":c="/q/".concat(t,"/edit");break;case"answer":c="/q/".concat(O,"/a-").concat(t,"/edit");break}return s.a.createElement(d["a"].Item,{key:e.name+n,href:c},e.name)}return"reason"===e.type?s.a.createElement(d["a"].Item,{key:e.name+n,onClick:function(){N({action:e.action,visable:!0,actionName:e.name})}},e.name):"put"===e.type?s.a.createElement(d["a"].Item,{key:e.name+n,onClick:function(){return A(e.action)}},e.name):"site"===e.type?s.a.createElement(d["a"].Item,{key:e.name+n,onClick:function(){C(!0),N(Object(l["a"])(Object(l["a"])({},k),{},{action:e.action}))}},e.name):"seo"===e.type?s.a.createElement(d["a"].Item,{key:e.name+n,onClick:function(){R(!0),N(Object(l["a"])(Object(l["a"])({},k),{},{action:e.action}))}},e.name):"hide"===e.type?s.a.createElement(d["a"].Item,{key:e.name+n,onClick:function(){L(!0),N(Object(l["a"])(Object(l["a"])({},k),{},{action:e.action}))}},e.name):s.a.createElement(d["a"].Item,{key:e.name+n},e.name)}))))),s.a.createElement("span",{className:"split-dot"})),p.length>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"d-inline-block"},s.a.createElement(d["a"],null,s.a.createElement(d["a"].Toggle,{as:m["a"],className:"text-secondary"},s.a.createElement("span",null,"\u64cd\u4f5c")),s.a.createElement(d["a"].Menu,null,p.map((function(e,n){if("edit"===e.type){var c;switch(a){case"article":c="/a/".concat(t,"/edit");break;case"question":c="/q/".concat(t,"/edit");break;case"answer":c="/q/".concat(O,"/a-").concat(t,"/edit");break}return s.a.createElement(d["a"].Item,{key:e.name+n,href:c},e.name)}return"reason"===e.type?s.a.createElement(d["a"].Item,{key:e.name+n,onClick:function(){N({action:e.action,visable:!0,actionName:e.name})}},e.name):"put"===e.type?s.a.createElement(d["a"].Item,{key:e.name+n,onClick:function(){return A(e.action)}},e.name):void 0})),"question"===a&&s.a.createElement(d["a"].Item,{href:"/q/".concat(t,"/revision")},"\u5386\u53f2\u7248\u672c")))),s.a.createElement("span",{className:"split-dot"})),g&&s.a.createElement("a",{className:"text-secondary sf_do",href:"#",onClick:function(e){e.preventDefault(),N({action:"report",visable:!0,actionName:"\u4e3e\u62a5"})}},s.a.createElement("span",null,"\u4e3e\u62a5")),k.visable&&s.a.createElement(u["f"],{id:t,isShow:!0,action:k.action,actionName:k.actionName,setModalStatus:N,onOk:U}),S&&s.a.createElement(u["e"],{isShow:!0,setModalStatus:C,callback:U}),s.a.createElement(u["l"],{id:t,isShow:D,setModalStatus:R,callBack:U}),s.a.createElement(u["g"],{id:t,isShow:F,setModalStatus:L,callBack:U}))};t["a"]=Object(f["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(s.a.memo(b))},"5SRE":function(e,t,a){},"6T2I":function(e,t,a){"use strict";var n=a("q1tI"),c=a.n(n),l=a("XWsC"),i=function(e){var t=e.data,a=e.className,n=void 0===a?"":a;return c.a.createElement(l["a"],{className:"font-size-14 px-0 my-0 ".concat(n),bsPrefix:"breadcrumb bg-transparent"},c.a.createElement(l["a"].Item,{href:"/"},"\u9996\u9875"),t.map((function(e,a){return e.name?c.a.createElement(l["a"].Item,{href:e.url,key:e.url,active:t.length===a+1},e.name):null})))};t["a"]=c.a.memo(i)},"78gL":function(e,t,a){},"9F+u":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n,c,l=a("EVdn");function i(e){function t(){l("body").find(".ad-container").each((function(e,t){var a,n;l(t).hasClass(".ad-close")&&!(null===(a=l(t))||void 0===a||null===(n=a.children())||void 0===n?void 0:n.length)||l(t).show()})),e&&l(".ad-close").parent().each((function(t,a){var n=l(a).attr("id"),c="".concat(e,"-").concat(n),i=parseInt(localStorage.getItem(c)||"0")||0;"OA_holder_5"===n&&(i=Math.max(parseInt(localStorage.getItem("article-OA_holder_5")||"0"),parseInt(localStorage.getItem("question-OA_holder_5")||"0"),parseInt(localStorage.getItem("global-OA_holder_5")||"0"))),i<Date.now()?l("#"+n).css("display","block"):l("#"+n).remove()})),l(".ad-close").css({position:"relative"}).append(l('<div class="sflex-center ad-close-div"></div>').css({width:"16px",height:"16px",position:"absolute",right:"8px",top:"8px","background-color":"rgba(0,0,0,.75)",cursor:"pointer","pointer-events":"none","border-radius":"50%"}).append(l('<span class="ad-close-span"></span>').css({width:"8px",height:"8px",display:"block","background-image":"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath fill='%23FFF' fill-rule='evenodd' d='M6.6667 0L8 1.3333 5.333 4 8 6.6667 6.6667 8 4 5.333 1.3333 8 0 6.6667 2.666 4 0 1.3333 1.3333 0 4 2.667 6.6667 0z'/%3E%3C/svg%3E\")","background-repeat":"no-repeat","background-position":"center","pointer-events":"auto"}))),l(".ad-close-span").on("click",(function(){var t=l(this).parents(".ad-close").parent(),a=t.attr("id");t.parent().remove(),localStorage.setItem("".concat(e,"-").concat(a),(Date.now()+864e5).toString())}))}n&&clearInterval(n),n=setInterval((function(){l(".ad-close").length>0&&(clearInterval(n),t())}),300),c&&clearInterval(c),c=setInterval((function(){l("div[id^='OA_holder_']").length>0&&(clearInterval(c),l("div[id^='OA_holder_']").each((function(e,t){var a=l(t).children("div[id^='beacon_']").length;a>0&&l(t).parent().show()})))}),500)}},"9cdK":function(e,t,a){},PFmq:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("o0o1"),c=a.n(n),l=a("uFwe"),i=a("VTBJ"),r=a("HaE+"),o=a("LvDl"),s=a("9kvl"),m=a("6Yt9");function d(e,t){return e instanceof Function?(t=e,e={}):e||(e={}),function(){var a=Object(r["a"])(c.a.mark((function a(n){var r,d,u,v,f,b,p,E,g,h,O,y,j,k;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n.initResult||(n.initResult={}),v=Object(s["c"])(),f=v._store,b=n.isServer?null===(r=n.serverData)||void 0===r?void 0:r.Token:Object(m["b"])(),n.isServer&&!Object(o["isEmpty"])(n.serverData)&&f.dispatch({type:"global/saveServerData",payload:n.serverData}),f.dispatch({type:"global/saveSessionInfo",payload:Object(i["a"])(Object(i["a"])({},(null===(d=f.getState().global)||void 0===d?void 0:d.sessionInfo)||{}),{},{key:b})}),!n.isServer){a.next=8;break}return a.next=8,f.dispatch({type:"global/getSessionInfo",payload:{Token:b}});case 8:if(p=f.getState(),E=(null===(u=p.global)||void 0===u?void 0:u.sessionInfo)||{},!n.isServer||!E.login){a.next=13;break}return a.next=13,f.dispatch({type:"global/getUser"});case 13:if(g={},"object"===typeof e&&(g=e),g.requireLogin&&!E.login?(n.initResult.action="redirect",n.initResult.param="/user/login"):g.requireNotLogin&&E.login&&(n.initResult.action="redirect",n.initResult.param="/"),f.dispatch({type:"global/saveRoute",payload:Object(i["a"])(Object(i["a"])({},n.route),n.initResult)}),!t){a.next=23;break}return a.next=20,t(n);case 20:a.t0=a.sent,a.next=24;break;case 23:a.t0=p;case 24:if(h=a.t0,!g.requireState){a.next=45;break}O=Object(l["a"])(g.requireState),a.prev=27,O.s();case 29:if((y=O.n()).done){a.next=37;break}if(j=y.value,k=Object(o["get"])(h,j),k&&!Object(o["isEmpty"])(k)){a.next=35;break}return n.initResult.action="404",a.abrupt("break",37);case 35:a.next=29;break;case 37:a.next=42;break;case 39:a.prev=39,a.t1=a["catch"](27),O.e(a.t1);case 42:return a.prev=42,O.f(),a.finish(42);case 45:return a.abrupt("return",h);case 46:case"end":return a.stop()}}),a,null,[[27,39,42,45]])})));return function(e){return a.apply(this,arguments)}}()}},PmrS:function(e,t,a){},SoKV:function(e,t,a){},YKRR:function(e,t,a){"use strict";var n=a("ODXe"),c=a("q1tI"),l=a.n(c),i=a("EVdn"),r=(a("rNPM"),function(){var e=function(){i("body,html").animate({scrollTop:0})},t=Object(c["useState"])(0),a=Object(n["a"])(t,2),r=a[0],o=a[1],s=function(){o(window.scrollY)};return Object(c["useEffect"])((function(){return window.addEventListener("scroll",s),function(){window.removeEventListener("scroll",s)}})),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"fixedTools",className:"position-fixed d-none ".concat(r>720?"d-xl-flex":""),style:{right:"24px",bottom:"24px"}},l.a.createElement("button",{type:"button",className:"btn btn-light",title:"\u56de\u9876\u90e8",onClick:e},"\u25b2")))});t["a"]=r},YdHu:function(e,t,a){"use strict";var n=a("q1tI"),c=a.n(n),l=function(e,t){var a=e.children,n=e.onClick,l=e.className,i=e.domType,r=void 0===i?"a":i;return"a"===r?c.a.createElement("a",{href:"#",className:l,ref:t,onClick:function(e){e.preventDefault(),n(e)},"aria-label":"\u5206\u4eab"},a):c.a.createElement("div",{className:l,ref:t,onClick:function(e){e.preventDefault(),n(e)}},a)};t["a"]=c.a.forwardRef(l)},cor7:function(e,t,a){"use strict";var n=a("wx14"),c=a("o0o1"),l=a.n(c),i=a("HaE+"),r=a("rePB"),o=a("KQm4"),s=a("VTBJ"),m=a("ODXe"),d=a("q1tI"),u=a.n(d),v=a("6xyR"),f=a("kpTP"),b=a("sjrs"),p=a("NAXS"),E=a("GemG"),g=a.n(E),h=a("LvDl"),O=a("Dp36"),y=a("tSvB"),j=a("QojX"),k=a("HRRZ"),N=(a("gZRy"),function(e){var t=e.isChild,a=void 0!==t&&t,n=e.item,c=e.parentItem,l=e.onChangeOfComment,i=e.onComment,r=Object(d["useRef"])(null);return Object(d["useEffect"])((function(){if(r.current&&(g()(r.current),n.original_text)){var e=n.original_text.length;r.current.setSelectionRange(e,e)}}),[r]),u.a.createElement(j["a"],{className:"edit-form ".concat(a?"edit-reply-form":"")},u.a.createElement(k["a"],null,u.a.createElement(j["a"].Control,{as:"textarea",className:"comment-text",rows:1,ref:r,autoFocus:!0,value:n.original_text,size:"sm",onChange:function(e){c?l(Object(s["a"])(Object(s["a"])({},n),{},{original_text:e.target.value}),c):l(Object(s["a"])(Object(s["a"])({},n),{},{original_text:e.target.value}))},placeholder:"\u64b0\u5199\u8bc4\u8bba ...",isInvalid:n.isInvalid}),u.a.createElement(j["a"].Control.Feedback,{type:"invalid"},n.errorMsg)),u.a.createElement("div",{className:"my-3 d-flex align-content-center justify-content-end"},u.a.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm mr-2 edit-top-comment-cancel-btn cancelEdit",onClick:function(){c?l(Object(s["a"])(Object(s["a"])({},n),{},{isEdit:!1}),c):l(Object(s["a"])(Object(s["a"])({},n),{},{isEdit:!1}))}},"\u53d6\u6d88"),u.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:function(){return i({item:n,parentItem:c})},disabled:!n.original_text},"\u63d0\u4ea4")))}),w=u.a.memo(N),x=a("TUci"),S=a("wwbV"),C=a("bdvc"),_=function(e){var t=e.item,a=e.parentItem,n=e.onChangeOfComment,c=e.onComment,l=e.className,i=e.id,r=Object(d["useState"])(!1),o=Object(m["a"])(r,2),v=o[0],f=o[1],b=Object(d["useRef"])(null),p=Object(d["useState"])({isInvalid:!1,msg:""}),E=Object(m["a"])(p,2),h=E[0],O=E[1];Object(d["useEffect"])((function(){if((null===b||void 0===b?void 0:b.current)&&(Object(C["b"])({id:i,element:b.current}),g()(b.current),t.commentVal)){var e=t.commentVal.length;b.current.setSelectionRange(e,e)}}),[b]);var y=function(e){O(e)};return u.a.createElement(j["a"],{className:"card-body add-comment-form ".concat(l)},u.a.createElement(k["a"],null,u.a.createElement(j["a"].Control,{as:"textarea",value:t.commentVal,autoFocus:!0,ref:b,size:"sm",rows:1,onChange:function(e){a?n(Object(s["a"])(Object(s["a"])({},t),{},{commentVal:e.target.value}),a):n(Object(s["a"])(Object(s["a"])({},t),{},{commentVal:e.target.value}))},className:"form-control form-control-sm comment-reply",placeholder:"\u64b0\u5199\u8bc4\u8bba \u2026",isInvalid:h.isInvalid}),u.a.createElement(j["a"].Control.Feedback,{type:"invalid"},h.msg)),u.a.createElement("div",{className:"d-flex justify-content-end align-items-center"},u.a.createElement("a",{href:"#",className:"mr-3",onClick:function(e){e.preventDefault(),f(!v)}},u.a.createElement("i",{className:"far fa-info-circle text-secondary"})),u.a.createElement(S["a"],{size:"sm",className:"float-right",onClick:function(){return c({item:t,parentItem:a,callback:y})},disabled:!t.commentVal},"\u63d0\u4ea4\u8bc4\u8bba")),u.a.createElement(x["a"],{show:v,variant:"info",className:"mt-3 my-0 font-size-14"},"\u8bc4\u8bba\u652f\u6301\u90e8\u5206 Markdown \u8bed\u6cd5\uff1a",u.a.createElement("code",null,"**\u7c97\u4f53** _\u659c\u4f53_ [\u94fe\u63a5](http://example.com) `\u4ee3\u7801` - \u5217\u8868 > \u5f15\u7528"),"\u3002\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 ",u.a.createElement("code",null,"@ "),"\u6765\u901a\u77e5\u5176\u4ed6\u7528\u6237\u3002"))},I=u.a.memo(_),D=a("6Yt9"),R=(a("9cdK"),a("9kvl")),T=function(e){var t=e.commentContent,a=e.isShowComment,n=e.inputRef,c=e.setCommentContent,l=e.onComment,i=e.sessionUser,r=e.id,o=Object(d["useState"])(!1),s=Object(m["a"])(o,2),f=s[0],b=s[1],p=Object(d["useState"])({isInvalid:!1,msg:""}),E=Object(m["a"])(p,2),g=E[0],h=E[1];Object(d["useEffect"])((function(){a&&n.current.focus()}),[a]),Object(d["useEffect"])((function(){n&&n.current&&Object(C["b"])({id:r,element:n.current})}),[n]);var O=function(e){h(e)};return u.a.createElement(v["a"],{className:"bg-light border-0 mt-3 ".concat(a?"":"hidden")},u.a.createElement(v["a"].Body,null,u.a.createElement("div",{className:"media-body"},u.a.createElement(k["a"],null,u.a.createElement(j["a"].Control,{as:"textarea",rows:1,ref:n,value:t,size:"sm",onChange:function(e){c(e.target.value)},className:"comment-text",placeholder:"\u64b0\u5199\u8bc4\u8bba \u2026",onFocus:function(e){i||(e.preventDefault(),Object(D["c"])(),n.current.blur())},isInvalid:g.isInvalid}),u.a.createElement(j["a"].Control.Feedback,{type:"invalid"},g.msg)),u.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},u.a.createElement("small",{className:"text-secondary"},"\u5982\u679c\u5bf9\u4f60\u6709\u5e2e\u52a9\uff0c\u8bb0\u5f97\u70b9\u8d5e\u652f\u6301"),u.a.createElement("div",{className:"sflex-center"},u.a.createElement("a",{href:"#",className:"mr-3",onClick:function(e){e.preventDefault(),b(!f)},"aria-label":"\u63d0\u793a"},u.a.createElement("i",{className:"far fa-info-circle text-secondary"})),u.a.createElement(S["a"],{size:"sm",className:"float-right",onClick:function(){return l({item:"comment",callback:O})},disabled:!t},"\u63d0\u4ea4\u8bc4\u8bba")))),u.a.createElement(x["a"],{show:f,variant:"info",className:"mt-3 my-0 font-size-14"},"\u8bc4\u8bba\u652f\u6301\u90e8\u5206 Markdown \u8bed\u6cd5\uff1a",u.a.createElement("code",null,"**\u7c97\u4f53** _\u659c\u4f53_ [\u94fe\u63a5](http://example.com) `\u4ee3\u7801` - \u5217\u8868 > \u5f15\u7528"),"\u3002\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 ",u.a.createElement("code",null,"@ "),"\u6765\u901a\u77e5\u5176\u4ed6\u7528\u6237\u3002")))},B=Object(R["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(u.a.memo(T)),F=function(e){var t=e.allTotal,a=e.sort,n=e.setSort;return u.a.createElement("div",{className:"d-flex justify-content-between mb-2 px-4 px-md-0"},u.a.createElement("div",{id:"comment-total",className:"h5 mb-0"},t," \u6761\u8bc4\u8bba"),u.a.createElement("div",null,u.a.createElement("a",{href:"#",className:"sort ".concat("votes"===a?"text-dark":"text-secondary"),onClick:function(e){e.preventDefault(),n("votes")}},"\u5f97\u7968"),u.a.createElement("span",{className:"split-dot text-secondary"}),u.a.createElement("a",{href:"#",className:"sort ".concat("newest"===a?"text-dark":"text-secondary"),onClick:function(e){e.preventDefault(),n("newest")}},"\u65f6\u95f4")))},L=u.a.memo(F),A=function(e){var t,a=e.commentContent,n=e.inputRef,c=e.setCommentContent,l=e.onComment,i=e.sessionUser,r=e.id,o=Object(d["useState"])(!1),s=Object(m["a"])(o,2),v=s[0],b=s[1],p=Object(d["useState"])({isInvalid:!1,msg:""}),E=Object(m["a"])(p,2),g=E[0],h=E[1];Object(d["useEffect"])((function(){n&&n.current&&Object(C["b"])({id:r,element:n.current})}),[n]);var O=function(e){h(e)};return u.a.createElement(f["a"],{className:"mb-4"},u.a.createElement("img",{src:(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.avatar_url)||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",className:"rounded-circle mr-3",width:"38","aria-hidden":"true"}),u.a.createElement(f["a"].Body,null,u.a.createElement(k["a"],null,u.a.createElement(j["a"].Control,{as:"textarea",rows:1,ref:n,value:a,onChange:function(e){c(e.target.value)},className:"comment-text",placeholder:"\u64b0\u5199\u8bc4\u8bba \u2026",onFocus:function(e){i||(e.preventDefault(),Object(D["c"])(),n.current.blur())},"aria-label":"\u8bc4\u8bba",isInvalid:g.isInvalid}),u.a.createElement(j["a"].Control.Feedback,{type:"invalid"},g.msg)),u.a.createElement("div",{className:"d-flex justify-content-end align-items-center"},u.a.createElement("a",{href:"#",className:"mr-3",onClick:function(e){e.preventDefault(),b(!v)},"aria-label":"\u63d0\u793a"},u.a.createElement("i",{className:"far fa-info-circle text-secondary"})),u.a.createElement(S["a"],{className:"float-right",onClick:function(){return l({item:"comment",callback:O})},disabled:!a},"\u63d0\u4ea4\u8bc4\u8bba")),u.a.createElement(x["a"],{show:v,variant:"info",className:"mt-3 my-0 font-size-14"},"\u8bc4\u8bba\u652f\u6301\u90e8\u5206 Markdown \u8bed\u6cd5\uff1a",u.a.createElement("code",null,"**\u7c97\u4f53** _\u659c\u4f53_ [\u94fe\u63a5](http://example.com) `\u4ee3\u7801` - \u5217\u8868 > \u5f15\u7528"),"\u3002\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 ",u.a.createElement("code",null,"@ "),"\u6765\u901a\u77e5\u5176\u4ed6\u7528\u6237\u3002")))},U=Object(R["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(u.a.memo(A)),q=a("zhAr"),M=15,H=function(e){var t=e.total,a=e.page,n=e.getData,c=function(){var e=document.getElementById("comment-area"),t=-65,a=e.getBoundingClientRect().top+window.pageYOffset+t;window.scrollTo({top:a})},l=function(e){n(e),c()};return u.a.createElement("div",{className:"d-flex justify-content-center mt-4 mb-1"},u.a.createElement(q["a"],{size:"sm",className:"mb-0"},u.a.createElement(q["a"].Item,{disabled:1===a,onClick:function(){return l(a-1)}},"\u4e0a\u4e00\u9875"),Object(o["a"])(Array(Math.ceil(t/M))).map((function(){return 0})).map((function(e,t){return u.a.createElement(q["a"].Item,{key:"page".concat(t),active:a===t+1,onClick:function(){return l(t+1)}},t+1)})),u.a.createElement(q["a"].Item,{disabled:a===Object(o["a"])(Array(Math.ceil(t/M))).map((function(){return 0})).length,onClick:function(){return l(a+1)}},"\u4e0b\u4e00\u9875")))},z=Object(R["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(u.a.memo(H)),P=function(e){var t=e.sessionUser,a=e.item,n=e.onEditComment,c=e.onEdit,l=e.onRemove,i=e.onReport,r=Object(d["useState"])(a.is_liked),o=Object(m["a"])(r,2),s=o[0],v=o[1],f=Object(d["useState"])(a.votes),b=Object(m["a"])(f,2),p=b[0],E=b[1],g=(null===t||void 0===t?void 0:t.roles)||{},h=g.is_editor,y=function(e,t){t.preventDefault(),Object(D["c"])()&&Object(O["t"])({id:e.id,is_like:e.is_liked?0:1}).then((function(){E(s?p-1:p+1),v(!s)}))};return u.a.createElement("div",{className:"handle-bar font-size-14 d-flex justify-content-between"},u.a.createElement("div",null,u.a.createElement("a",{className:"text-secondary",href:"#",onClick:function(e){return y(a,e)}},u.a.createElement("span",{className:"mainLike-comment ".concat(s?"text-primary":"")},u.a.createElement("i",{className:"fa-w-16 ".concat(s?"fas fa-thumbs-up":"far fa-thumbs-up"),style:{width:"1em"}})),p>0&&u.a.createElement("span",{className:"mainLike-commentNum ml-1"},p)),u.a.createElement("span",{className:"split-dot"}),u.a.createElement("a",{className:"text-secondary btn-comment",href:"#",onClick:function(e){n(a,"",e)}},"\u56de\u590d"),u.a.createElement("span",{className:"split-dot"}),u.a.createElement("span",{className:"text-secondary"},Object(C["c"])(a.created))),u.a.createElement("div",{className:"control-area d-none"},t&&(h||Number(a.user.id)==t.user.id)&&u.a.createElement(u.a.Fragment,null,u.a.createElement("a",{className:"text-secondary edit",href:"#",onClick:function(e){e.preventDefault(),c(a)}},"\u7f16\u8f91"),u.a.createElement("span",{className:"split-dot"}),u.a.createElement("a",{className:"text-secondary delete",href:"#",onClick:function(e){return l(a.id,e)}},"\u5220\u9664"),u.a.createElement("span",{className:"split-dot"})),t&&u.a.createElement("a",{className:"text-secondary comment-report",href:"#",onClick:function(e){return i(a,e)}},"\u4e3e\u62a5")))},V=Object(R["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(u.a.memo(P)),$=function(e){var t=e.sessionUser,a=e.item,n=e.subItem,c=e.onEditComment,l=e.onEdit,i=e.onRemove,r=e.onReport,o=(null===t||void 0===t?void 0:t.roles)||{},s=o.is_editor,v=Object(d["useState"])(n.is_liked),f=Object(m["a"])(v,2),b=f[0],p=f[1],E=Object(d["useState"])(n.votes),g=Object(m["a"])(E,2),h=g[0],y=g[1],j=function(e,t){t.preventDefault(),Object(D["c"])()&&Object(O["t"])({id:e.id,is_like:e.is_liked?0:1}).then((function(){y(b?h-1:h+1),p(!b)}))};return u.a.createElement("div",{className:"handle-bar font-size-14 d-flex justify-content-between"},u.a.createElement("div",null,u.a.createElement("a",{className:"text-secondary",href:"#",onClick:function(e){return j(n,e)}},u.a.createElement("span",{className:"mainLike-comment ".concat(b?"text-primary":"")},u.a.createElement("i",{className:"fa-w-16 ".concat(b?"fas fa-thumbs-up":"far fa-thumbs-up"),style:{width:"1em"}})),h>0&&u.a.createElement("span",{className:"mainLike-commentNum  ml-1"},h)),u.a.createElement("span",{className:"split-dot"}),u.a.createElement("a",{className:"text-secondary btn-reply",href:"#",onClick:function(e){c(n,a,e)}},"\u56de\u590d"),u.a.createElement("span",{className:"split-dot"}),u.a.createElement("span",{className:"text-secondary"},Object(C["c"])(n.created))),u.a.createElement("div",{className:"comment-control-area d-none"},t&&(s||Number(n.user.id)==t.user.id)&&u.a.createElement(u.a.Fragment,null,u.a.createElement("a",{className:"text-secondary edit",href:"#",onClick:function(e){e.preventDefault(),l(n,a)}},"\u7f16\u8f91"),u.a.createElement("span",{className:"split-dot"}),u.a.createElement("a",{className:"text-secondary delete",href:"#",onClick:function(e){return i(n.id,e)}},"\u5220\u9664"),u.a.createElement("span",{className:"split-dot"})),t&&u.a.createElement("a",{className:"text-secondary reply-report",href:"#",onClick:function(e){return r(n,e)}},"\u4e3e\u62a5")))},J=Object(R["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(u.a.memo($)),K=(a("zliv"),15),Y="",W=function(e){var t=e.id,a=e.mode,c=void 0===a?"article":a,E=e.isShowComment,j=void 0!==E&&E,k=e.setCommentState,N=e.event_object,x=e.user,S=Object(d["useRef"])(null),_=Object(d["useState"])(""),R=Object(m["a"])(_,2),T=R[0],F=R[1];S.current&&(S.current.value=T);var A=Object(d["useState"])([]),q=Object(m["a"])(A,2),M=q[0],H=q[1],P=Object(d["useState"])({isShow:!1,id:""}),$=Object(m["a"])(P,2),W=$[0],X=$[1],Q=Object(d["useState"])({page:0}),Z=Object(m["a"])(Q,2),G=Z[0],ee=Z[1],te=Object(d["useState"])(0),ae=Object(m["a"])(te,2),ne=ae[0],ce=ae[1],le=Object(d["useState"])(0),ie=Object(m["a"])(le,2),re=ie[0],oe=ie[1],se=Object(d["useState"])("votes"),me=Object(m["a"])(se,2),de=me[0],ue=me[1],ve=Object(d["useState"])(!1),fe=Object(m["a"])(ve,2),be=fe[0],pe=fe[1],Ee=Object(d["useRef"])({});Object(d["useEffect"])((function(){S.current&&g()(S.current)}),[S]),Object(d["useEffect"])((function(){0===G.page&&he()}),[null===G||void 0===G?void 0:G.page]),Object(d["useEffect"])((function(){ee({page:0})}),[de]),Object(d["useEffect"])((function(){be&&(M.map((function(e){return e.hidden=!1,e})),H(Object(h["orderBy"])(M,["created"])))}),[be]);var ge=function(e){var a=e.item,n=e.parentItem,l=e.callback;return new Promise((function(e,i){if(Object(D["c"])()){var r={};n?r={reply_comment_id:n.id,reply_user_id:n.user.id}:(null===a||void 0===a?void 0:a.isReply)&&(r={reply_comment_id:a.reply_comment_id||a.id,reply_user_id:a.reply_user_id||a.user.id}),a.id&&!a.isReply&&a.isEdit?Object(O["Wb"])(Object(s["a"])(Object(s["a"])({id:a.id,object_id:t},r),{},{text:null===a||void 0===a?void 0:a.original_text})).then((function(e){H(n?M.map((function(t){return t.id===n.id&&t.replies.forEach((function(t){t.id===e.id&&(t.isEdit=!1,t.parsed_text=e.parsed_text)})),t})):M.map((function(t){return t.id===e.id&&(t.parsed_text=null===e||void 0===e?void 0:e.parsed_text,t.isEdit=!1),t}))),"function"===typeof k&&k(!1)}))["finally"]((function(){e(!0)})):Object(O["s"])(Object(s["a"])(Object(s["a"])({object_id:t},r),{},{text:(null===a||void 0===a?void 0:a.commentVal)||T})).then((function(e){if("function"===typeof l&&l({isInvalid:!1,msg:""}),"string"===typeof a?F(""):H(M.map((function(e){return n?e.id===n.id&&e.replies.forEach((function(e){e.id===a.id&&(e.isReply=!1)})):e.id===a.id&&(e.isReply=!1,e.commentVal=""),e}))),"article"===c&&"string"!==typeof a)H(M.map((function(t){if(n){if(t.id===n.id){var c=Object(h["findIndex"])(t.replies,{id:a.id});t.replies.splice(c+1,0,e.comment)}}else t.id===a.id&&(Object(h["isEmpty"])(t.replies)?t.replies=[e.comment]:t.replies.unshift(e.comment));return t})));else if("string"!==typeof a){var t=Object(h["findIndex"])(M,{id:a.id});M.splice(t+1,0,e.comment),H(M)}else H([e.comment].concat(Object(o["a"])(M)));"function"===typeof k&&k(!1)}))["catch"]((function(e){(null===e||void 0===e?void 0:e.isError)&&"function"===typeof l&&l({isInvalid:!0,msg:e.reply_comment_id||e.text})}))["finally"]((function(){e(!0)}))}else i(!1)}))},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.commentId,n=void 0===a?"":a,l=e.commentPage,i=void 0===l?1:l,m=i;n?G[n]?(G[n].page+=1,ee(Object(s["a"])({},G)),m=G[n].page):ee(Object(s["a"])(Object(s["a"])({},G),Object(r["a"])({},n,{page:1}))):ee(Object(s["a"])(Object(s["a"])({},G),{},{page:i})),Object(O["J"])({objectId:t,commentId:n,page:m,sort:de,is_direct:"article"===c?0:1}).then((function(e){if(e)if(n){var t=M.map((function(t){return t.id===n&&(t.replies=Object(h["orderBy"])(1===m?e.comments:[].concat(Object(o["a"])(t.replies),Object(o["a"])(e.comments)),["created"])),t}));H(Object(h["uniqBy"])(t,"id")||[])}else{if(1===m&&(ce(e.total),oe(e.all_total)),be||"article"===c||(e.comments=Object(h["orderBy"])(e.comments,["votes"],["desc"]).map((function(e,t){return e.hidden=t>2,e}))),!Object(h["isEmpty"])(N)&&c===N.root.type&&"comment"===N.current.type){var a,l=Object(h["findIndex"])(e.comments,["id",Number((null===N||void 0===N||null===(a=N.current)||void 0===a?void 0:a.object_id)||0)]);l>2&&(e.comments.splice(l,1),e.comments=[N.current.comment].concat(Object(o["a"])(e.comments)))}H("article"===c?Object(h["uniqBy"])(e.comments,"id")||[]:Object(h["orderBy"])(Object(h["uniqBy"])([].concat(Object(o["a"])(M),Object(o["a"])(e.comments)),"id"),["created"])||[])}}))},Oe=function(e,t,a){var n;a.preventDefault(),n=t?M.map((function(a){return a.id===t.id&&(a.replies=a.replies.map((function(t){return t.id===e.id&&(t.isReply=!t.isReply),t.commentVal="@".concat(t.user.name,"[").concat(t.user.slug,"] "),t}))),a})):M.map((function(t){return t.id===e.id&&(t.isReply=!t.isReply),"article"!==c&&(t.commentVal="@".concat(t.user.name,"[").concat(t.user.slug,"] ")),t})),H(n)},ye=function(e,t){var a;a="object"===typeof t?M.map((function(a){return a.id===(null===t||void 0===t?void 0:t.id)&&(a.replies=a.replies.map((function(t){return t.id===e.id&&(t=e),t}))),a})):M.map((function(t){return t.id===e.id&&(t=e),t})),H(a)},je=function(e,t){t.preventDefault(),X({id:e.id,isShow:!0})},ke=function(e){X(Object(s["a"])(Object(s["a"])({},W),{},{isShow:e}))},Ne=function(e,t){var a;a=t?M.map((function(a){return a.id===t.id&&(a.replies=a.replies.map((function(t){return t.id===e.id&&(t.isEdit=!t.isEdit),t}))),a})):M.map((function(t){return t.id===e.id&&(t.isEdit=!t.isEdit),t})),H(a)},we=function(e,t){t.preventDefault(),y["m"].confirm({title:"\u5220\u9664\u8bc4\u8bba",content:"\u786e\u5b9a\u8981\u5220\u9664\u8be5\u8bc4\u8bba\u5417",onSuccess:function(){var t=Object(i["a"])(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(O["v"])(e);case 2:he();case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()})};Object(d["useEffect"])((function(){if(!Object(h["isEmpty"])(Ee.current)&&xe(Y)){var e=Ee.current[Y];e&&Object(C["g"])(e)}}));var xe=Object(d["useCallback"])((function(e){var t=Object(C["e"])(N,e);return t&&(Y=e),t}),[N]),Se=ne-(be?null===G||void 0===G?void 0:G.page:0)*K,Ce=M.filter((function(e){return!e.hidden}));return u.a.createElement("div",{id:"comment-area"},"article"===c&&u.a.createElement(L,{allTotal:re,sort:de,setSort:ue}),("question"===c||"answer"===c)&&u.a.createElement(B,{commentContent:T,isShowComment:j,inputRef:S,setCommentContent:F,onComment:ge,id:t}),u.a.createElement(v["a"],{className:"comment-wrap border-0 ".concat("article"===c?"":0===M.length?"hidden":"bg-light border-0 mt-3")},u.a.createElement(v["a"].Body,{className:"article"===c?"":"p-3"},"article"===c&&u.a.createElement(U,{commentContent:T,inputRef:S,setCommentContent:F,onComment:ge,id:t}),u.a.createElement("div",{className:"comment-body-wrap ".concat(M.filter((function(e){return!e.hidden})).length<1&&"d-none")},Ce.map((function(e,a){var n,l,i,r;return u.a.createElement(f["a"],{ref:function(t){return Ee.current[e.id]=t},key:e.id,className:"mb-r d-flex align-items-start ".concat(Ce.length!==a+1&&("article"===c?"mb-4":"mb-3"))},"article"===c&&u.a.createElement("img",{className:"d-block rounded-circle mr-3",width:"38",height:"38",src:e.user.avatar_url||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",alt:""}),u.a.createElement(f["a"].Body,{className:"w-0 ".concat(xe(e.id)?"scroll-warning":"")},u.a.createElement("div",{className:"commentUnit ".concat("question"===c||"answer"===c?"font-size-14":"")},u.a.createElement("div",{className:"mb-1"},u.a.createElement("a",{className:"d-uname",href:e.user.url,rel:"noreferrer",target:"_blank"},u.a.createElement("strong",null,e.user.name),"article"===c&&e.user.id===x.id&&u.a.createElement("span",{className:"text-secondary"},"\uff08\u4f5c\u8005\uff09")),"\uff1a",!e.isEdit&&u.a.createElement("div",{className:"parsedText fmt",dangerouslySetInnerHTML:{__html:e.parsed_text}})),e.isEdit&&u.a.createElement(w,{onChangeOfComment:ye,item:e,onComment:ge}),u.a.createElement(V,{item:e,onEditComment:Oe,onEdit:Ne,onRemove:we,onReport:je}),e.isReply&&u.a.createElement(v["a"],{className:"bg-light border-0 mt-2"},u.a.createElement(I,{id:t,className:"".concat("question"===c||"answer"==c?"p-0":"p-3"),onChangeOfComment:ye,item:e,onComment:ge}))),u.a.createElement("div",{className:"replies ".concat(Object(h["isEmpty"])(e.replies)?"hidden":"")},u.a.createElement(v["a"],{className:"bg-light border-0 mt-2"},u.a.createElement(v["a"].Body,{className:"p-3"},u.a.createElement(b["a"],{className:"reply-list"},null===(n=e.replies)||void 0===n?void 0:n.map((function(a,n){return u.a.createElement(p["a"],{key:a.id,ref:function(e){return Ee.current[a.id]=e},className:"p-0 border-0 commentUnit ".concat(e.replies.length!==n+1&&"mb-3"," ").concat(xe(a.id)?"scroll-warning":""," ")},u.a.createElement("div",{className:"font-size-14 mb-1"},u.a.createElement("a",{className:"d-uname",href:a.user.url,target:"_blank",rel:"noreferrer"},u.a.createElement("strong",null,a.user.name),"article"===c&&a.user.id===x.id&&u.a.createElement("span",{className:"text-secondary"},"\uff08\u4f5c\u8005\uff09")),"\uff1a",!a.isEdit&&u.a.createElement("div",{className:"parsedText fmt",dangerouslySetInnerHTML:{__html:a.parsed_text}})),a.isEdit&&u.a.createElement(w,{isChild:!0,onChangeOfComment:ye,item:a,parentItem:e,onComment:ge}),u.a.createElement(J,{item:e,subItem:a,onEditComment:Oe,onEdit:Ne,onRemove:we,onReport:je}),a.isReply&&u.a.createElement(v["a"],{className:"bg-light border-0 mt-2"},u.a.createElement(I,{id:t,onChangeOfComment:ye,item:a,onComment:ge,parentItem:e,className:"p-0"})))}))),e.replies&&e.replies_total>e.replies.length&&e.replies_total-((null===(l=G[e.id])||void 0===l?void 0:l.page)||0)*K>0&&u.a.createElement("div",{className:"font-size-14 d-flex mt-3 loader d-none"},u.a.createElement("a",{className:"text-secondary next-page-btn",href:"#",onClick:function(t){t.preventDefault(),he({commentId:e.id})}},e.replies_total<K?"\u5171 ".concat(e.replies_total," \u6761\u56de\u590d"):"\u66f4\u591a ".concat(K>e.replies_total-((null===(i=G[e.id])||void 0===i?void 0:i.page)||0)*K?e.replies_total-((null===(r=G[e.id])||void 0===r?void 0:r.page)||0)*K:K," \u6761\u56de\u590d"))))))))}))),"article"===c?ne>K&&u.a.createElement(z,{total:ne,page:G.page,getData:function(e){return he({commentPage:e})}}):ne>3&&Se>0&&u.a.createElement("div",{className:"font-size-14 d-flex loader d-none mt-3"},u.a.createElement("a",{className:"text-secondary next-page-btn",href:"#",onClick:function(e){e.preventDefault(),be?he({commentPage:G.page+1}):(pe(!0),ee(Object(s["a"])(Object(s["a"])({},G),{},{page:G.page+1})))}},ne<K?"\u5171 ".concat(ne," \u6761\u8bc4\u8bba"):"\u66f4\u591a ".concat(K>Se?Se:K," \u6761\u8bc4\u8bba"))))),u.a.createElement(y["k"],Object(n["a"])({},W,{setModalStatus:ke})))};t["a"]=u.a.memo(W)},gZRy:function(e,t,a){},kUPb:function(e,t,a){"use strict";var n=a("ODXe"),c=a("q1tI"),l=a.n(c),i=a("9vsu"),r=a("pJDg"),o=a("cWnB"),s=a("dDCJ"),m=a("97+O"),d=a("YdHu"),u=a("24g8"),v=a("QeUd"),f=a("aWbt"),b=a("Dp36"),p=a("wFk/"),E=a("6Yt9"),g=a("0FX9"),h=a.n(g),O=a("9kvl"),y=a("tSvB"),j=function(e){var t=e.id,a=e.isLiked,g=void 0!==a&&a,O=e.votes,j=void 0===O?0:O,k=e.bookmarks,N=void 0===k?0:k,w=e.isBookmarked,x=void 0!==w&&w,S=e.title,C=void 0===S?"":S,_=e.banner,I=void 0===_?"":_,D=e.dispatch,R=e.showShare,T=void 0!==R&&R,B=e.source,F=e.showComment,L=void 0===F||F,A=e.isAuthor,U=void 0!==A&&A,q=e.sticky,M=void 0===q||q,H=e.style,z=void 0===H?{}:H,P=e.likeBtnSize,V=void 0===P?"lg":P,$=e.isHated,J=void 0!==$&&$,K=e.showHateBtn,Y=void 0!==K&&K,W=e.showBookmarkBtn,X=void 0===W||W,Q=e.showShareBtn,Z=void 0===Q||Q,G=e.isNotHandle,ee=void 0===G?{like:!1,hate:!1}:G,te=Object(c["useState"])(j),ae=Object(n["a"])(te,2),ne=ae[0],ce=ae[1],le=Object(c["useState"])(J),ie=Object(n["a"])(le,2),re=ie[0],oe=ie[1],se=Object(c["useState"])(N),me=Object(n["a"])(se,2),de=me[0],ue=me[1],ve=Object(c["useState"])(g),fe=Object(n["a"])(ve,2),be=fe[0],pe=fe[1],Ee=Object(c["useState"])(x),ge=Object(n["a"])(Ee,2),he=ge[0],Oe=ge[1],ye=Object(c["useState"])(!1),je=Object(n["a"])(ye,2),ke=je[0],Ne=je[1],we=Object(c["useState"])(""),xe=Object(n["a"])(we,2),Se=xe[0],Ce=xe[1],_e=Object(c["useState"])(""),Ie=Object(n["a"])(_e,2),De=Ie[0],Re=Ie[1],Te=Object(c["useState"])(""),Be=Object(n["a"])(Te,2),Fe=Be[0],Le=Be[1],Ae=Object(c["useState"])(""),Ue=Object(n["a"])(Ae,2),qe=Ue[0],Me=Ue[1],He=Object(c["useState"])(!1),ze=Object(n["a"])(He,2),Pe=ze[0],Ve=ze[1],$e=Object(c["useRef"])(),Je=Object(c["useRef"])(),Ke=Object(c["useRef"])();Object(c["useEffect"])((function(){pe(g),Oe(x),ce(j),ue(N),oe(J)}),[g,x,j,N,J]),Object(c["useEffect"])((function(){Ce("".concat(window.location.origin).concat(window.location.pathname)),Re("\u3010".concat(C,"\u3011\u5206\u4eab\u81ea @segment_fault\uff0c\u4f20\u9001\u95e8\uff1a")),Le("\u3010".concat(C,"\u3011\u5206\u4eab\u81ea @SegmentFault\uff0c\u4f20\u9001\u95e8\uff1a"))}),[Se]),Object(c["useEffect"])((function(){if(!qe){var e,t=null===(e=document)||void 0===e?void 0:e.querySelector(".qrcode");h.a.toCanvas(t,window.location.href,{margin:0},(function(e,t){Me(t.toDataURL())}))}}),[qe]);var Ye=function(){Object(E["c"])()&&(ee.like?y["m"].confirm({content:"\u4e0d\u80fd\u7ed9\u81ea\u5df1\u70b9\u8d5e"}):U&&"article"===B?y["m"].confirm({content:"\u4f60\u662f\u4f5c\u8005\uff0c\u65e0\u6cd5\u5bf9\u81ea\u5df1\u8fdb\u884c\u6b64\u64cd\u4f5c"}):(Object(b["lb"])({id:t,type:B,is_like:be?0:1}).then((function(e){"article"!==B&&ce(e.votes)})),"article"===B&&ce(be?ne-1:ne+1),pe(!be),re&&oe(!re),D({type:"action/saveLike",payload:{votes:be?ne-1:ne+1,votesState:!be}})))},We=function(){Object(E["c"])()&&Ne(!0)},Xe=function(e){ue(e?de+1:de-1),Oe(e),D({type:"action/saveBookmark",payload:{bookmarks:e?de+1:de-1,bookmarkState:e}})},Qe=function(){Object(E["c"])()&&(ee.hate?y["m"].confirm({content:"\u4e0d\u80fd\u7ed9\u81ea\u5df1\u70b9\u8e29"}):(Object(b["gb"])({id:t,type:B,is_hate:re?0:1}).then((function(e){ce(e.votes)})),oe(!re),Ve(!re),be&&pe(!be)))},Ze=l.a.createElement(i["a"],{id:"popover-basic"},l.a.createElement(i["a"].Content,null,"\u5982\u679c\u8be5\u5185\u5bb9\u6709\u53ef\u6539\u8fdb\u7684\u4f59\u5730\uff0c\u6b22\u8fce\u901a\u8fc7\u8bc4\u8bba\u7ed9\u4f5c\u8005\u5efa\u8bae\u3002"));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"sticky-wrap ".concat(M?"sticky-top":""," functional-area-left d-none d-xl-flex justify-content-center pt-5 ").concat("article"===B?"functional-area-left2":""),style:z},l.a.createElement(r["a"],{vertical:!0,className:"align-items-center"},l.a.createElement(o["a"],{variant:"outline-primary",className:"func-btn mainLike  sflex-center shadow-sm rounded-circle main-".concat(V,"-Like ").concat(Y?"mb-2":"mb-3"),active:be,onClick:Ye,"aria-label":"\u70b9\u8d5e"},l.a.createElement("i",{className:"far fa-thumbs-up"}),"question"===B||"answer"===B?l.a.createElement("span",{className:"mainLikeNum ".concat(0!==ne?"":"invisible")},ne):l.a.createElement("span",{className:"mainLikeNum ".concat(ne>0?"":"invisible")},ne)),Y&&l.a.createElement(s["a"],{trigger:"click",placement:"right",show:Pe,overlay:Ze},l.a.createElement(o["a"],{variant:"outline-secondary",className:"shadow-sm func-btn sflex-center rounded-circle main-".concat(V,"-Like main-hate mb-3"),active:re,onClick:Qe,onBlur:function(){return Ve(!1)},"aria-label":"\u70b9\u8e29"},l.a.createElement("i",{className:"far fa-thumbs-down fa-flip-horizontal"}))),X&&l.a.createElement(o["a"],{variant:"outline-secondary",className:"func-btn sflex-center rounded-circle mb-2",onClick:We,active:he,"aria-label":"\u6536\u85cf"},l.a.createElement("i",{className:"far fa-bookmark"})),L&&l.a.createElement("a",{className:"func-btn sflex-center btn btn-outline-secondary rounded-circle mb-2",href:"#comment-area","aria-label":"\u8bc4\u8bba"},l.a.createElement("i",{className:"far fa-comment-alt-lines"})),Z&&l.a.createElement(m["a"],null,l.a.createElement(m["a"].Toggle,{as:d["a"],className:"func-btn nav-tab-item  rounded-pill btn btn-outline-secondary sflex-center rounded-circle"},l.a.createElement("i",{className:"far fa-share-alt"})),l.a.createElement(m["a"].Menu,{className:"dropdown-menu-down",show:T},l.a.createElement("div",{className:"text-center mt-2"},l.a.createElement("div",{className:"qr"},l.a.createElement("img",{crossOrigin:"anonymous",src:qe,width:"118",height:"118"})),"\u626b\u4e00\u626b\u5206\u4eab"),l.a.createElement("div",{className:"dropdown-divider"}),l.a.createElement(m["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&$e.current.click()}},l.a.createElement(u["a"],{title:Fe,url:Se,image:I,ref:$e,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},l.a.createElement("i",{className:"fab fa-weibo fa-fw"})," \u65b0\u6d6a\u5fae\u535a")),l.a.createElement(m["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&Je.current.click()}},l.a.createElement(v["a"],{title:De,url:Se,ref:Je,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},l.a.createElement("i",{className:"fab fa-twitter fa-fw"})," Twitter")),l.a.createElement(m["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&Ke.current.click()}},l.a.createElement(f["a"],{title:De,url:Se,ref:Ke,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},l.a.createElement("i",{className:"fab fa-facebook fa-fw"})," Facebook")))))),l.a.createElement(p["a"],{id:t,isShow:ke,setShowStatus:Ne,setBookmarkedState:Xe,source:B}),l.a.createElement("canvas",{hidden:!0,className:"qrcode"}))};t["a"]=Object(O["b"])((function(e){var t=e.action;return{action:t}}))(l.a.memo(j))},kwfb:function(e,t,a){"use strict";var n=a("ODXe"),c=a("q1tI"),l=a.n(c),i=function(e){var t=e.name,a=Object(c["useState"])(""),i=Object(n["a"])(a,2),r=i[0],o=i[1];return Object(c["useEffect"])((function(){var e,a=null;(null===(e=window.OA_output)||void 0===e?void 0:e[t])&&clearInterval(a),a=setInterval((function(){var e,n;(null===(e=window.OA_output)||void 0===e?void 0:e[t])&&((null===(n=window.OA_output)||void 0===n?void 0:n[t])&&clearInterval(a),o(window.OA_output[t]))}))}),[]),Object(c["useEffect"])((function(){r&&r.indexOf("adsbygoogle")>-1&&(window.adsbygoogle=window.adsbygoogle||[]).push({})}),[r]),l.a.createElement("div",{id:"OA_holder_".concat(t),className:"ad-container",style:{display:"block"},dangerouslySetInnerHTML:{__html:r}})};t["a"]=i},nWVH:function(e,t,a){},nlcd:function(e,t,a){"use strict";var n=a("EVdn");t["a"]=function(){var e='\n  <div class="is-active ImageView p-4" style="display: none;">\n      <div class="ImageView-inner" style="overflow: auto;">\n          <img src="" class="ImageView-img" alt="preview" style="max-width: 100%">\n      </div>\n  </div>';n("body ImageView")&&n(".ImageView").remove(),n("body").append(e).on("click",".ImageView",(function(){n(this).fadeOut()})).on("click","article img",(function(){var e=n(this).attr("src");n(this).parents("a").length||(e.startsWith("/img/")&&!e.match(/\/view$/)&&(e+="/view"),n(".ImageView").find("img").attr("src",e)[0].onload=function(){n(".ImageView").fadeIn()})}))}},oGiJ:function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),c=a.n(n),l=a("HaE+"),i=a("VTBJ"),r=a("ODXe"),o=a("q1tI"),s=a.n(o),m=a("7vrA"),d=a("3Z9Z"),u=a("JI6e"),v=a("TUci"),f=a("kUPb"),b=a("6xyR"),p=a("HToz"),E=a.n(p),g=a("dDCJ"),h=a("AINe"),O=a("Wgwc"),y=a.n(O),j=a("Dp36"),k=a("QgiU"),N=a.n(k),w=(a("pHGr"),a("bdvc"));y.a.locale("zh-cn"),y.a.extend(N.a);var x=function(e){var t,a,n,c,l,i,r,o=e.title,m=e.user,d=e.id,u=e.created,v=e.modified,f=e.initPage,b=e.actions,p=e.member_actions,E=function(){(null===b||void 0===b?void 0:b.find((function(e){return"recommend"===e.action})))?Object(j["i"])(d).then((function(e){e&&(null===f||void 0===f||f())})):Object(j["e"])(d).then((function(e){e&&(null===f||void 0===f||f())}))};return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"h2 mb-3"},s.a.createElement("a",{href:"/a/".concat(d),className:"text-body"},o)),s.a.createElement("div",{className:"d-flex align-items-center mb-4"},s.a.createElement("a",{href:null===m||void 0===m?void 0:m.url,className:"d-flex align-items-center"},s.a.createElement("picture",{className:"mr-2 d-sm-block d-none"},s.a.createElement("img",{src:(null===m||void 0===m?void 0:m.avatar_url)||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",alt:"",className:"d-inline-block rounded-circle",width:"32"})),s.a.createElement("strong",{className:"align-self-center font-size-14"},null===m||void 0===m?void 0:m.name)),(null===m||void 0===m||null===(t=m.user_auth)||void 0===t?void 0:t.is_auth)?s.a.createElement("ul",{className:"list-inline mb-0 authentication-info sflex-center font-size-14 ml-1"},s.a.createElement("li",{className:"list-inline-item",style:{color:"#BF7158"}},s.a.createElement(g["a"],{placement:"top",overlay:s.a.createElement(h["a"],{id:"top"},s.a.createElement("span",{className:""},null===m||void 0===m||null===(a=m.user_auth)||void 0===a?void 0:a.info))},s.a.createElement("i",{className:"fas fa-badge-check text-warning"})))):null,u!==v&&v>u?s.a.createElement(g["a"],{placement:"top",overlay:s.a.createElement(h["a"],{id:"top"},s.a.createElement("span",{className:""},"\u66f4\u65b0\u4e8e ",Object(w["c"])(v)))},s.a.createElement("time",{className:"text-secondary font-size-14",dateTime:y.a.unix(u).toISOString(),itemProp:"datePublished",style:{marginLeft:"12px"}},"\u53d1\u5e03\u4e8e ",Object(w["c"])(u))):s.a.createElement("time",{className:"text-secondary font-size-14",dateTime:y.a.unix(u).toISOString(),itemProp:"datePublished",style:{marginLeft:"12px"}},"\u53d1\u5e03\u4e8e ",Object(w["c"])(u)),(null===p||void 0===p||null===(n=p.find((function(e){return"edit"===e.action})))||void 0===n?void 0:n.name)?s.a.createElement("a",{href:"/a/".concat(d,"/edit"),className:"font-size-14",style:{marginLeft:"12px"}},"\u7f16\u8f91"):null,(null===b||void 0===b||null===(c=b.find((function(e){return"recommend"===e.action})))||void 0===c?void 0:c.name)||(null===b||void 0===b||null===(l=b.find((function(e){return"cancel-recommend"===e.action})))||void 0===l?void 0:l.name)?s.a.createElement("a",{href:"#",className:"font-size-14",onClick:E,style:{marginLeft:"12px"}},(null===b||void 0===b||null===(i=b.find((function(e){return"recommend"===e.action})))||void 0===i?void 0:i.name)||(null===b||void 0===b||null===(r=b.find((function(e){return"cancel-recommend"===e.action})))||void 0===r?void 0:r.name)):null))},S=x,C=a("tSvB"),_=a("4GjR"),I=a("9kvl"),D=(a("5SRE"),function(e){var t=e.realRed,a=void 0===t?0:t,n=e.read,c=void 0===n?0:n,l=e.created,i=void 0===l?0:l,r=e.modified,o=void 0===r?0:r,m=e.id,v=e.actions,f=void 0===v?[]:v,b=e.initPage,p=e.isEditor,E=e.memberActions,O=Object(I["g"])(),j=function(){O({type:"global/saveSingleNotice",payload:""})},k=function(e,t){switch(window.scroll(0,0),t){case"report":C["m"].confirm({content:"string"===typeof e?e:"\u4e3e\u62a5\u6210\u529f"});break;case"hide-setting":case"delete":O({type:"global/saveSingleNotice",payload:"string"===typeof e?e:""}),null===b||void 0===b||b();break;case"reject":j(),null===b||void 0===b||b();break;default:"string"===typeof e&&O({type:"global/saveSingleNotice",payload:"string"===typeof e?e:""}),null===b||void 0===b||b();break}};return s.a.createElement(s.a.Fragment,null,s.a.createElement(d["a"],{className:"text-secondary font-size-14 mt-3 mb-5 d-flex justify-content-between"},s.a.createElement(u["a"],null,s.a.createElement("span",null,"\u9605\u8bfb ",Object(w["f"])(c),p&&a>0&&"\uff08UV ".concat(Object(w["f"])(a),"\uff09")),s.a.createElement("span",{className:"split-dot"}),i!==o&&o>i?s.a.createElement(g["a"],{placement:"top",overlay:s.a.createElement(h["a"],{id:"tip-top"},"\u53d1\u5e03\u4e8e ",s.a.createElement("span",null,Object(w["c"])(i)))},s.a.createElement("time",{dateTime:y.a.unix(i).toISOString(),itemProp:"datePublished"},"\u66f4\u65b0\u4e8e ",Object(w["c"])(o))):s.a.createElement("time",{dateTime:y.a.unix(i).toISOString(),itemProp:"datePublished"},"\u53d1\u5e03\u4e8e ",Object(w["c"])(i))),s.a.createElement(u["a"],{className:"operation col-6 text-right col-xs-3"},s.a.createElement(_["a"],{id:m,actions:f,type:"article",onCallBack:k,member_actions:E}))))}),R=s.a.memo(D),T=a("pJDg"),B=a("cWnB"),F=a("97+O"),L=a("24g8"),A=a("QeUd"),U=a("aWbt"),q=a("wFk/"),M=a("6Yt9"),H=a("0FX9"),z=a.n(H),P=a("YdHu"),V=(a("78gL"),function(e){var t=e.id,a=e.isLiked,n=void 0!==a&&a,c=e.votes,l=void 0===c?0:c,i=e.isBookmarked,m=void 0!==i&&i,d=e.bookmarks,u=void 0===d?0:d,v=e.title,f=void 0===v?"":v,b=e.banner,p=void 0===b?"":b,E=e.isAuthor,g=e.dispatch,h=Object(o["useState"])(l),O=Object(r["a"])(h,2),y=O[0],k=O[1],N=Object(o["useState"])(u),w=Object(r["a"])(N,2),x=w[0],S=w[1],_=Object(o["useState"])(n),I=Object(r["a"])(_,2),D=I[0],R=I[1],H=Object(o["useState"])(m),V=Object(r["a"])(H,2),$=V[0],J=V[1],K=Object(o["useState"])(!1),Y=Object(r["a"])(K,2),W=Y[0],X=Y[1],Q=Object(o["useState"])(""),Z=Object(r["a"])(Q,2),G=Z[0],ee=Z[1],te=Object(o["useState"])(""),ae=Object(r["a"])(te,2),ne=ae[0],ce=ae[1],le=Object(o["useState"])(""),ie=Object(r["a"])(le,2),re=ie[0],oe=ie[1],se=Object(o["useState"])(""),me=Object(r["a"])(se,2),de=me[0],ue=me[1],ve=Object(o["useRef"])(),fe=Object(o["useRef"])(),be=Object(o["useRef"])();Object(o["useEffect"])((function(){R(n),J(m),k(l),S(u)}),[n,m,l,u]),Object(o["useEffect"])((function(){ee("".concat(window.location.origin).concat(window.location.pathname)),ce("\u3010".concat(f,"\u3011\u5206\u4eab\u81ea @segment_fault\uff0c\u4f20\u9001\u95e8\uff1a")),oe("\u3010".concat(f,"\u3011\u5206\u4eab\u81ea @SegmentFault\uff0c\u4f20\u9001\u95e8\uff1a"))}),[G]),Object(o["useEffect"])((function(){if(!de){var e,t=null===(e=document)||void 0===e?void 0:e.querySelector(".qrcode");z.a.toCanvas(t,window.location.href,{margin:0},(function(e,t){ue(t.toDataURL())}))}}),[de]);var pe=function(){Object(M["c"])()&&(E?C["m"].confirm({content:"\u4f60\u662f\u4f5c\u8005\uff0c\u65e0\u6cd5\u5bf9\u81ea\u5df1\u8fdb\u884c\u6b64\u64cd\u4f5c"}):(Object(j["lb"])({id:t,type:"article",is_like:D?0:1}),k(D?y-1:y+1),R(!D),g({type:"action/saveLike",payload:{votes:D?y-1:y+1,votesState:!D}})))},Ee=function(){Object(M["c"])()&&X(!0)},ge=function(e){S(e?x+1:x-1),J(e),g({type:"action/saveBookmark",payload:{bookmarks:e?x+1:x-1,bookmarkState:e}})};return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"functional-area-bottom text-center"},s.a.createElement(T["a"],{className:"btn-group like-group align-items-center",role:"group"},s.a.createElement(B["a"],{className:"btn mr-2 rounded",variant:"outline-primary",active:D,onClick:pe},s.a.createElement("i",{className:"far fa-thumbs-up"}),s.a.createElement("span",{className:"ml-1"},D?"\u5df2\u8d5e":"\u8d5e"),y>0&&s.a.createElement("span",{className:"mainLikeNum ml-1"},y)),s.a.createElement(B["a"],{className:"btn mr-2 rounded",variant:"outline-secondary",active:$,onClick:Ee},s.a.createElement("i",{className:"far fa-bookmark"}),s.a.createElement("span",{className:"ml-1"},$?"\u5df2\u6536\u85cf":"\u6536\u85cf"),x>0&&s.a.createElement("span",{className:"ml-1"},x)),s.a.createElement(F["a"],{className:"bottom-share-wrap"},s.a.createElement(F["a"].Toggle,{as:P["a"],className:"nav-tab-item  btn d-flex justify-content-center align-items-center"},s.a.createElement(B["a"],{className:"btn rounded",variant:"outline-secondary",active:!1},s.a.createElement("i",{className:"far fa-share-alt"}),s.a.createElement("span",{className:"ml-1"},"\u5206\u4eab"))),s.a.createElement(F["a"].Menu,{className:"dropdown-menu-down"},s.a.createElement("div",{className:"text-center mt-2",style:{cursor:"auto"}},s.a.createElement("div",{className:"qr"},s.a.createElement("img",{crossOrigin:"anonymous",src:de,width:"118",height:"118"})),"\u626b\u4e00\u626b\u5206\u4eab"),s.a.createElement("div",{className:"dropdown-divider"}),s.a.createElement(F["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&ve.current.click()}},s.a.createElement(L["a"],{title:re,url:G,image:p,ref:ve,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},s.a.createElement("i",{className:"fab fa-weibo fa-fw"})," \u65b0\u6d6a\u5fae\u535a")),s.a.createElement(F["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&fe.current.click()}},s.a.createElement(A["a"],{title:ne,url:G,ref:fe,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},s.a.createElement("i",{className:"fab fa-twitter fa-fw"})," Twitter")),s.a.createElement(F["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&be.current.click()}},s.a.createElement(U["a"],{title:ne,url:G,ref:be,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},s.a.createElement("i",{className:"fab fa-facebook fa-fw"})," Facebook")))))),s.a.createElement(q["a"],{id:t,isShow:W,setShowStatus:X,setBookmarkedState:ge,source:"article"}),s.a.createElement("canvas",{hidden:!0,className:"qrcode"}))}),$=Object(I["b"])((function(e){var t=e.action;return Object(i["a"])({},t)}))(s.a.memo(V)),J=function(e){var t=e.type,a=e.licence;return s.a.createElement("div",{className:"font-size-14 text-secondary text-center mt-3 mb-5"},(0===t||1===t)&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",null,"\u672c\u4f5c\u54c1\u7cfb\u539f\u521b\uff0c"),"sa"===a?s.a.createElement("a",{target:"_blank",rel:"noreferrer",className:"text-secondary",href:"https://creativecommons.org/licenses/by-nc-sa/4.0/"},"\u91c7\u7528\u300a\u7f72\u540d-\u975e\u5546\u4e1a\u6027\u4f7f\u7528-\u76f8\u540c\u65b9\u5f0f\u5171\u4eab 4.0 \u56fd\u9645\u300b\u8bb8\u53ef\u534f\u8bae"):"nd"===a?s.a.createElement("a",{target:"_blank",rel:"noreferrer",className:"text-secondary",href:"https://segmentfault.com/tos#sec-licence-4"},"\u4f5c\u8005\u4fdd\u7559\u6240\u6709\u6743\u5229\uff0c\u672a\u7ecf\u4f5c\u8005\u5141\u8bb8\uff0c\u7981\u6b62\u8f6c\u8f7d\u548c\u6f14\u7ece"):s.a.createElement("a",{target:"_blank",rel:"noreferrer",className:"text-secondary",href:"https://creativecommons.org/licenses/by-nc-nd/4.0/"},"\u91c7\u7528\u300a\u7f72\u540d-\u975e\u5546\u4e1a\u6027\u4f7f\u7528-\u7981\u6b62\u6f14\u7ece 4.0 \u56fd\u9645\u300b\u8bb8\u53ef\u534f\u8bae")))},K=s.a.memo(J),Y=a("kwfb"),W=function(e){var t=e.originUrl,a=void 0===t?"":t,n=e.type;return s.a.createElement("div",{className:"bg-light my-4 p-3"},s.a.createElement("a",{className:"d-flex align-items-center text-body",href:a,target:"_blank",rel:"noreferrer"},s.a.createElement("div",{className:"d-flex align-items-center bg-secondary justify-content-center mr-3 rounded px-3",style:{width:"48px",height:"48px"}},s.a.createElement("i",{className:"far fa-file-alt font-size-20 text-white"})),s.a.createElement("div",{className:"media-body w-100"},s.a.createElement("div",{className:"text-body mb-0 font-weight-bold"},s.a.createElement("span",{style:{color:"#000"}},"\u672c\u6587\u7cfb",2===n?"\u8f6c\u8f7d":"\u7ffb\u8bd1","\uff0c\u9605\u8bfb\u539f\u6587")),s.a.createElement("div",{className:"font-size-13 text-secondary text-truncate w-75"},s.a.createElement("small",{style:{wordBreak:"break-word"}},a)))))},X=s.a.memo(W),Q=function(e){var t=e.tags,a=void 0===t?[]:t,n=(null===a||void 0===a?void 0:a.length)>0?s.a.createElement("div",{className:"d-sm-flex d-none flex-wrap align-items-center"},s.a.createElement("div",{className:"m-n1"},a.map((function(e){return s.a.createElement("a",{href:e.url,className:"m-1 badge-tag",key:e.id},(null===e||void 0===e?void 0:e.iconUrl)&&s.a.createElement("img",{src:e.iconUrl,alt:"",width:"16",height:"16",className:"mr-1"}),e.name)})))):null;return n},Z=s.a.memo(Q),G=a("EVdn"),ee=a("wwbV"),te=function(e){var t=e.blog,a=Object(o["useState"])((null===t||void 0===t?void 0:t.is_followed)||0),n=Object(r["a"])(a,2),i=n[0],m=n[1],d=function(){var e=Object(l["a"])(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Object(M["c"])()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Object(j["B"])({id:t.id,is_follow:i?0:1});case 4:return m(!i),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o["useEffect"])((function(){G(document.body).width()<576&&G("#followUser button").addClass("col-12"),G(window).resize((function(){G(document.body).width()<576?G("#followUser button").addClass("col-12"):G("#followUser button").removeClass("col-12")}))})),s.a.createElement(s.a.Fragment,null,s.a.createElement("hr",{className:"mb-0"}),s.a.createElement("div",{className:"d-flex flex-sm-row align-items-center pt-4 row"},s.a.createElement("div",{className:"d-flex align-items-center flex-grow-1 author-left col-sm-9 col-12"},s.a.createElement("img",{className:"mr-3 rounded",width:"64",src:"https://image-static.segmentfault.com/383/303/3833030929-5ffd15fc110ab","aria-hidden":"true"}),s.a.createElement("div",{className:"w-100"},s.a.createElement("a",{href:null===t||void 0===t?void 0:t.url,className:"text-body"},s.a.createElement("h5",{className:"mb-0"},null===t||void 0===t?void 0:t.name)),(null===t||void 0===t?void 0:t.excerpt)&&s.a.createElement("div",{className:"text-truncate text-secondary mt-2"},null===t||void 0===t?void 0:t.excerpt))),s.a.createElement("div",{className:"author-right flex-shrink-0 col-sm-3 col-12 text-sm-right text-left mt-sm-0 mt-3",id:"followUser"},s.a.createElement(ee["a"],{onClick:d},i?"\u5df2\u5173\u6ce8":"\u5173\u6ce8\u4e13\u680f"))))},ae=s.a.memo(te),ne=a("LvDl"),ce=function(e){var t,n,c=e.detail,l=e.actionData,i=e.actions,m=e.initPage,d=e.imageUrl,u=e.isEditor,v=e.isAuthor,f=e.memberActions,p=e.articleHtml,g=Object(o["useState"])(""),h=Object(r["a"])(g,2),O=h[0],j=h[1],k=c.article,N=c.blog,w=Object(o["useState"])(!1),x=Object(r["a"])(w,2),C=x[0],_=x[1],D=Object(o["useState"])(Object(I["e"])()?(null===(t=document.querySelector(".article.fmt"))||void 0===t?void 0:t.innerHTML)||k.parsed_text:p),T=Object(r["a"])(D,2),B=T[0],F=T[1],L=Object(I["g"])();Object(I["e"])()&&!C&&(window.articleHtml=(null===(n=document.querySelector(".article.fmt"))||void 0===n?void 0:n.innerHTML)||"");return Object(o["useEffect"])((function(){if(!Object(ne["isEmpty"])(c)){var e=new E.a;e.update()}})),Object(o["useEffect"])((function(){_(!0),j(window.publicPath||""),L({type:"articleDetail/saveArticleHtml",payload:{id:k.id,parsed_text:window.articleHtml}})}),[]),Object(o["useEffect"])((function(){k.parsed_text&&F(k.parsed_text)}),[k.parsed_text]),Object(o["useEffect"])((function(){if(!Object(ne["isEmpty"])(c)){var e=new E.a;e.update()}})),s.a.createElement(s.a.Fragment,null,s.a.createElement(I["a"],null,s.a.createElement("meta",{name:"twitter:card",content:d?"summary_large_image":"summary"}),s.a.createElement("meta",{name:"twitter:image",content:d||"".concat(O,"touch-icon.png")}),s.a.createElement("meta",{name:"twitter:site",content:"@segment_fault"}),s.a.createElement("meta",{name:"twitter:creator",content:"@segmentfault"}),s.a.createElement("meta",{name:"twitter:title",content:null===k||void 0===k?void 0:k.title}),s.a.createElement("meta",{name:"og:type",content:"article"}),s.a.createElement("meta",{name:"og:image",content:d||"".concat(O,"touch-icon.png")}),s.a.createElement("meta",{name:"og:title",content:null===k||void 0===k?void 0:k.title}),s.a.createElement("meta",{name:"msvalidate.01",content:"2C018C53297C8388F3E7052F5E9CA6AF"}),s.a.createElement("meta",{name:"event-object",value:'{"current": ["article", ["'.concat(null===k||void 0===k?void 0:k.id,'"]], "root": ["article", "').concat(null===k||void 0===k?void 0:k.id,'"]}'),id:"SFEventObject"}),s.a.createElement("script",{type:"application/ld+json"},'{\n            "@context": "https://schema.org",\n            "@type": "Article",\n            "mainEntityOfPage": {\n              "@type": "WebPage",\n              "@id": "https://google.com/article"\n            },\n            "name": '.concat(JSON.stringify((null===k||void 0===k?void 0:k.title)||""),',\n            "headline": ').concat(JSON.stringify((null===k||void 0===k?void 0:k.title)||""),',\n            "image": "').concat((null===k||void 0===k?void 0:k.cover)?null===k||void 0===k?void 0:k.cover:d||"".concat(O,"touch-icon.png"),'",\n            "datePublished": "').concat(y.a.unix(null===k||void 0===k?void 0:k.created).toISOString(),'",\n            "dateModified": "').concat(y.a.unix((null===k||void 0===k?void 0:k.created)>(null===k||void 0===k?void 0:k.modified)?null===k||void 0===k?void 0:k.created:null===k||void 0===k?void 0:k.modified).toISOString(),'",\n            "url": "https://segmentfault.com/a/').concat(null===k||void 0===k?void 0:k.id,'",\n            "author": {\n              "@type": "Person",\n              "name": ').concat(JSON.stringify(null===k||void 0===k?void 0:k.user.name),'\n            },\n            "publisher": {\n              "@type": "Organization",\n              "name": "SegmentFault",\n              "logo": {\n                "@type": "ImageObject",\n                "url":\n                  "https://assets.segmentfault.com/v-5fc4b0b2/global/img/static/touch-icon.png"\n              }\n            }\n          }'))),s.a.createElement(b["a"],{className:"border-0 mb-4"},(null===k||void 0===k?void 0:k.cover)&&s.a.createElement(b["a"].Img,{variant:"top",src:a("xQMv"),className:"w-100 rounded-top",style:{background:"no-repeat center url(".concat(k.cover,")"),backgroundSize:"cover"},alt:"\u5934\u56fe"}),s.a.createElement(b["a"].Body,{className:"p-lg-30 position-relative"},s.a.createElement(S,{title:null===k||void 0===k?void 0:k.title,user:null===k||void 0===k?void 0:k.user,id:null===k||void 0===k?void 0:k.id,created:null===k||void 0===k?void 0:k.created,modified:null===k||void 0===k?void 0:k.modified,initPage:m,actions:i,member_actions:f}),s.a.createElement(Y["a"],{name:"25"}),s.a.createElement("article",{className:"article fmt article-content ",dangerouslySetInnerHTML:{__html:B}}),s.a.createElement(Z,{tags:null===k||void 0===k?void 0:k.tags}),(null===k||void 0===k?void 0:k.article_type)>1&&s.a.createElement(X,{originUrl:null===k||void 0===k?void 0:k.origin_url,type:null===k||void 0===k?void 0:k.article_type}),s.a.createElement("div",{className:"my-4"},s.a.createElement(Y["a"],{name:"3"})),s.a.createElement(R,{realRed:null===k||void 0===k?void 0:k.real_unique_views,read:null===k||void 0===k?void 0:k.real_views,created:null===k||void 0===k?void 0:k.created,modified:null===k||void 0===k?void 0:k.modified,id:null===k||void 0===k?void 0:k.id,actions:i,initPage:m,isEditor:u,memberActions:f}),s.a.createElement($,{id:null===k||void 0===k?void 0:k.id,title:null===k||void 0===k?void 0:k.title,votes:null===l||void 0===l?void 0:l.votes,isLiked:null===l||void 0===l?void 0:l.votesState,isBookmarked:null===l||void 0===l?void 0:l.bookmarkState,bookmarks:null===l||void 0===l?void 0:l.bookmarks,banner:null===k||void 0===k?void 0:k.cover,isAuthor:v}),s.a.createElement(K,{type:null===k||void 0===k?void 0:k.article_type,licence:null===N||void 0===N?void 0:N.licence}),(null===N||void 0===N?void 0:N.id)&&s.a.createElement(ae,{blog:N}))))},le=s.a.memo(ce),ie=a("cor7"),re=a("sjrs"),oe=function(e){var t,a=e.data;return s.a.createElement("a",{className:"list-group-item list-group-item-action py-3",href:"".concat(null===a||void 0===a?void 0:a.url,"?utm_source=sf-related"),target:"_blank"},s.a.createElement("h5",{className:"h5 mb-2 text-break",style:{color:"#212529"}},null===a||void 0===a?void 0:a.title),s.a.createElement("p",{className:"mb-2 text-truncate text-secondary"},null===a||void 0===a?void 0:a.excerpt),s.a.createElement("p",{className:"d-flex align-items-center font-size-14 mb-0"},s.a.createElement("span",{className:"text-primary"},null===a||void 0===a||null===(t=a.user)||void 0===t?void 0:t.name),(null===a||void 0===a?void 0:a.views)>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"split-dot"}),s.a.createElement("span",null,"\u9605\u8bfb ",Object(w["f"])(null===a||void 0===a?void 0:a.views))),(null===a||void 0===a?void 0:a.votes)>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"split-dot"}),s.a.createElement("span",null,Object(w["f"])(null===a||void 0===a?void 0:a.votes)," \u8d5e")),(null===a||void 0===a?void 0:a.comments)>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"split-dot"}),s.a.createElement("span",null,Object(w["f"])((null===a||void 0===a?void 0:a.comments)||0)," \u8bc4\u8bba"))))},se=s.a.memo(oe),me=(a("wroQ"),function(e){var t=e.list,a=void 0===t?[]:t;return a.length?s.a.createElement(re["a"],{className:"recommend-list-wrap mt-4"},s.a.createElement("h5",{className:"h5 mb-2 px-4 px-md-0",style:{fontWeight:600}},"\u63a8\u8350\u9605\u8bfb"),s.a.createElement("div",{className:"card border-0"},s.a.createElement("div",{className:"list-group list-group-flush"},a.map((function(e){return s.a.createElement(se,{key:null===e||void 0===e?void 0:e.id,data:e})}))))):null}),de=s.a.memo(me),ue=a("6T2I"),ve=function(e){var t,a,n,c,l,i,r,o=e.id,m=e.extra,d=e.status,u=e.sessionUser,f=void 0===u?{}:u;return s.a.createElement(s.a.Fragment,null,"rejected"===d&&s.a.createElement(v["a"],{className:"mb-3",variant:"warning"},s.a.createElement("div",{className:""},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:m.reason}}),s.a.createElement("div",null,s.a.createElement("span",null,"\u4f60\u53ef\u4ee5"),s.a.createElement("a",{href:"/a/".concat(o,"/edit")}," \u518d\u6b21\u7f16\u8f91 "),s.a.createElement("span",null,"\u4ee5\u91cd\u65b0\u53d1\u8868"))),s.a.createElement("div",{className:"mt-3"},"\u6ce8\u610f\uff1a\u5982\u679c\u8be5\u5185\u5bb9"),s.a.createElement("ul",null,s.a.createElement("li",null,"\u8fde\u7eed 3 \u6b21\u53d1\u8868\u672a\u901a\u8fc7"),s.a.createElement("li",null,"\u53d1\u8868\u672a\u6210\u529f\u4e00\u5468\u5185\u672a\u505a\u4efb\u4f55\u6539\u52a8")),s.a.createElement("div",{className:"mt-3"},"\u90fd\u5c06\u88ab\u7cfb\u7edf\u81ea\u52a8\u5220\u9664\uff0c\u5982\u6709\u5fc5\u8981\uff0c\u8bf7\u505a\u597d\u5907\u4efd\u3002")),"deleted"===d&&s.a.createElement(v["a"],{className:"mb-3",variant:"warning"},s.a.createElement("span",{dangerouslySetInnerHTML:{__html:m.reason}}),s.a.createElement("div",null,"\u64cd\u4f5c\u8005\uff1a",s.a.createElement("a",{href:null===m||void 0===m||null===(t=m.operator)||void 0===t?void 0:t.url},null===m||void 0===m||null===(a=m.operator)||void 0===a?void 0:a.name))),"hidden"===d&&(null===f||void 0===f||null===(n=f.roles)||void 0===n?void 0:n.is_editor)&&s.a.createElement(v["a"],{className:"mb-3",variant:"warning"},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:m.reason}}),(null===m||void 0===m?void 0:m.operator)?s.a.createElement("div",null,"\u64cd\u4f5c\u8005\uff1a",s.a.createElement("a",{href:null===m||void 0===m||null===(c=m.operator)||void 0===c?void 0:c.url},null===m||void 0===m||null===(l=m.operator)||void 0===l?void 0:l.name)):""),"locked"===d&&s.a.createElement(v["a"],{className:"mb-3",variant:"warning"},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:m.reason}}),s.a.createElement("div",null,"\u64cd\u4f5c\u8005\uff1a",s.a.createElement("a",{href:null===m||void 0===m||null===(i=m.operator)||void 0===i?void 0:i.url},null===m||void 0===m||null===(r=m.operator)||void 0===r?void 0:r.name),s.a.createElement("br",null),"\u64cd\u4f5c\u8005\u65f6\u95f4\uff1a",y.a.unix(null===m||void 0===m?void 0:m.operator_time).format("YYYY-MM-DD HH:MM"))))},fe=ve,be=function(e){var t,a,n,i=e.user,m=Object(o["useState"])(null===i||void 0===i?void 0:i.is_followed),d=Object(r["a"])(m,2),u=d[0],v=d[1],f=Object(o["useState"])(null===i||void 0===i?void 0:i.followers),p=Object(r["a"])(f,2),E=p[0],g=p[1],h=function(){var e=Object(l["a"])(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Object(M["c"])()){e.next=2;break}return e.abrupt("return",!1);case 2:return Object(j["C"])({id:i.id,is_follow:u?0:1}).then((function(e){g((null===e||void 0===e?void 0:e.is_followed)?E+1:E-1),v(null===e||void 0===e?void 0:e.is_followed)})),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(b["a"],{className:"mb-4 border-0"},s.a.createElement(b["a"].Body,null,s.a.createElement("div",{className:"d-flex align-items-center mb-3"},s.a.createElement("picture",{className:"rounded-circle mr-3"},s.a.createElement("img",{src:(null===i||void 0===i?void 0:i.avatar_url)||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",alt:"avatar",width:"64",height:"64",className:"rounded-circle"})),s.a.createElement("div",null,s.a.createElement("h5",{className:"mb-0"},s.a.createElement("a",{href:null===i||void 0===i?void 0:i.url,className:"text-body"},null===i||void 0===i?void 0:i.name)),Boolean(null===i||void 0===i||null===(t=i.user_auth)||void 0===t?void 0:t.is_auth)&&(null===i||void 0===i||null===(a=i.user_auth)||void 0===a?void 0:a.info)&&s.a.createElement("div",{className:"mt-2 font-size-14 authentication-info"},s.a.createElement("i",{className:"mr-1 text-warning fas fa-badge-check"}),null===i||void 0===i||null===(n=i.user_auth)||void 0===n?void 0:n.info))),(null===i||void 0===i?void 0:i.excerpt)&&s.a.createElement("div",{className:"text-secondary text-truncate-2 userExcerpt mb-3",dangerouslySetInnerHTML:{__html:null===i||void 0===i?void 0:i.excerpt}}),s.a.createElement("div",{className:"d-flex align-items-center mb-3"},s.a.createElement("div",{className:"mr-4"},s.a.createElement("strong",null,null===i||void 0===i?void 0:i.rankWord),s.a.createElement("span",{className:"text-secondary"}," \u58f0\u671b")),s.a.createElement("div",null,s.a.createElement("strong",null,Object(w["f"])(E)||0),s.a.createElement("span",{className:"text-secondary"}," \u7c89\u4e1d"))),s.a.createElement(ee["a"],{block:!0,variant:"primary",onClick:h},u?"\u5df2\u5173\u6ce8":"\u5173\u6ce8\u4f5c\u8005")))},pe=s.a.memo(be),Ee=a("DZHF"),ge=(a("47/0"),function(e){var t=e.onOpen,a=Object(o["useState"])(void 0),n=Object(r["a"])(a,2),c=n[0],l=n[1],i=function(e){e?(l(90),t&&t("open")):(l(void 0),t&&t("close"))};return s.a.createElement(Ee["a"],{onSelect:i,"data-article-nav":!0},s.a.createElement(b["a"],{className:"border-0 overflow-hidden d-none d-xl-flex"},s.a.createElement(b["a"].Body,null,s.a.createElement(Ee["a"].Toggle,{as:P["a"],eventKey:"1",domType:"div"},s.a.createElement("h6",{className:"nav-header h6 p-0 m-0"},s.a.createElement("i",{className:"fas fa-play fa-rotate-".concat(c)}),s.a.createElement("span",null," \u76ee\u5f55"))),s.a.createElement(Ee["a"].Collapse,{eventKey:"1",id:"collapseTarget"},s.a.createElement("nav",{id:"article-nav-list",className:"d-flex flex-column font-size-14","data-article-nav-list":!0})))))}),he=s.a.memo(ge),Oe=a("1OyB"),ye=a("vuIU"),je=(a("2EET"),function(){function e(t,a){Object(Oe["a"])(this,e),this.$parent=void 0,this.$article=void 0,this.$headList=void 0,this.$parent=t,this.$article=a,this.init()}return Object(ye["a"])(e,[{key:"buildNavTitle",value:function(){var e,t,a=this;for(t=1;t<=3;t++)if(this.$article.find("h"+t).length){e=3===t?this.$article.find("h"+t):this.$article.find("h".concat(t,", h").concat(t+1));break}var n=0,c=0;return e&&e.length&&e.each((function(e,l){l.nodeName.substr(1,1)==t?(n++,G(l).attr("id","item-".concat(n)),a.$parent.append('<a class="nav-link text-secondary p-0 my-1 text-truncate" scroll-href="#item-'.concat(n,'" href="javascript:;">').concat(G(l).text(),"</a>"))):(c++,G(l).attr("id","item-".concat(n,"-").concat(c)),a.$parent.append('<a class="nav-link text-secondary py-0 pr-0 my-1 text-truncate" scroll-href="#item-'.concat(n,"-").concat(c,'" href="javascript:;">').concat(G(l).text(),"</a>")))})),!!(e&&e.length>5)&&!!e}},{key:"init",value:function(){if(this.$parent){var e=this.buildNavTitle();if(e){if(this.$parent.parents("div[data-article-nav]").show(),this.$parent.find("a").length>10){var t=a("qAqF");t.initEl(this.$parent[0])}G(document).on("click","[data-article-nav] a",(function(){var e,t=G(this).attr("scroll-href");G("div[data-article-nav] a").addClass("text-secondary"),G(this).removeClass("text-secondary");var a=null===(e=document.querySelector(t))||void 0===e?void 0:e.offsetTop;window.scrollTo({top:a,behavior:"auto"})}))}else this.$parent.parents("div[data-article-nav]").remove()}}}]),e}()),ke=a("paDM"),Ne=a("YKRR"),we=function(e){var t,a,n,c;if(!(G(document.body).width()<576)){var l=G(window).scrollTop(),i=(null===(t=G("#gridAd"))||void 0===t||null===(a=t.offset())||void 0===a?void 0:a.top)||0,r=G("#gridAd").height(),o=G("#first-ad").height(),s=G("#second-ad").height(),m=G("#author").height(),d=G("#collapseTarget").hasClass("show"),u=G("#sf-header").height()+20,v=(null===(n=document)||void 0===n||null===(c=n.getElementById("footer"))||void 0===c?void 0:c.getBoundingClientRect().top)||0;if(v-50<o+s+m)Object(ne["debounce"])((function(){G("#first-ad").removeClass("data-fix").animate(),G("#cataLog").removeClass("data-fix").css({top:"atuo"}).animate(),G("#author").removeClass("data-fix").css({top:"atuo"}).animate(),G("#second-ad").removeClass("data-fix").css({top:"auto",marginTop:0}).animate()}),200)();else if(l>i+r/2){if("open"===e)return G("#cataLog").addClass("data-fix").css({top:"".concat(u,"px")}),G("#first-ad").removeClass("data-fix").css({top:"auto"}),void G("#second-ad").removeClass("data-fix").css({top:"auto"});if("close"===e)return G("#cataLog").removeClass("data-fix"),G("#first-ad").css({top:"".concat(u+m+20,"px")}).addClass("data-fix"),void G("#second-ad").css({top:"".concat(u+o+m+45,"px")}).addClass("data-fix");d?(G("#author").css({top:"".concat(u+20,"px")}).addClass("data-fix"),G("#cataLog").addClass("data-fix").css({top:"".concat(u+m-4,"px")})):(G("#author").css({top:"".concat(u+20,"px")}).addClass("data-fix"),G("#first-ad").css({top:"".concat(u+m+20,"px")}).addClass("data-fix"),G("#second-ad").css({top:"".concat(u+o+m+45,"px")}).addClass("data-fix"))}else G("#author").removeClass("data-fix").css({top:"atuo"}),G("#first-ad").removeClass("data-fix"),G("#second-ad").removeClass("data-fix").css({top:"auto",marginTop:0}),G("#cataLog").removeClass("data-fix").css({top:"auto"})}},xe=a("nlcd"),Se=(a("SoKV"),a("Ty5D")),Ce=(a("PmrS"),a("PFmq")),_e=a("9F+u"),Ie=a("2CDT"),De=function e(t){var n,c,l,b,p,E=t.artDetail,g=t.action,h=t.match,O=t.dispatch,y=t.sessionUser,k=t.articleRelated,N=Object(Se["j"])(),x=Object(o["useRef"])(null);x.current=null===y||void 0===y||null===(n=y.user)||void 0===n?void 0:n.id;var S=h,C=S.params.aid,_=E[C]||{},D=_.article,R=void 0===D?{}:D,T=_.actions,B=_.extra,F=_.member_actions,L=_.tag,A=void 0===L?{}:L,U=_.description,q=_.keywords,M=g.votes,H=void 0===M?0:M,z=g.votesState,P=g.bookmarks,V=void 0===P?0:P,$=g.bookmarkState,J=(null===y||void 0===y?void 0:y.roles)||{},K=J.is_editor,W=Number(null===R||void 0===R||null===(c=R.user)||void 0===c?void 0:c.id)===(null===y||void 0===y||null===(l=y.user)||void 0===l?void 0:l.id),X=Object(o["useState"])(!1),Q=Object(r["a"])(X,2),Z=Q[0],ee=Q[1],te=Object(o["useState"])(""),ae=Object(r["a"])(te,2),ce=ae[0],re=ae[1],oe=Object(o["useState"])(null),se=Object(r["a"])(oe,2),me=se[0],ve=se[1];Object(o["useEffect"])((function(){Object(ne["isEmpty"])(E[C])&&O({type:"articleDetail/getArtDetail",payload:{aid:C},callback:function(e){"error"===e&&N.replace("/404")}}),O({type:"articleDetail/getRelated",payload:C})}),[C]),Object(o["useEffect"])((function(){if(null===R||void 0===R?void 0:R.tags){var e,t=null===R||void 0===R?void 0:R.tags.map((function(e){return e.name})),a=null===t||void 0===t?void 0:t.join(",");Object(Ie["a"])(a,null===y||void 0===y||null===(e=y.user)||void 0===e?void 0:e.rank)}}),[null===R||void 0===R?void 0:R.tags]);var be=function(){O({type:"articleDetail/getArtDetail",payload:{aid:C},callback:function(){window.scroll(0,0)}})};Object(o["useEffect"])((function(){var e=Object(w["d"])(window.location.href,"openShare");return ee(Boolean("true"===e)),Object(xe["a"])(),window.addEventListener("scroll",(function(){return we("")})),Object(_e["a"])("article"),function(){window.removeEventListener("scroll",(function(){return we("")}))}}),[]),Object(o["useEffect"])((function(){if(!Object(ne["isEmpty"])(R)){var e,t=new URL(window.location.href).searchParams.get("_ea")||"";if(t&&Object(j["fb"])(t).then((function(e){ve(e)})),new je(G("nav[data-article-nav-list]"),G("article.article-content")),Object(I["e"])()&&(O({type:"global/saveTitle",payload:{title:R.title}}),O({type:"global/saveHeadOptions",payload:{keywords:q,description:U}})),Promise.all([a.e(3),a.e(6),a.e(9)]).then(a.bind(null,"0lfv")).then((function(t){var a=t.highlight,n=t.renderMath,c=t.changeSpecialUrl,l=G(".article.fmt");clearTimeout(e),e=setTimeout((function(){a(l)}),1e3),G(".article.fmt").children.length&&(n(l[0]),c(l))})),G(window).resize((function(){G(document.body).width()<576&&G("#first-ad").removeClass("data-fix")})),G(document.body).width()<576)return void G("article.article img").change((function(e){e.each((function(e,t){var a=t.getAttribute("src"),n=t.getAttribute("data-src"),c="";if(a=n||a,a){var l=a.indexOf("?");l>0&&(c=a.substring(l),a=a.substring(0,l)),a.match(/^\/img\//)&&!a.match(/\/view$/)&&(a=a+"/view"+c,t.setAttribute(n?"data-src":"src",a),t.setAttribute("data-src",a))}}))}),(function(e){e.each((function(e,t){var a=t.getAttribute("src"),n=t.getAttribute("data-src"),c="";if(a=n||a,a){var l=a.indexOf("?");l>0&&(c=a.substring(l),a=a.substring(0,l)),a.match(/^\/img\//)&&a.match(/\/view$/)&&(a=a.substring(0,a.length-5)+c,t.setAttribute(n?"data-src":"src",a))}}))}));var n=G("article.article img");if((null===n||void 0===n?void 0:n.length)>0){var c,l=n[0].getAttribute("src"),i=n[0].getAttribute("data-src");l=i||l,l&&!(null===(c=l)||void 0===c?void 0:c.includes("http"))&&(l="".concat(window.location.origin).concat(l)),re(l||"")}}}),[R.id]);var Ee=function(e){we(e);var t=G(window).scrollTop();window.scroll(0,t+2)};return E[C]?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"d-none d-xl-flex justify-content-center"},s.a.createElement(Y["a"],{name:"2"})),s.a.createElement(m["a"],{className:"article-content"},s.a.createElement(ue["a"],{className:"mx-4 mx-md-0",data:[{name:"\u4e13\u680f",url:"/blogs"},Object(i["a"])(Object(i["a"])({},A),{},{url:"".concat(null===A||void 0===A?void 0:A.url,"/blogs")}),{name:"\u6587\u7ae0\u8be6\u60c5",url:"###"}]}),s.a.createElement(d["a"],null,s.a.createElement(u["a"],{className:"col-12 col-xl w-0"},(null===R||void 0===R?void 0:R.status_key)&&(null===B||void 0===B?void 0:B.reason)&&s.a.createElement(fe,{id:C,extra:B,sessionUser:y,status:null===R||void 0===R?void 0:R.status_key}),"deleted"===(null===R||void 0===R?void 0:R.status_key)&&!(null===B||void 0===B?void 0:B.reason)&&s.a.createElement(v["a"],{className:"mb-3",variant:"warning"},s.a.createElement("span",null,"\u8fd9\u7bc7\u6587\u7ae0\u5df2\u88ab\u5220\u9664")),s.a.createElement(f["a"],{id:null===R||void 0===R?void 0:R.id,votes:H,title:null===R||void 0===R?void 0:R.title,isLiked:z,isBookmarked:$,bookmarks:V,showShare:Z,banner:(null===R||void 0===R?void 0:R.cover)||ce,isAuthor:W,source:"article"}),s.a.createElement(le,{detail:E[C],articleHtml:e.articleHtml,actionData:{votes:H,votesState:z,bookmarks:V,bookmarkState:$},actions:T,initPage:be,imageUrl:R.cover,isEditor:K,isAuthor:W,memberActions:F}),s.a.createElement("div",{className:"d-block d-xl-none mt-sm-4"},(null===R||void 0===R||null===(b=R.user)||void 0===b?void 0:b.url)&&s.a.createElement(pe,{user:null===R||void 0===R?void 0:R.user})),s.a.createElement(ie["a"],{id:C,event_object:me,user:R.user}),s.a.createElement(de,{list:k})),s.a.createElement(u["a"],{className:"col-12 col-xl-auto"},s.a.createElement("div",{className:"w-xl-300"},s.a.createElement("div",{className:"w-xl-300 d-none d-xl-block",id:"author"},(null===R||void 0===R||null===(p=R.user)||void 0===p?void 0:p.url)&&s.a.createElement(pe,{user:null===R||void 0===R?void 0:R.user})),s.a.createElement("div",{className:"w-xl-300 mb-4",id:"first-ad"},s.a.createElement("div",{className:"card border-0 overflow-hidden d-none d-xl-flex justify-content-center align-items-center float-ads"},s.a.createElement(Y["a"],{name:"1"}))),s.a.createElement("div",{id:"gridAd",className:"d-none d-xl-block mb-4"},s.a.createElement(ke["a"],null)),s.a.createElement("div",{id:"second-ad",className:"d-none d-xl-block"},s.a.createElement(Y["a"],{name:"31"})),s.a.createElement("div",{id:"cataLog",className:"d-none d-xl-block w-xl-300 mt-4"},s.a.createElement(he,{onOpen:Ee}))))),s.a.createElement(Ne["a"],null))):null};De.getInitialProps=Object(Ce["a"])({requireState:["articleDetail.artDetail"]},function(){var e=Object(l["a"])(c.a.mark((function e(t){var a,n,l,r,o,s,m,d,u;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.store,n=t.match,l=t.isServer,l){e.next=3;break}return e.abrupt("return");case 3:return r=n,o=r.params.aid,e.next=6,Promise.allSettled([a.dispatch({type:"articleDetail/getArtDetail",payload:{aid:o,isServerLoaded:!0}})]);case 6:return Object(ne["isEmpty"])(a.getState().articleDetail.artDetail[o])||(s=a.getState().articleDetail.artDetail[o],m=s.article,d=s.keywords,u=s.description,De.articleHtml=m.parsed_text,a.dispatch({type:"global/saveTitle",payload:{title:m.title}}),a.dispatch({type:"global/saveHeadOptions",payload:{keywords:d,description:u}}),a.dispatch({type:"articleDetail/saveArticleHtml",payload:{id:o,parsed_text:""}})),e.abrupt("return",Object(i["a"])({},a.getState()));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());t["default"]=Object(I["b"])((function(e){var t=e.articleDetail,a=e.action,n=e.global;return Object(i["a"])(Object(i["a"])({},t),{},{action:a,sessionUser:n.sessionUser})}))(De)},paDM:function(e,t,a){"use strict";var n=a("q1tI"),c=a.n(n),l=a("6xyR"),i=(a("nWVH"),a("kwfb")),r=function(){return c.a.createElement(l["a"],{className:"border-0"},c.a.createElement(l["a"].Header,{className:"bg-white border-0"},c.a.createElement("h5",{className:"mb-0"},"\u5ba3\u4f20\u680f")),c.a.createElement(l["a"].Body,null,c.a.createElement("div",{className:"mb-3"},c.a.createElement(i["a"],{name:"7"})),c.a.createElement("div",{className:"mb-3"},c.a.createElement(i["a"],{name:"9"})),c.a.createElement("div",null,c.a.createElement(i["a"],{name:"10"}))))};t["a"]=c.a.memo(r)},rNPM:function(e,t,a){},"wFk/":function(e,t,a){"use strict";var n=a("VTBJ"),c=a("KQm4"),l=a("o0o1"),i=a.n(l),r=a("HaE+"),o=a("ODXe"),s=a("q1tI"),m=a.n(s),d=a("7U2o"),u=a("QojX"),v=a("HRRZ"),f=a("Dp36"),b=a("9kvl"),p=function(e){var t=e.id,a=e.setBookmarkedState,l=e.isShow,b=e.setShowStatus,p=e.sessionUser,E=e.source,g=void 0===E?"":E,h=Object(s["useState"])(!1),O=Object(o["a"])(h,2),y=O[0],j=O[1],k=Object(s["useState"])([]),N=Object(o["a"])(k,2),w=N[0],x=N[1],S=Object(s["useState"])([]),C=Object(o["a"])(S,2),_=C[0],I=C[1],D=Object(s["useState"])({value:"",isInvalid:!1,errorMsg:""}),R=Object(o["a"])(D,2),T=R[0],B=R[1],F=Object(s["useState"])(""),L=Object(o["a"])(F,2),A=L[0],U=L[1],q=Object(s["useState"])(1),M=Object(o["a"])(q,2),H=M[0],z=M[1];Object(s["useEffect"])((function(){0===w.length&&p&&l&&P()}),[l]);var P=function(){var e=Object(r["a"])(i.a.mark((function e(){var a;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["m"])({objectId:t});case 2:a=e.sent,a&&a.rows&&(x(a.rows),I(a.rows.filter((function(e){return e.is_bookmarked})).map((function(e){return e.id}))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){b(!1),j(!1),B({value:"",isInvalid:!1,errorMsg:""}),U(""),z(1)},$=function(e){e.is_bookmarked?I(_.filter((function(t){return t!==e.id}))):I([].concat(Object(c["a"])(_),[e.id])),x(w.map((function(t){return e.id===t.id&&(t.is_bookmarked=e.is_bookmarked?0:1),t})))},J=function(){var e=Object(r["a"])(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!y){e.next=10;break}if(T.value){e.next=4;break}return B(Object(n["a"])(Object(n["a"])({},T),{},{isInvalid:!0,errorMsg:"\u540d\u79f0\u5fc5\u586b"})),e.abrupt("return");case 4:return e.next=6,Object(f["b"])({name:T.value,description:A,is_private:H})["catch"]((function(e){(null===e||void 0===e?void 0:e.isError)&&B(Object(n["a"])(Object(n["a"])({},T),{},{isInvalid:!0,errorMsg:e.name}))}));case 6:P(),j(!y),e.next=13;break;case 10:Object(f["l"])({type:g,id:t,is_bookmark:0===_.length?0:1,archive_ids:_}),a(!(0===_.length)),b(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return m.a.createElement(d["a"],{show:l,title:y?"\u521b\u5efa\u6536\u85cf\u5939":"\u6536\u85cf",onCancel:V,onOk:J},y?m.a.createElement(u["a"],{className:"bookmarklist-form",id:"bookmarkArchives"},m.a.createElement(v["a"],null,m.a.createElement(u["a"].Label,{htmlFor:"bookmarkArchiveName",className:"required"},"\u540d\u79f0")," ",m.a.createElement(u["a"].Control,{type:"text",className:"form-control",value:T.value,onChange:function(e){return B(Object(n["a"])(Object(n["a"])({},T),{},{value:e.target.value}))},placeholder:"\u6700\u591a\u8f93\u516532\u4e2a\u5b57",maxLength:32,autoComplete:"off",required:!0,isInvalid:T.isInvalid}),m.a.createElement(u["a"].Control.Feedback,{type:"invalid"},T.errorMsg)),m.a.createElement(v["a"],null,m.a.createElement(u["a"].Label,{htmlFor:"bookmarkArchiveDescription"},"\u63cf\u8ff0")," ",m.a.createElement(u["a"].Control,{as:"textarea",value:A,onChange:function(e){return U(e.target.value)},placeholder:"\u6700\u591a\u8f93\u5165256\u4e2a\u5b57",maxLength:256})),m.a.createElement("div",{className:"form-check"},m.a.createElement("input",{className:"form-check-input",type:"radio",name:"isPrivate",value:"1",onChange:function(){return z(1)},checked:1===H,id:"bookmark-private"}),m.a.createElement("label",{className:"form-check-label",htmlFor:"bookmark-private"},"\u79c1\u5bc6\uff1a"),m.a.createElement("span",{className:"text-secondary"},"\u4ec5\u81ea\u5df1\u53ef\u89c1")),m.a.createElement("div",{className:"form-check"},m.a.createElement("input",{className:"form-check-input",type:"radio",name:"isPrivate",onChange:function(){return z(0)},checked:0===H,id:"bookmark-public"}),m.a.createElement("label",{className:"form-check-label",htmlFor:"bookmark-public"},"\u516c\u5f00\uff1a"),m.a.createElement("span",{className:"text-secondary"},"\u516c\u5f00\u540e\u4e0d\u53ef\u518d\u8bbe\u7f6e\u4e3a\u79c1\u5bc6"))):m.a.createElement("form",null,m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"form-title"},"\u6dfb\u52a0\u5230\u6536\u85cf\u5939\uff1a"),null===w||void 0===w?void 0:w.map((function(e){return m.a.createElement("div",{className:"form-check mb-2",key:e.id},m.a.createElement("input",{className:"form-check-input",type:"checkbox",name:"bookmarkItem[]",id:e.id,value:e.id,onChange:function(){return $(e)},checked:Boolean(e.is_bookmarked)}),m.a.createElement("label",{className:"form-check-label",htmlFor:e.id},e.name,Boolean(e.is_private)&&m.a.createElement("span",{className:"text-secondary"},"\uff08\u79c1\u5bc6\uff09")))})),m.a.createElement("button",{className:"btn btn-link new-bookmark p-0",onClick:function(){return j(!0)}},"+ \u521b\u5efa\u6536\u85cf\u5939"))))};t["a"]=Object(b["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(m.a.memo(p))},wroQ:function(e,t,a){},xQMv:function(e,t,a){e.exports=a.p+"static/bg-219.7a1acf4f.svg"}}]);