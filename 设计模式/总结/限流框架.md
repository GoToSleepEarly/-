# 设计实现一个支持各种算法的限流框架

##  需求分析 ——分析需求的目的，理清需求的细节

### 功能性背景5W1H：功能性

1.  框架或者需求的背景，由来，WHY
2.  框架的目标群体是谁，WHO
3.  **画线框图、写用户用例、测试驱动开发**等方式搞清楚**外部**如何使用，HOW
4.  在流程中何时使用，或者何时开发完毕 WHEN
5. 一般不考虑WHERE

**具体细节：非功能性**

1. 高可用：

   框架本身是否高可用，如果框架挂了，是否影响其余的功能，如何解决

2. 高性能：

   框架本身的性能，是否会成为瓶颈，如何优化

3. 可拓展

   支持多少种限流算法，如何装配，如何切换

------

## 设计实现——将需求拆分，代码层面的设计

### 功能拆分：内部逻辑

1. 限流规则：

   限流的配置文件目录，也可以是数据库，ZooKeeper等

   限流的配置文件语法，xml，yaml等都行

2.  限流算法 ：

    限流的可选择算法：固定时间窗口限流算法、滑动时间窗口限流算法、令牌桶限流算法、漏桶限流算法。 

3.  限流模式 ：

    限流模式分为两种：单机限流（单机的RateLimiter）和分布式限流 （分布式的Redis限流）

4.  集成使用 ：

   结合进Spring使用

------

## 代码实现——不断重构

基于最小原型设计 *MVP*(Minimum Viable Product) 先实现基本功能

通过SOLID、DRY、KISS、LOD、基于接口而非实现编程、高内聚松耦合等经典的设计思想和原则重构