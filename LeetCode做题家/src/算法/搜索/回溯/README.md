# 回溯法

------

回溯法题型关键字：**排列，组合，子集等与路径相关的枚举**

回溯是深度优先搜索的一种特例，用于记录节点状态，**避免冗余的状态保存**（参考No131的普通递归和回溯）。

------



## 回溯法模板

### 解题步骤：

核心：画出决策树（决策树根据题目得出），**每一层代表着一次选择**。

1. 路径：决策思路。
2. 选择列表：剪枝。
3. 结束条件：何时加入结果集。

```java
result = []
def backtrack(路径, 选择列表):
    if 满足结束条件:
        result.add(路径)
        return
    
    for 选择 in 选择列表:
        做选择
        backtrack(路径, 选择列表)
        撤销选择
```

### 回溯算法的优化

1. 排序
2. visited数组或位运算去重
3. 根据图决定

 ![](images/screenshot_1590422801198.png) 

------



## 回溯算法练习题

按照难度依次排列如下：

### 一、基础——基本回溯

**1、No131分割回文串回溯：❤**

基础递归和回溯的区别

**2、No46全排列：**

画图解题

**3、No77组合：**

画图解题

**4、No76单词搜索：**

画图解题

### 二、剪枝——化解冲突

**1、No51N皇后：**

画图解题，难点在判断冲突的优化

**2、No47全排列2：❤**

**重点题**，重点考察分支的判断

**3、No39组合总和：**

剪枝需要先排序，常用技巧

**4、No40组合总和2：❤**

**重点题**，考察剪枝条件

**5、No90子集2：❤**

**重点题**，考察如何剪枝

**6、No60排列序列**

难题，考虑如何剪枝

### 三、决策——生成决策树

**1、No22括号生成：**

分支选择

**2、No78子集：❤****

**重点题**，不同的决策树思路，考察何时产生子集

**3、No698划分为K个相等的子集：❤**

难题，考虑画出递归图





