(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"2CDT":function(e,t,a){"use strict";function n(e){var t,a,n,c,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e?window.OA_script("https://sponsor.segmentfault.com/spcjs.php?id=1&block=1&repu=".concat(i,"&v=5f0a9217&tag=").concat(escape(e))):(null===(t=window.location)||void 0===t||null===(a=t.pathname)||void 0===a?void 0:a.includes("/a/"))||(null===(n=window.location)||void 0===n||null===(c=n.pathname)||void 0===c?void 0:c.includes("/q/"))||window.OA_script("https://sponsor.segmentfault.com/spcjs.php?id=1&block=1&repu=".concat(i,"&v=5f0a9217"))}t["a"]=n},"2EET":function(e,t,a){},"47/0":function(e,t,a){},"4GjR":function(e,t,a){"use strict";var n=a("WmNS"),c=a.n(n),i=a("k1fw"),r=a("9og8"),l=a("tJVT"),o=a("q1tI"),s=a.n(o),m=a("YdHu"),d=a("97+O"),u=a("tSvB"),f=a("Dp36"),v=a("9kvl"),b=function(e){var t=e.id,a=e.type,n=e.actions,v=void 0===n?[]:n,b=e.member_actions,p=void 0===b?[]:b,h=e.onCallBack,E=e.sessionUser,g=e.className,O=e.qid,y=Object(o["useState"])({visable:!1,action:"",actionName:""}),j=Object(l["a"])(y,2),w=j[0],k=j[1],N=Object(o["useState"])(!1),x=Object(l["a"])(N,2),_=x[0],C=x[1],S=Object(o["useState"])(!1),I=Object(l["a"])(S,2),L=I[0],R=I[1],T=Object(o["useState"])(!1),A=Object(l["a"])(T,2),D=A[0],P=A[1],B=function(e){Object(f["wb"])({id:t,type:a,handle:e}).then((function(e){h(e)}))},M=function(){var e=Object(r["a"])(c.a.mark((function e(n){var r,l;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("report"!==w.action){e.next=6;break}return e.next=3,Object(f["Kb"])(Object(i["a"])({object_id:t},n))["catch"]((function(e){r=null===e||void 0===e?void 0:e.object_id}));case 3:return l=e.sent,h(l||r,w.action),e.abrupt("return");case 6:if("seo"!==w.action&&"hide-setting"!==w.action){e.next=9;break}return h("",w.action),e.abrupt("return");case 9:if("delete"!==w.action){e.next=12;break}return Object(f["xb"])(Object(i["a"])({id:t,type:a},n)).then((function(e){h(e,w.action)})),e.abrupt("return");case 12:Object(f["wb"])(Object(i["a"])({id:t,type:a,handle:w.action},n)).then((function(e){h(e,w.action)}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:g},v.length>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"d-inline-block"},s.a.createElement(d["a"],null,s.a.createElement(d["a"].Toggle,{as:m["a"],className:"text-secondary"},s.a.createElement("span",null,"\u7ba1\u7406")),s.a.createElement(d["a"].Menu,null,v.map((function(e,n){if("edit"===e.type){var c;switch(a){case"article":c="/a/".concat(t,"/edit");break;case"question":c="/q/".concat(t,"/edit");break;case"answer":c="/q/".concat(O,"/a-").concat(t,"/edit");break}return s.a.createElement(d["a"].Item,{key:e.name+n,href:c},e.name)}return"reason"===e.type?s.a.createElement(d["a"].Item,{key:e.name+n,onClick:function(){k({action:e.action,visable:!0,actionName:e.name})}},e.name):"put"===e.type?s.a.createElement(d["a"].Item,{key:e.name+n,onClick:function(){return B(e.action)}},e.name):"site"===e.type?s.a.createElement(d["a"].Item,{key:e.name+n,onClick:function(){C(!0),k(Object(i["a"])(Object(i["a"])({},w),{},{action:e.action}))}},e.name):"seo"===e.type?s.a.createElement(d["a"].Item,{key:e.name+n,onClick:function(){R(!0),k(Object(i["a"])(Object(i["a"])({},w),{},{action:e.action}))}},e.name):"hide"===e.type?s.a.createElement(d["a"].Item,{key:e.name+n,onClick:function(){P(!0),k(Object(i["a"])(Object(i["a"])({},w),{},{action:e.action}))}},e.name):s.a.createElement(d["a"].Item,{key:e.name+n},e.name)}))))),s.a.createElement("span",{className:"split-dot"})),p.length>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"d-inline-block"},s.a.createElement(d["a"],null,s.a.createElement(d["a"].Toggle,{as:m["a"],className:"text-secondary"},s.a.createElement("span",null,"\u64cd\u4f5c")),s.a.createElement(d["a"].Menu,null,p.map((function(e,n){if("edit"===e.type){var c;switch(a){case"article":c="/a/".concat(t,"/edit");break;case"question":c="/q/".concat(t,"/edit");break;case"answer":c="/q/".concat(O,"/a-").concat(t,"/edit");break}return s.a.createElement(d["a"].Item,{key:e.name+n,href:c},e.name)}return"reason"===e.type?s.a.createElement(d["a"].Item,{key:e.name+n,onClick:function(){k({action:e.action,visable:!0,actionName:e.name})}},e.name):"put"===e.type?s.a.createElement(d["a"].Item,{key:e.name+n,onClick:function(){return B(e.action)}},e.name):void 0})),"question"===a&&s.a.createElement(d["a"].Item,{href:"/q/".concat(t,"/revision")},"\u5386\u53f2\u7248\u672c")))),s.a.createElement("span",{className:"split-dot"})),E&&s.a.createElement("a",{className:"text-secondary sf_do",href:"#",onClick:function(e){e.preventDefault(),k({action:"report",visable:!0,actionName:"\u4e3e\u62a5"})}},s.a.createElement("span",null,"\u4e3e\u62a5")),w.visable&&s.a.createElement(u["f"],{id:t,isShow:!0,action:w.action,actionName:w.actionName,setModalStatus:k,onOk:M}),_&&s.a.createElement(u["e"],{isShow:!0,setModalStatus:C,callback:M}),s.a.createElement(u["l"],{id:t,isShow:L,setModalStatus:R,callBack:M}),s.a.createElement(u["g"],{id:t,isShow:D,setModalStatus:P,callBack:M}))};t["a"]=Object(v["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(s.a.memo(b))},"5SRE":function(e,t,a){},"6T2I":function(e,t,a){"use strict";var n=a("q1tI"),c=a.n(n),i=a("wx14"),r=a("zLVn"),l=a("TSYQ"),o=a.n(l),s=a("vUet"),m=a("dbZe"),d={active:!1,linkProps:{}},u=c.a.forwardRef((function(e,t){var a=e.bsPrefix,n=e.active,l=e.children,d=e.className,u=e.as,f=void 0===u?"li":u,v=e.linkAs,b=void 0===v?m["a"]:v,p=e.linkProps,h=e.href,E=e.title,g=e.target,O=Object(r["a"])(e,["bsPrefix","active","children","className","as","linkAs","linkProps","href","title","target"]),y=Object(s["a"])(a,"breadcrumb-item");return c.a.createElement(f,Object(i["a"])({ref:t},O,{className:o()(y,d,{active:n}),"aria-current":n?"page":void 0}),n?l:c.a.createElement(b,Object(i["a"])({},p,{href:h,title:E,target:g}),l))}));u.displayName="BreadcrumbItem",u.defaultProps=d;var f=u,v={label:"breadcrumb",listProps:{}},b=c.a.forwardRef((function(e,t){var a=e.bsPrefix,n=e.className,l=e.listProps,m=e.children,d=e.label,u=e.as,f=void 0===u?"nav":u,v=Object(r["a"])(e,["bsPrefix","className","listProps","children","label","as"]),b=Object(s["a"])(a,"breadcrumb");return c.a.createElement(f,Object(i["a"])({"aria-label":d,className:n,ref:t},v),c.a.createElement("ol",Object(i["a"])({},l,{className:o()(b,null==l?void 0:l.className)}),m))}));b.displayName="Breadcrumb",b.defaultProps=v,b.Item=f;var p=b,h=function(e){var t=e.data,a=e.className,n=void 0===a?"":a;return c.a.createElement(p,{className:"font-size-14 px-0 my-0 ".concat(n),bsPrefix:"breadcrumb bg-transparent"},c.a.createElement(p.Item,{href:"/"},"\u9996\u9875"),t.map((function(e,a){return e.name?c.a.createElement(p.Item,{href:e.url,key:e.url,active:t.length===a+1},e.name):null})))};t["a"]=c.a.memo(h)},"78gL":function(e,t,a){},"9F+u":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n,c,i=a("EVdn");function r(e){function t(){i("body").find(".ad-container").each((function(e,t){var a,n;i(t).hasClass(".ad-close")&&!(null===(a=i(t))||void 0===a||null===(n=a.children())||void 0===n?void 0:n.length)||i(t).show()})),e&&i(".ad-close").parent().each((function(t,a){var n=i(a).attr("id"),c="".concat(e,"-").concat(n),r=parseInt(localStorage.getItem(c)||"0")||0;"OA_holder_5"===n&&(r=Math.max(parseInt(localStorage.getItem("article-OA_holder_5")||"0"),parseInt(localStorage.getItem("question-OA_holder_5")||"0"),parseInt(localStorage.getItem("global-OA_holder_5")||"0"))),r<Date.now()?i("#"+n).css("display","block"):i("#"+n).remove()})),i(".ad-close").css({position:"relative"}).append(i('<div class="sflex-center ad-close-div"></div>').css({width:"16px",height:"16px",position:"absolute",right:"8px",top:"8px","background-color":"rgba(0,0,0,.75)",cursor:"pointer","pointer-events":"none","border-radius":"50%"}).append(i('<span class="ad-close-span"></span>').css({width:"8px",height:"8px",display:"block","background-image":"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath fill='%23FFF' fill-rule='evenodd' d='M6.6667 0L8 1.3333 5.333 4 8 6.6667 6.6667 8 4 5.333 1.3333 8 0 6.6667 2.666 4 0 1.3333 1.3333 0 4 2.667 6.6667 0z'/%3E%3C/svg%3E\")","background-repeat":"no-repeat","background-position":"center","pointer-events":"auto"}))),i(".ad-close-span").on("click",(function(){var t=i(this).parents(".ad-close").parent(),a=t.attr("id");t.parent().remove(),localStorage.setItem("".concat(e,"-").concat(a),(Date.now()+864e5).toString())}))}n&&clearInterval(n),n=setInterval((function(){i(".ad-close").length>0&&(clearInterval(n),t())}),300),c&&clearInterval(c),c=setInterval((function(){i("div[id^='OA_holder_']").length>0&&(clearInterval(c),i("div[id^='OA_holder_']").each((function(e,t){var a=i(t).children("div[id^='beacon_']").length;a>0&&i(t).parent().show()})))}),500)}},"9cdK":function(e,t,a){},AINe:function(e,t,a){"use strict";var n=a("wx14"),c=a("zLVn"),i=a("TSYQ"),r=a.n(i),l=a("q1tI"),o=a.n(l),s=(a("BO/t"),a("vUet")),m={placement:"right"},d=o.a.forwardRef((function(e,t){var a=e.bsPrefix,i=e.placement,l=e.className,m=e.style,d=e.children,u=e.arrowProps,f=(e.popper,e.show,Object(c["a"])(e,["bsPrefix","placement","className","style","children","arrowProps","popper","show"]));a=Object(s["a"])(a,"tooltip");var v=(null==i?void 0:i.split("-"))||[],b=v[0];return o.a.createElement("div",Object(n["a"])({ref:t,style:m,role:"tooltip","x-placement":b,className:r()(l,a,"bs-tooltip-"+b)},f),o.a.createElement("div",Object(n["a"])({className:"arrow"},u)),o.a.createElement("div",{className:a+"-inner"},d))}));d.defaultProps=m,d.displayName="Tooltip",t["a"]=d},DZHF:function(e,t,a){"use strict";var n=a("wx14"),c=a("zLVn"),i=a("TSYQ"),r=a.n(i),l=a("q1tI"),o=a.n(l),s=a("y8DL"),m=a("vUet"),d=a("ILyh"),u=o.a.createContext(null);u.displayName="AccordionContext";var f=u;function v(e,t){var a=Object(l["useContext"])(f),n=Object(l["useContext"])(d["a"]);return function(c){var i=e===a?null:e;n&&n(i,c),t&&t(c)}}var b=o.a.forwardRef((function(e,t){var a=e.as,i=void 0===a?"button":a,r=e.children,l=e.eventKey,s=e.onClick,m=Object(c["a"])(e,["as","children","eventKey","onClick"]),d=v(l,s);return"button"===i&&(m.type="button"),o.a.createElement(i,Object(n["a"])({ref:t,onClick:d},m),r)})),p=b,h=a("vYJ8"),E=o.a.forwardRef((function(e,t){var a=e.children,i=e.eventKey,r=Object(c["a"])(e,["children","eventKey"]),s=Object(l["useContext"])(f);return o.a.createElement(d["a"].Provider,{value:null},o.a.createElement(h["a"],Object(n["a"])({ref:t,in:s===i},r),o.a.createElement("div",null,o.a.Children.only(a))))}));E.displayName="AccordionCollapse";var g=E,O=o.a.forwardRef((function(e,t){var a=Object(s["a"])(e,{activeKey:"onSelect"}),i=a.as,l=void 0===i?"div":i,u=a.activeKey,v=a.bsPrefix,b=a.children,p=a.className,h=a.onSelect,E=Object(c["a"])(a,["as","activeKey","bsPrefix","children","className","onSelect"]),g=r()(p,Object(m["a"])(v,"accordion"));return o.a.createElement(f.Provider,{value:u||null},o.a.createElement(d["a"].Provider,{value:h||null},o.a.createElement(l,Object(n["a"])({ref:t},E,{className:g}),b)))}));O.displayName="Accordion",O.Toggle=p,O.Collapse=g;t["a"]=O},HToz:function(e,t,a){!function(t,a){e.exports=a()}(0,(function(){"use strict";function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var t="undefined"!=typeof window,a=t&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),n=t&&"IntersectionObserver"in window,c=t&&"classList"in document.createElement("p"),i=t&&window.devicePixelRatio>1,r={elements_selector:".lazy",container:a||t?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1},l=function(t){return e({},r,t)},o=function(e,t){var a,n="LazyLoad::Initialized",c=new e(t);try{a=new CustomEvent(n,{detail:{instance:c}})}catch(e){(a=document.createEvent("CustomEvent")).initCustomEvent(n,!1,!1,{instance:c})}window.dispatchEvent(a)},s="loading",m="loaded",d="applied",u="error",f="native",v="data-",b="ll-status",p=function(e,t){return e.getAttribute(v+t)},h=function(e){return p(e,b)},E=function(e,t){return function(e,t,a){var n="data-ll-status";null!==a?e.setAttribute(n,a):e.removeAttribute(n)}(e,0,t)},g=function(e){return E(e,null)},O=function(e){return null===h(e)},y=function(e){return h(e)===f},j=[s,m,d,u],w=function(e,t,a,n){e&&(void 0===n?void 0===a?e(t):e(t,a):e(t,a,n))},k=function(e,t){c?e.classList.add(t):e.className+=(e.className?" ":"")+t},N=function(e,t){c?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},x=function(e){return e.llTempImage},_=function(e,t){if(t){var a=t._observer;a&&a.unobserve(e)}},C=function(e,t){e&&(e.loadingCount+=t)},S=function(e,t){e&&(e.toLoadCount=t)},I=function(e){for(var t,a=[],n=0;t=e.children[n];n+=1)"SOURCE"===t.tagName&&a.push(t);return a},L=function(e,t,a){a&&e.setAttribute(t,a)},R=function(e,t){e.removeAttribute(t)},T=function(e){return!!e.llOriginalAttrs},A=function(e){if(!T(e)){var t={};t.src=e.getAttribute("src"),t.srcset=e.getAttribute("srcset"),t.sizes=e.getAttribute("sizes"),e.llOriginalAttrs=t}},D=function(e){if(T(e)){var t=e.llOriginalAttrs;L(e,"src",t.src),L(e,"srcset",t.srcset),L(e,"sizes",t.sizes)}},P=function(e,t){L(e,"sizes",p(e,t.data_sizes)),L(e,"srcset",p(e,t.data_srcset)),L(e,"src",p(e,t.data_src))},B=function(e){R(e,"src"),R(e,"srcset"),R(e,"sizes")},M=function(e,t){var a=e.parentNode;a&&"PICTURE"===a.tagName&&I(a).forEach(t)},F={IMG:function(e,t){M(e,(function(e){A(e),P(e,t)})),A(e),P(e,t)},IFRAME:function(e,t){L(e,"src",p(e,t.data_src))},VIDEO:function(e,t){!function(e,a){I(e).forEach((function(e){L(e,"src",p(e,t.data_src))}))}(e),L(e,"poster",p(e,t.data_poster)),L(e,"src",p(e,t.data_src)),e.load()}},q=function(e,t){var a=F[e.tagName];a&&a(e,t)},z=function(e,t,a){C(a,1),k(e,t.class_loading),E(e,s),w(t.callback_loading,e,a)},U=["IMG","IFRAME","VIDEO"],V=function(e,t){!t||function(e){return e.loadingCount>0}(t)||function(e){return e.toLoadCount>0}(t)||w(e.callback_finish,t)},H=function(e,t,a){e.addEventListener(t,a),e.llEvLisnrs[t]=a},Y=function(e,t,a){e.removeEventListener(t,a)},K=function(e){return!!e.llEvLisnrs},J=function(e){if(K(e)){var t=e.llEvLisnrs;for(var a in t){var n=t[a];Y(e,a,n)}delete e.llEvLisnrs}},W=function(e,t,a){!function(e){delete e.llTempImage}(e),C(a,-1),function(e){e&&(e.toLoadCount-=1)}(a),N(e,t.class_loading),t.unobserve_completed&&_(e,a)},$=function(e,t,a){var n=x(e)||e;K(n)||function(e,t,a){K(e)||(e.llEvLisnrs={});var n="VIDEO"===e.tagName?"loadeddata":"load";H(e,n,t),H(e,"error",a)}(n,(function(c){!function(e,t,a,n){var c=y(t);W(t,a,n),k(t,a.class_loaded),E(t,m),w(a.callback_loaded,t,n),c||V(a,n)}(0,e,t,a),J(n)}),(function(c){!function(e,t,a,n){var c=y(t);W(t,a,n),k(t,a.class_error),E(t,u),w(a.callback_error,t,n),c||V(a,n)}(0,e,t,a),J(n)}))},Q=function(e,t,a){!function(e){e.llTempImage=document.createElement("IMG")}(e),$(e,t,a),function(e,t,a){var n=p(e,t.data_bg),c=p(e,t.data_bg_hidpi),r=i&&c?c:n;r&&(e.style.backgroundImage='url("'.concat(r,'")'),x(e).setAttribute("src",r),z(e,t,a))}(e,t,a),function(e,t,a){var n=p(e,t.data_bg_multi),c=p(e,t.data_bg_multi_hidpi),r=i&&c?c:n;r&&(e.style.backgroundImage=r,function(e,t,a){k(e,t.class_applied),E(e,d),t.unobserve_completed&&_(e,t),w(t.callback_applied,e,a)}(e,t,a))}(e,t,a)},G=function(e,t,a){!function(e){return U.indexOf(e.tagName)>-1}(e)?Q(e,t,a):function(e,t,a){$(e,t,a),q(e,t),z(e,t,a)}(e,t,a)},Z=["IMG","IFRAME"],X=function(e){return e.use_native&&"loading"in HTMLImageElement.prototype},ee=function(e,t,a){e.forEach((function(e){return function(e){return e.isIntersecting||e.intersectionRatio>0}(e)?function(e,t,a,n){E(e,"entered"),k(e,a.class_entered),N(e,a.class_exited),function(e,t,a){t.unobserve_entered&&_(e,a)}(e,a,n),w(a.callback_enter,e,t,n),function(e){return j.indexOf(h(e))>=0}(e)||G(e,a,n)}(e.target,e,t,a):function(e,t,a,n){O(e)||(k(e,a.class_exited),function(e,t,a,n){a.cancel_on_exit&&function(e){return h(e)===s}(e)&&"IMG"===e.tagName&&(J(e),function(e){M(e,(function(e){B(e)})),B(e)}(e),function(e){M(e,(function(e){D(e)})),D(e)}(e),N(e,a.class_loading),C(n,-1),g(e),w(a.callback_cancel,e,t,n))}(e,t,a,n),w(a.callback_exit,e,t,n))}(e.target,e,t,a)}))},te=function(e){return Array.prototype.slice.call(e)},ae=function(e){return e.container.querySelectorAll(e.elements_selector)},ne=function(e){return function(e){return h(e)===u}(e)},ce=function(e,t){return function(e){return te(e).filter(O)}(e||ae(t))},ie=function(e,a){var c=l(e);this._settings=c,this.loadingCount=0,function(e,t){n&&!X(e)&&(t._observer=new IntersectionObserver((function(a){ee(a,e,t)}),function(e){return{root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}}(e)))}(c,this),function(e,a){t&&window.addEventListener("online",(function(){!function(e,t){var a;(a=ae(e),te(a).filter(ne)).forEach((function(t){N(t,e.class_error),g(t)})),t.update()}(e,a)}))}(c,this),this.update(a)};return ie.prototype={update:function(e){var t,c,i=this._settings,r=ce(e,i);S(this,r.length),!a&&n?X(i)?function(e,t,a){e.forEach((function(e){-1!==Z.indexOf(e.tagName)&&(e.setAttribute("loading","lazy"),function(e,t,a){$(e,t,a),q(e,t),E(e,f)}(e,t,a))})),S(a,0)}(r,i,this):(c=r,function(e){e.disconnect()}(t=this._observer),function(e,t){t.forEach((function(t){e.observe(t)}))}(t,c)):this.loadAll(r)},destroy:function(){this._observer&&this._observer.disconnect(),ae(this._settings).forEach((function(e){delete e.llOriginalAttrs})),delete this._observer,delete this._settings,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){var t=this,a=this._settings;ce(e,a).forEach((function(e){_(e,t),G(e,a,t)}))}},ie.load=function(e,t){var a=l(t);G(e,a)},ie.resetStatus=function(e){g(e)},t&&function(e,t){if(t)if(t.length)for(var a,n=0;a=t[n];n+=1)o(e,a);else o(e,t)}(ie,window.lazyLoadOptions),ie}))},PFmq:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("WmNS"),c=a.n(n),i=a("rAM+"),r=a("k1fw"),l=a("9og8"),o=a("LvDl"),s=a("9kvl"),m=a("6Yt9");function d(e,t){return e instanceof Function?(t=e,e={}):e||(e={}),function(){var a=Object(l["a"])(c.a.mark((function a(n){var l,d,u,f,v,b,p,h,E,g,O,y,j,w;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n.initResult||(n.initResult={}),f=Object(s["c"])(),v=f._store,b=n.isServer?null===(l=n.serverData)||void 0===l?void 0:l.Token:Object(m["b"])(),n.isServer&&!Object(o["isEmpty"])(n.serverData)&&v.dispatch({type:"global/saveServerData",payload:n.serverData}),v.dispatch({type:"global/saveSessionInfo",payload:Object(r["a"])(Object(r["a"])({},(null===(d=v.getState().global)||void 0===d?void 0:d.sessionInfo)||{}),{},{key:b})}),!n.isServer){a.next=8;break}return a.next=8,v.dispatch({type:"global/getSessionInfo",payload:{Token:b}});case 8:if(p=v.getState(),h=(null===(u=p.global)||void 0===u?void 0:u.sessionInfo)||{},!n.isServer||!h.login){a.next=13;break}return a.next=13,v.dispatch({type:"global/getUser"});case 13:if(E={},"object"===typeof e&&(E=e),E.requireLogin&&!h.login?(n.initResult.action="redirect",n.initResult.param="/user/login"):E.requireNotLogin&&h.login&&(n.initResult.action="redirect",n.initResult.param="/"),v.dispatch({type:"global/saveRoute",payload:Object(r["a"])(Object(r["a"])({},n.route),n.initResult)}),!t){a.next=23;break}return a.next=20,t(n);case 20:a.t0=a.sent,a.next=24;break;case 23:a.t0=p;case 24:if(g=a.t0,!E.requireState){a.next=45;break}O=Object(i["a"])(E.requireState),a.prev=27,O.s();case 29:if((y=O.n()).done){a.next=37;break}if(j=y.value,w=Object(o["get"])(g,j),w&&!Object(o["isEmpty"])(w)){a.next=35;break}return n.initResult.action="404",a.abrupt("break",37);case 35:a.next=29;break;case 37:a.next=42;break;case 39:a.prev=39,a.t1=a["catch"](27),O.e(a.t1);case 42:return a.prev=42,O.f(),a.finish(42);case 45:return a.abrupt("return",g);case 46:case"end":return a.stop()}}),a,null,[[27,39,42,45]])})));return function(e){return a.apply(this,arguments)}}()}},PmrS:function(e,t,a){},SoKV:function(e,t,a){},YKRR:function(e,t,a){"use strict";var n=a("tJVT"),c=a("q1tI"),i=a.n(c),r=a("EVdn"),l=(a("rNPM"),function(){var e=function(){r("body,html").animate({scrollTop:0})},t=Object(c["useState"])(0),a=Object(n["a"])(t,2),l=a[0],o=a[1],s=function(){o(window.scrollY)};return Object(c["useEffect"])((function(){return window.addEventListener("scroll",s),function(){window.removeEventListener("scroll",s)}})),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"fixedTools",className:"position-fixed d-none ".concat(l>720?"d-xl-flex":""),style:{right:"24px",bottom:"24px"}},i.a.createElement("button",{type:"button",className:"btn btn-light",title:"\u56de\u9876\u90e8",onClick:e},"\u25b2")))});t["a"]=l},YdHu:function(e,t,a){"use strict";var n=a("q1tI"),c=a.n(n),i=function(e,t){var a=e.children,n=e.onClick,i=e.className,r=e.domType,l=void 0===r?"a":r;return"a"===l?c.a.createElement("a",{href:"#",className:i,ref:t,onClick:function(e){e.preventDefault(),n(e)},"aria-label":"\u5206\u4eab"},a):c.a.createElement("div",{className:i,ref:t,onClick:function(e){e.preventDefault(),n(e)}},a)};t["a"]=c.a.forwardRef(i)},cor7:function(e,t,a){"use strict";var n=a("0Owb"),c=a("WmNS"),i=a.n(c),r=a("9og8"),l=a("jrin"),o=a("oBTY"),s=a("k1fw"),m=a("tJVT"),d=a("q1tI"),u=a.n(d),f=a("6xyR"),v=a("kpTP"),b=a("sjrs"),p=a("NAXS"),h=a("GemG"),E=a.n(h),g=a("LvDl"),O=a("Dp36"),y=a("tSvB"),j=a("QojX"),w=a("HRRZ"),k=(a("gZRy"),function(e){var t=e.isChild,a=void 0!==t&&t,n=e.item,c=e.parentItem,i=e.onChangeOfComment,r=e.onComment,l=Object(d["useRef"])(null);return Object(d["useEffect"])((function(){if(l.current&&(E()(l.current),n.original_text)){var e=n.original_text.length;l.current.setSelectionRange(e,e)}}),[l]),u.a.createElement(j["a"],{className:"edit-form ".concat(a?"edit-reply-form":"")},u.a.createElement(w["a"],null,u.a.createElement(j["a"].Control,{as:"textarea",className:"comment-text",rows:1,ref:l,autoFocus:!0,value:n.original_text,size:"sm",onChange:function(e){c?i(Object(s["a"])(Object(s["a"])({},n),{},{original_text:e.target.value}),c):i(Object(s["a"])(Object(s["a"])({},n),{},{original_text:e.target.value}))},placeholder:"\u64b0\u5199\u8bc4\u8bba ...",isInvalid:n.isInvalid}),u.a.createElement(j["a"].Control.Feedback,{type:"invalid"},n.errorMsg)),u.a.createElement("div",{className:"my-3 d-flex align-content-center justify-content-end"},u.a.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm mr-2 edit-top-comment-cancel-btn cancelEdit",onClick:function(){c?i(Object(s["a"])(Object(s["a"])({},n),{},{isEdit:!1}),c):i(Object(s["a"])(Object(s["a"])({},n),{},{isEdit:!1}))}},"\u53d6\u6d88"),u.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:function(){return r({item:n,parentItem:c})},disabled:!n.original_text},"\u63d0\u4ea4")))}),N=u.a.memo(k),x=a("TUci"),_=a("wwbV"),C=a("bdvc"),S=function(e){var t=e.item,a=e.parentItem,n=e.onChangeOfComment,c=e.onComment,i=e.className,r=e.id,l=Object(d["useState"])(!1),o=Object(m["a"])(l,2),f=o[0],v=o[1],b=Object(d["useRef"])(null),p=Object(d["useState"])({isInvalid:!1,msg:""}),h=Object(m["a"])(p,2),g=h[0],O=h[1];Object(d["useEffect"])((function(){if((null===b||void 0===b?void 0:b.current)&&(Object(C["b"])({id:r,element:b.current}),E()(b.current),t.commentVal)){var e=t.commentVal.length;b.current.setSelectionRange(e,e)}}),[b]);var y=function(e){O(e)};return u.a.createElement(j["a"],{className:"card-body add-comment-form ".concat(i)},u.a.createElement(w["a"],null,u.a.createElement(j["a"].Control,{as:"textarea",value:t.commentVal,autoFocus:!0,ref:b,size:"sm",rows:1,onChange:function(e){a?n(Object(s["a"])(Object(s["a"])({},t),{},{commentVal:e.target.value}),a):n(Object(s["a"])(Object(s["a"])({},t),{},{commentVal:e.target.value}))},className:"form-control form-control-sm comment-reply",placeholder:"\u64b0\u5199\u8bc4\u8bba \u2026",isInvalid:g.isInvalid}),u.a.createElement(j["a"].Control.Feedback,{type:"invalid"},g.msg)),u.a.createElement("div",{className:"d-flex justify-content-end align-items-center"},u.a.createElement("a",{href:"#",className:"mr-3",onClick:function(e){e.preventDefault(),v(!f)}},u.a.createElement("i",{className:"far fa-info-circle text-secondary"})),u.a.createElement(_["a"],{size:"sm",className:"float-right",onClick:function(){return c({item:t,parentItem:a,callback:y})},disabled:!t.commentVal},"\u63d0\u4ea4\u8bc4\u8bba")),u.a.createElement(x["a"],{show:f,variant:"info",className:"mt-3 my-0 font-size-14"},"\u8bc4\u8bba\u652f\u6301\u90e8\u5206 Markdown \u8bed\u6cd5\uff1a",u.a.createElement("code",null,"**\u7c97\u4f53** _\u659c\u4f53_ [\u94fe\u63a5](http://example.com) `\u4ee3\u7801` - \u5217\u8868 > \u5f15\u7528"),"\u3002\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 ",u.a.createElement("code",null,"@ "),"\u6765\u901a\u77e5\u5176\u4ed6\u7528\u6237\u3002"))},I=u.a.memo(S),L=a("6Yt9"),R=(a("9cdK"),a("9kvl")),T=function(e){var t=e.commentContent,a=e.isShowComment,n=e.inputRef,c=e.setCommentContent,i=e.onComment,r=e.sessionUser,l=e.id,o=Object(d["useState"])(!1),s=Object(m["a"])(o,2),v=s[0],b=s[1],p=Object(d["useState"])({isInvalid:!1,msg:""}),h=Object(m["a"])(p,2),E=h[0],g=h[1];Object(d["useEffect"])((function(){a&&n.current.focus()}),[a]),Object(d["useEffect"])((function(){n&&n.current&&Object(C["b"])({id:l,element:n.current})}),[n]);var O=function(e){g(e)};return u.a.createElement(f["a"],{className:"bg-light border-0 mt-3 ".concat(a?"":"hidden")},u.a.createElement(f["a"].Body,null,u.a.createElement("div",{className:"media-body"},u.a.createElement(w["a"],null,u.a.createElement(j["a"].Control,{as:"textarea",rows:1,ref:n,value:t,size:"sm",onChange:function(e){c(e.target.value)},className:"comment-text",placeholder:"\u64b0\u5199\u8bc4\u8bba \u2026",onFocus:function(e){r||(e.preventDefault(),Object(L["c"])(),n.current.blur())},isInvalid:E.isInvalid}),u.a.createElement(j["a"].Control.Feedback,{type:"invalid"},E.msg)),u.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},u.a.createElement("small",{className:"text-secondary"},"\u5982\u679c\u5bf9\u4f60\u6709\u5e2e\u52a9\uff0c\u8bb0\u5f97\u70b9\u8d5e\u652f\u6301"),u.a.createElement("div",{className:"sflex-center"},u.a.createElement("a",{href:"#",className:"mr-3",onClick:function(e){e.preventDefault(),b(!v)},"aria-label":"\u63d0\u793a"},u.a.createElement("i",{className:"far fa-info-circle text-secondary"})),u.a.createElement(_["a"],{size:"sm",className:"float-right",onClick:function(){return i({item:"comment",callback:O})},disabled:!t},"\u63d0\u4ea4\u8bc4\u8bba")))),u.a.createElement(x["a"],{show:v,variant:"info",className:"mt-3 my-0 font-size-14"},"\u8bc4\u8bba\u652f\u6301\u90e8\u5206 Markdown \u8bed\u6cd5\uff1a",u.a.createElement("code",null,"**\u7c97\u4f53** _\u659c\u4f53_ [\u94fe\u63a5](http://example.com) `\u4ee3\u7801` - \u5217\u8868 > \u5f15\u7528"),"\u3002\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 ",u.a.createElement("code",null,"@ "),"\u6765\u901a\u77e5\u5176\u4ed6\u7528\u6237\u3002")))},A=Object(R["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(u.a.memo(T)),D=function(e){var t=e.allTotal,a=e.sort,n=e.setSort;return u.a.createElement("div",{className:"d-flex justify-content-between mb-2 px-4 px-md-0"},u.a.createElement("div",{id:"comment-total",className:"h5 mb-0"},t," \u6761\u8bc4\u8bba"),u.a.createElement("div",null,u.a.createElement("a",{href:"#",className:"sort ".concat("votes"===a?"text-dark":"text-secondary"),onClick:function(e){e.preventDefault(),n("votes")}},"\u5f97\u7968"),u.a.createElement("span",{className:"split-dot text-secondary"}),u.a.createElement("a",{href:"#",className:"sort ".concat("newest"===a?"text-dark":"text-secondary"),onClick:function(e){e.preventDefault(),n("newest")}},"\u65f6\u95f4")))},P=u.a.memo(D),B=function(e){var t,a=e.commentContent,n=e.inputRef,c=e.setCommentContent,i=e.onComment,r=e.sessionUser,l=e.id,o=Object(d["useState"])(!1),s=Object(m["a"])(o,2),f=s[0],b=s[1],p=Object(d["useState"])({isInvalid:!1,msg:""}),h=Object(m["a"])(p,2),E=h[0],g=h[1];Object(d["useEffect"])((function(){n&&n.current&&Object(C["b"])({id:l,element:n.current})}),[n]);var O=function(e){g(e)};return u.a.createElement(v["a"],{className:"mb-4"},u.a.createElement("img",{src:(null===r||void 0===r||null===(t=r.user)||void 0===t?void 0:t.avatar_url)||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",className:"rounded-circle mr-3",width:"38","aria-hidden":"true"}),u.a.createElement(v["a"].Body,null,u.a.createElement(w["a"],null,u.a.createElement(j["a"].Control,{as:"textarea",rows:1,ref:n,value:a,onChange:function(e){c(e.target.value)},className:"comment-text",placeholder:"\u64b0\u5199\u8bc4\u8bba \u2026",onFocus:function(e){r||(e.preventDefault(),Object(L["c"])(),n.current.blur())},"aria-label":"\u8bc4\u8bba",isInvalid:E.isInvalid}),u.a.createElement(j["a"].Control.Feedback,{type:"invalid"},E.msg)),u.a.createElement("div",{className:"d-flex justify-content-end align-items-center"},u.a.createElement("a",{href:"#",className:"mr-3",onClick:function(e){e.preventDefault(),b(!f)},"aria-label":"\u63d0\u793a"},u.a.createElement("i",{className:"far fa-info-circle text-secondary"})),u.a.createElement(_["a"],{className:"float-right",onClick:function(){return i({item:"comment",callback:O})},disabled:!a},"\u63d0\u4ea4\u8bc4\u8bba")),u.a.createElement(x["a"],{show:f,variant:"info",className:"mt-3 my-0 font-size-14"},"\u8bc4\u8bba\u652f\u6301\u90e8\u5206 Markdown \u8bed\u6cd5\uff1a",u.a.createElement("code",null,"**\u7c97\u4f53** _\u659c\u4f53_ [\u94fe\u63a5](http://example.com) `\u4ee3\u7801` - \u5217\u8868 > \u5f15\u7528"),"\u3002\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 ",u.a.createElement("code",null,"@ "),"\u6765\u901a\u77e5\u5176\u4ed6\u7528\u6237\u3002")))},M=Object(R["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(u.a.memo(B)),F=a("zhAr"),q=15,z=function(e){var t=e.total,a=e.page,n=e.getData,c=function(){var e=document.getElementById("comment-area"),t=-65,a=e.getBoundingClientRect().top+window.pageYOffset+t;window.scrollTo({top:a})},i=function(e){n(e),c()};return u.a.createElement("div",{className:"d-flex justify-content-center mt-4 mb-1"},u.a.createElement(F["a"],{size:"sm",className:"mb-0"},u.a.createElement(F["a"].Item,{disabled:1===a,onClick:function(){return i(a-1)}},"\u4e0a\u4e00\u9875"),Object(o["a"])(Array(Math.ceil(t/q))).map((function(){return 0})).map((function(e,t){return u.a.createElement(F["a"].Item,{key:"page".concat(t),active:a===t+1,onClick:function(){return i(t+1)}},t+1)})),u.a.createElement(F["a"].Item,{disabled:a===Object(o["a"])(Array(Math.ceil(t/q))).map((function(){return 0})).length,onClick:function(){return i(a+1)}},"\u4e0b\u4e00\u9875")))},U=Object(R["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(u.a.memo(z)),V=function(e){var t=e.sessionUser,a=e.item,n=e.onEditComment,c=e.onEdit,i=e.onRemove,r=e.onReport,l=Object(d["useState"])(a.is_liked),o=Object(m["a"])(l,2),s=o[0],f=o[1],v=Object(d["useState"])(a.votes),b=Object(m["a"])(v,2),p=b[0],h=b[1],E=(null===t||void 0===t?void 0:t.roles)||{},g=E.is_editor,y=function(e,t){t.preventDefault(),Object(L["c"])()&&Object(O["t"])({id:e.id,is_like:e.is_liked?0:1}).then((function(){h(s?p-1:p+1),f(!s)}))};return u.a.createElement("div",{className:"handle-bar font-size-14 d-flex justify-content-between"},u.a.createElement("div",null,u.a.createElement("a",{className:"text-secondary",href:"#",onClick:function(e){return y(a,e)}},u.a.createElement("span",{className:"mainLike-comment ".concat(s?"text-primary":"")},u.a.createElement("i",{className:"fa-w-16 ".concat(s?"fas fa-thumbs-up":"far fa-thumbs-up"),style:{width:"1em"}})),p>0&&u.a.createElement("span",{className:"mainLike-commentNum ml-1"},p)),u.a.createElement("span",{className:"split-dot"}),u.a.createElement("a",{className:"text-secondary btn-comment",href:"#",onClick:function(e){n(a,"",e)}},"\u56de\u590d"),u.a.createElement("span",{className:"split-dot"}),u.a.createElement("span",{className:"text-secondary"},Object(C["c"])(a.created))),u.a.createElement("div",{className:"control-area d-none"},t&&(g||Number(a.user.id)==t.user.id)&&u.a.createElement(u.a.Fragment,null,u.a.createElement("a",{className:"text-secondary edit",href:"#",onClick:function(e){e.preventDefault(),c(a)}},"\u7f16\u8f91"),u.a.createElement("span",{className:"split-dot"}),u.a.createElement("a",{className:"text-secondary delete",href:"#",onClick:function(e){return i(a.id,e)}},"\u5220\u9664"),u.a.createElement("span",{className:"split-dot"})),t&&u.a.createElement("a",{className:"text-secondary comment-report",href:"#",onClick:function(e){return r(a,e)}},"\u4e3e\u62a5")))},H=Object(R["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(u.a.memo(V)),Y=function(e){var t=e.sessionUser,a=e.item,n=e.subItem,c=e.onEditComment,i=e.onEdit,r=e.onRemove,l=e.onReport,o=(null===t||void 0===t?void 0:t.roles)||{},s=o.is_editor,f=Object(d["useState"])(n.is_liked),v=Object(m["a"])(f,2),b=v[0],p=v[1],h=Object(d["useState"])(n.votes),E=Object(m["a"])(h,2),g=E[0],y=E[1],j=function(e,t){t.preventDefault(),Object(L["c"])()&&Object(O["t"])({id:e.id,is_like:e.is_liked?0:1}).then((function(){y(b?g-1:g+1),p(!b)}))};return u.a.createElement("div",{className:"handle-bar font-size-14 d-flex justify-content-between"},u.a.createElement("div",null,u.a.createElement("a",{className:"text-secondary",href:"#",onClick:function(e){return j(n,e)}},u.a.createElement("span",{className:"mainLike-comment ".concat(b?"text-primary":"")},u.a.createElement("i",{className:"fa-w-16 ".concat(b?"fas fa-thumbs-up":"far fa-thumbs-up"),style:{width:"1em"}})),g>0&&u.a.createElement("span",{className:"mainLike-commentNum  ml-1"},g)),u.a.createElement("span",{className:"split-dot"}),u.a.createElement("a",{className:"text-secondary btn-reply",href:"#",onClick:function(e){c(n,a,e)}},"\u56de\u590d"),u.a.createElement("span",{className:"split-dot"}),u.a.createElement("span",{className:"text-secondary"},Object(C["c"])(n.created))),u.a.createElement("div",{className:"comment-control-area d-none"},t&&(s||Number(n.user.id)==t.user.id)&&u.a.createElement(u.a.Fragment,null,u.a.createElement("a",{className:"text-secondary edit",href:"#",onClick:function(e){e.preventDefault(),i(n,a)}},"\u7f16\u8f91"),u.a.createElement("span",{className:"split-dot"}),u.a.createElement("a",{className:"text-secondary delete",href:"#",onClick:function(e){return r(n.id,e)}},"\u5220\u9664"),u.a.createElement("span",{className:"split-dot"})),t&&u.a.createElement("a",{className:"text-secondary reply-report",href:"#",onClick:function(e){return l(n,e)}},"\u4e3e\u62a5")))},K=Object(R["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(u.a.memo(Y)),J=(a("zliv"),15),W="",$=function(e){var t=e.id,a=e.mode,c=void 0===a?"article":a,h=e.isShowComment,j=void 0!==h&&h,w=e.setCommentState,k=e.event_object,x=e.user,_=Object(d["useRef"])(null),S=Object(d["useState"])(""),R=Object(m["a"])(S,2),T=R[0],D=R[1];_.current&&(_.current.value=T);var B=Object(d["useState"])([]),F=Object(m["a"])(B,2),q=F[0],z=F[1],V=Object(d["useState"])({isShow:!1,id:""}),Y=Object(m["a"])(V,2),$=Y[0],Q=Y[1],G=Object(d["useState"])({page:0}),Z=Object(m["a"])(G,2),X=Z[0],ee=Z[1],te=Object(d["useState"])(0),ae=Object(m["a"])(te,2),ne=ae[0],ce=ae[1],ie=Object(d["useState"])(0),re=Object(m["a"])(ie,2),le=re[0],oe=re[1],se=Object(d["useState"])("votes"),me=Object(m["a"])(se,2),de=me[0],ue=me[1],fe=Object(d["useState"])(!1),ve=Object(m["a"])(fe,2),be=ve[0],pe=ve[1],he=Object(d["useRef"])({});Object(d["useEffect"])((function(){_.current&&E()(_.current)}),[_]),Object(d["useEffect"])((function(){0===X.page&&ge()}),[null===X||void 0===X?void 0:X.page]),Object(d["useEffect"])((function(){ee({page:0})}),[de]),Object(d["useEffect"])((function(){be&&(q.map((function(e){return e.hidden=!1,e})),z(Object(g["orderBy"])(q,["created"])))}),[be]);var Ee=function(e){var a=e.item,n=e.parentItem,i=e.callback;return new Promise((function(e,r){if(Object(L["c"])()){var l={};n?l={reply_comment_id:n.id,reply_user_id:n.user.id}:(null===a||void 0===a?void 0:a.isReply)&&(l={reply_comment_id:a.reply_comment_id||a.id,reply_user_id:a.reply_user_id||a.user.id}),a.id&&!a.isReply&&a.isEdit?Object(O["ac"])(Object(s["a"])(Object(s["a"])({id:a.id,object_id:t},l),{},{text:null===a||void 0===a?void 0:a.original_text})).then((function(e){z(n?q.map((function(t){return t.id===n.id&&t.replies.forEach((function(t){t.id===e.id&&(t.isEdit=!1,t.parsed_text=e.parsed_text)})),t})):q.map((function(t){return t.id===e.id&&(t.parsed_text=null===e||void 0===e?void 0:e.parsed_text,t.isEdit=!1),t}))),"function"===typeof w&&w(!1)}))["finally"]((function(){e(!0)})):Object(O["s"])(Object(s["a"])(Object(s["a"])({object_id:t},l),{},{text:(null===a||void 0===a?void 0:a.commentVal)||T})).then((function(e){if("function"===typeof i&&i({isInvalid:!1,msg:""}),"string"===typeof a?D(""):z(q.map((function(e){return n?e.id===n.id&&e.replies.forEach((function(e){e.id===a.id&&(e.isReply=!1)})):e.id===a.id&&(e.isReply=!1,e.commentVal=""),e}))),"article"===c&&"string"!==typeof a)z(q.map((function(t){if(n){if(t.id===n.id){var c=Object(g["findIndex"])(t.replies,{id:a.id});t.replies.splice(c+1,0,e.comment)}}else t.id===a.id&&(Object(g["isEmpty"])(t.replies)?t.replies=[e.comment]:t.replies.unshift(e.comment));return t})));else if("string"!==typeof a){var t=Object(g["findIndex"])(q,{id:a.id});q.splice(t+1,0,e.comment),z(q)}else z([e.comment].concat(Object(o["a"])(q)));"function"===typeof w&&w(!1)}))["catch"]((function(e){(null===e||void 0===e?void 0:e.isError)&&"function"===typeof i&&i({isInvalid:!0,msg:e.reply_comment_id||e.text})}))["finally"]((function(){e(!0)}))}else r(!1)}))},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.commentId,n=void 0===a?"":a,i=e.commentPage,r=void 0===i?1:i,m=r;n?X[n]?(X[n].page+=1,ee(Object(s["a"])({},X)),m=X[n].page):ee(Object(s["a"])(Object(s["a"])({},X),Object(l["a"])({},n,{page:1}))):ee(Object(s["a"])(Object(s["a"])({},X),{},{page:r})),Object(O["J"])({objectId:t,commentId:n,page:m,sort:de,is_direct:"article"===c?0:1}).then((function(e){if(e)if(n){var t=q.map((function(t){return t.id===n&&(t.replies=Object(g["orderBy"])(1===m?e.comments:[].concat(Object(o["a"])(t.replies),Object(o["a"])(e.comments)),["created"])),t}));z(Object(g["uniqBy"])(t,"id")||[])}else{if(1===m&&(ce(e.total),oe(e.all_total)),be||"article"===c||(e.comments=Object(g["orderBy"])(e.comments,["votes"],["desc"]).map((function(e,t){return e.hidden=t>2,e}))),!Object(g["isEmpty"])(k)&&c===k.root.type&&"comment"===k.current.type){var a,i=Object(g["findIndex"])(e.comments,["id",Number((null===k||void 0===k||null===(a=k.current)||void 0===a?void 0:a.object_id)||0)]);i>2&&(e.comments.splice(i,1),e.comments=[k.current.comment].concat(Object(o["a"])(e.comments)))}z("article"===c?Object(g["uniqBy"])(e.comments,"id")||[]:Object(g["orderBy"])(Object(g["uniqBy"])([].concat(Object(o["a"])(q),Object(o["a"])(e.comments)),"id"),["created"])||[])}}))},Oe=function(e,t,a){var n;a.preventDefault(),n=t?q.map((function(a){return a.id===t.id&&(a.replies=a.replies.map((function(t){return t.id===e.id&&(t.isReply=!t.isReply),t.commentVal="@".concat(t.user.name,"[").concat(t.user.slug,"] "),t}))),a})):q.map((function(t){return t.id===e.id&&(t.isReply=!t.isReply),"article"!==c&&(t.commentVal="@".concat(t.user.name,"[").concat(t.user.slug,"] ")),t})),z(n)},ye=function(e,t){var a;a="object"===typeof t?q.map((function(a){return a.id===(null===t||void 0===t?void 0:t.id)&&(a.replies=a.replies.map((function(t){return t.id===e.id&&(t=e),t}))),a})):q.map((function(t){return t.id===e.id&&(t=e),t})),z(a)},je=function(e,t){t.preventDefault(),Q({id:e.id,isShow:!0})},we=function(e){Q(Object(s["a"])(Object(s["a"])({},$),{},{isShow:e}))},ke=function(e,t){var a;a=t?q.map((function(a){return a.id===t.id&&(a.replies=a.replies.map((function(t){return t.id===e.id&&(t.isEdit=!t.isEdit),t}))),a})):q.map((function(t){return t.id===e.id&&(t.isEdit=!t.isEdit),t})),z(a)},Ne=function(e,t){t.preventDefault(),y["m"].confirm({title:"\u5220\u9664\u8bc4\u8bba",content:"\u786e\u5b9a\u8981\u5220\u9664\u8be5\u8bc4\u8bba\u5417",onSuccess:function(){var t=Object(r["a"])(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(O["v"])(e);case 2:ge();case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()})};Object(d["useEffect"])((function(){if(!Object(g["isEmpty"])(he.current)&&xe(W)){var e=he.current[W];e&&Object(C["g"])(e)}}));var xe=Object(d["useCallback"])((function(e){var t=Object(C["e"])(k,e);return t&&(W=e),t}),[k]),_e=ne-(be?null===X||void 0===X?void 0:X.page:0)*J,Ce=q.filter((function(e){return!e.hidden}));return u.a.createElement("div",{id:"comment-area"},"article"===c&&u.a.createElement(P,{allTotal:le,sort:de,setSort:ue}),("question"===c||"answer"===c)&&u.a.createElement(A,{commentContent:T,isShowComment:j,inputRef:_,setCommentContent:D,onComment:Ee,id:t}),u.a.createElement(f["a"],{className:"comment-wrap border-0 ".concat("article"===c?"":0===q.length?"hidden":"bg-light border-0 mt-3")},u.a.createElement(f["a"].Body,{className:"article"===c?"":"p-3"},"article"===c&&u.a.createElement(M,{commentContent:T,inputRef:_,setCommentContent:D,onComment:Ee,id:t}),u.a.createElement("div",{className:"comment-body-wrap ".concat(q.filter((function(e){return!e.hidden})).length<1&&"d-none")},Ce.map((function(e,a){var n,i,r,l;return u.a.createElement(v["a"],{ref:function(t){return he.current[e.id]=t},key:e.id,className:"mb-r d-flex align-items-start ".concat(Ce.length!==a+1&&("article"===c?"mb-4":"mb-3"))},"article"===c&&u.a.createElement("img",{className:"d-block rounded-circle mr-3",width:"38",height:"38",src:e.user.avatar_url||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",alt:""}),u.a.createElement(v["a"].Body,{className:"w-0 ".concat(xe(e.id)?"scroll-warning":"")},u.a.createElement("div",{className:"commentUnit ".concat("question"===c||"answer"===c?"font-size-14":"")},u.a.createElement("div",{className:"mb-1"},u.a.createElement("a",{className:"d-uname",href:e.user.url,rel:"noreferrer",target:"_blank"},u.a.createElement("strong",null,e.user.name),"article"===c&&e.user.id===x.id&&u.a.createElement("span",{className:"text-secondary"},"\uff08\u4f5c\u8005\uff09")),"\uff1a",!e.isEdit&&u.a.createElement("div",{className:"parsedText fmt",dangerouslySetInnerHTML:{__html:e.parsed_text}})),e.isEdit&&u.a.createElement(N,{onChangeOfComment:ye,item:e,onComment:Ee}),u.a.createElement(H,{item:e,onEditComment:Oe,onEdit:ke,onRemove:Ne,onReport:je}),e.isReply&&u.a.createElement(f["a"],{className:"bg-light border-0 mt-2"},u.a.createElement(I,{id:t,className:"".concat("question"===c||"answer"==c?"p-0":"p-3"),onChangeOfComment:ye,item:e,onComment:Ee}))),u.a.createElement("div",{className:"replies ".concat(Object(g["isEmpty"])(e.replies)?"hidden":"")},u.a.createElement(f["a"],{className:"bg-light border-0 mt-2"},u.a.createElement(f["a"].Body,{className:"p-3"},u.a.createElement(b["a"],{className:"reply-list"},null===(n=e.replies)||void 0===n?void 0:n.map((function(a,n){return u.a.createElement(p["a"],{key:a.id,ref:function(e){return he.current[a.id]=e},className:"p-0 border-0 commentUnit ".concat(e.replies.length!==n+1&&"mb-3"," ").concat(xe(a.id)?"scroll-warning":""," ")},u.a.createElement("div",{className:"font-size-14 mb-1"},u.a.createElement("a",{className:"d-uname",href:a.user.url,target:"_blank",rel:"noreferrer"},u.a.createElement("strong",null,a.user.name),"article"===c&&a.user.id===x.id&&u.a.createElement("span",{className:"text-secondary"},"\uff08\u4f5c\u8005\uff09")),"\uff1a",!a.isEdit&&u.a.createElement("div",{className:"parsedText fmt",dangerouslySetInnerHTML:{__html:a.parsed_text}})),a.isEdit&&u.a.createElement(N,{isChild:!0,onChangeOfComment:ye,item:a,parentItem:e,onComment:Ee}),u.a.createElement(K,{item:e,subItem:a,onEditComment:Oe,onEdit:ke,onRemove:Ne,onReport:je}),a.isReply&&u.a.createElement(f["a"],{className:"bg-light border-0 mt-2"},u.a.createElement(I,{id:t,onChangeOfComment:ye,item:a,onComment:Ee,parentItem:e,className:"p-0"})))}))),e.replies&&e.replies_total>e.replies.length&&e.replies_total-((null===(i=X[e.id])||void 0===i?void 0:i.page)||0)*J>0&&u.a.createElement("div",{className:"font-size-14 d-flex mt-3 loader d-none"},u.a.createElement("a",{className:"text-secondary next-page-btn",href:"#",onClick:function(t){t.preventDefault(),ge({commentId:e.id})}},e.replies_total<J?"\u5171 ".concat(e.replies_total," \u6761\u56de\u590d"):"\u66f4\u591a ".concat(J>e.replies_total-((null===(r=X[e.id])||void 0===r?void 0:r.page)||0)*J?e.replies_total-((null===(l=X[e.id])||void 0===l?void 0:l.page)||0)*J:J," \u6761\u56de\u590d"))))))))}))),"article"===c?ne>J&&u.a.createElement(U,{total:ne,page:X.page,getData:function(e){return ge({commentPage:e})}}):ne>3&&_e>0&&u.a.createElement("div",{className:"font-size-14 d-flex loader d-none mt-3"},u.a.createElement("a",{className:"text-secondary next-page-btn",href:"#",onClick:function(e){e.preventDefault(),be?ge({commentPage:X.page+1}):(pe(!0),ee(Object(s["a"])(Object(s["a"])({},X),{},{page:X.page+1})))}},ne<J?"\u5171 ".concat(ne," \u6761\u8bc4\u8bba"):"\u66f4\u591a ".concat(J>_e?_e:J," \u6761\u8bc4\u8bba"))))),u.a.createElement(y["k"],Object(n["a"])({},$,{setModalStatus:we})))};t["a"]=u.a.memo($)},gZRy:function(e,t,a){},heTN:function(e,t,a){"use strict";var n=a("q1tI"),c=a.n(n),i=function(e){var t=e.tags,a=void 0===t?[]:t,n=e.className,i=void 0===n?"":n,r=(null===a||void 0===a?void 0:a.length)>0?c.a.createElement("div",{className:"d-flex flex-wrap align-items-center ".concat(i)},c.a.createElement("div",{className:"m-n1"},a.map((function(e){return c.a.createElement("a",{href:e.url,className:"m-1 badge-tag",key:e.id},(null===e||void 0===e?void 0:e.iconUrl)&&c.a.createElement("img",{src:e.iconUrl,alt:"",width:"16",height:"16",className:"mr-1"}),e.name)})))):null;return r};t["a"]=c.a.memo(i)},kUPb:function(e,t,a){"use strict";var n=a("tJVT"),c=a("q1tI"),i=a.n(c),r=a("9vsu"),l=a("pJDg"),o=a("cWnB"),s=a("dDCJ"),m=a("97+O"),d=a("YdHu"),u=a("24g8"),f=a("QeUd"),v=a("aWbt"),b=a("Dp36"),p=a("wFk/"),h=a("6Yt9"),E=a("0FX9"),g=a.n(E),O=a("9kvl"),y=a("tSvB"),j=function(e){var t=e.id,a=e.isLiked,E=void 0!==a&&a,O=e.votes,j=void 0===O?0:O,w=e.bookmarks,k=void 0===w?0:w,N=e.isBookmarked,x=void 0!==N&&N,_=e.title,C=void 0===_?"":_,S=e.banner,I=void 0===S?"":S,L=e.dispatch,R=e.showShare,T=void 0!==R&&R,A=e.source,D=e.showComment,P=void 0===D||D,B=e.isAuthor,M=void 0!==B&&B,F=e.sticky,q=void 0===F||F,z=e.style,U=void 0===z?{}:z,V=e.likeBtnSize,H=void 0===V?"lg":V,Y=e.isHated,K=void 0!==Y&&Y,J=e.showHateBtn,W=void 0!==J&&J,$=e.showBookmarkBtn,Q=void 0===$||$,G=e.showShareBtn,Z=void 0===G||G,X=e.isNotHandle,ee=void 0===X?{like:!1,hate:!1}:X,te=Object(c["useState"])(j),ae=Object(n["a"])(te,2),ne=ae[0],ce=ae[1],ie=Object(c["useState"])(K),re=Object(n["a"])(ie,2),le=re[0],oe=re[1],se=Object(c["useState"])(k),me=Object(n["a"])(se,2),de=me[0],ue=me[1],fe=Object(c["useState"])(E),ve=Object(n["a"])(fe,2),be=ve[0],pe=ve[1],he=Object(c["useState"])(x),Ee=Object(n["a"])(he,2),ge=Ee[0],Oe=Ee[1],ye=Object(c["useState"])(!1),je=Object(n["a"])(ye,2),we=je[0],ke=je[1],Ne=Object(c["useState"])(""),xe=Object(n["a"])(Ne,2),_e=xe[0],Ce=xe[1],Se=Object(c["useState"])(""),Ie=Object(n["a"])(Se,2),Le=Ie[0],Re=Ie[1],Te=Object(c["useState"])(""),Ae=Object(n["a"])(Te,2),De=Ae[0],Pe=Ae[1],Be=Object(c["useState"])(""),Me=Object(n["a"])(Be,2),Fe=Me[0],qe=Me[1],ze=Object(c["useState"])(!1),Ue=Object(n["a"])(ze,2),Ve=Ue[0],He=Ue[1],Ye=Object(c["useRef"])(),Ke=Object(c["useRef"])(),Je=Object(c["useRef"])();Object(c["useEffect"])((function(){pe(E),Oe(x),ce(j),ue(k),oe(K)}),[E,x,j,k,K]),Object(c["useEffect"])((function(){Ce("".concat(window.location.origin).concat(window.location.pathname)),Re("\u3010".concat(C,"\u3011\u5206\u4eab\u81ea @segment_fault\uff0c\u4f20\u9001\u95e8\uff1a")),Pe("\u3010".concat(C,"\u3011\u5206\u4eab\u81ea @SegmentFault\uff0c\u4f20\u9001\u95e8\uff1a"))}),[_e]),Object(c["useEffect"])((function(){if(!Fe){var e,t=null===(e=document)||void 0===e?void 0:e.querySelector(".qrcode");g.a.toCanvas(t,window.location.href,{margin:0},(function(e,t){qe(t.toDataURL())}))}}),[Fe]);var We=function(){Object(h["c"])()&&(ee.like?y["m"].confirm({content:"\u4e0d\u80fd\u7ed9\u81ea\u5df1\u70b9\u8d5e"}):M&&"article"===A?y["m"].confirm({content:"\u4f60\u662f\u4f5c\u8005\uff0c\u65e0\u6cd5\u5bf9\u81ea\u5df1\u8fdb\u884c\u6b64\u64cd\u4f5c"}):(Object(b["ob"])({id:t,type:A,is_like:be?0:1}).then((function(e){"article"!==A&&ce(e.votes)})),"article"===A&&ce(be?ne-1:ne+1),pe(!be),le&&oe(!le),L({type:"action/saveLike",payload:{votes:be?ne-1:ne+1,votesState:!be}})))},$e=function(){Object(h["c"])()&&ke(!0)},Qe=function(e){ue(e?de+1:de-1),Oe(e),L({type:"action/saveBookmark",payload:{bookmarks:e?de+1:de-1,bookmarkState:e}})},Ge=function(){Object(h["c"])()&&(ee.hate?y["m"].confirm({content:"\u4e0d\u80fd\u7ed9\u81ea\u5df1\u70b9\u8e29"}):(Object(b["jb"])({id:t,type:A,is_hate:le?0:1}).then((function(e){ce(e.votes)})),oe(!le),He(!le),be&&pe(!be)))},Ze=i.a.createElement(r["a"],{id:"popover-basic"},i.a.createElement(r["a"].Content,null,"\u5982\u679c\u8be5\u5185\u5bb9\u6709\u53ef\u6539\u8fdb\u7684\u4f59\u5730\uff0c\u6b22\u8fce\u901a\u8fc7\u8bc4\u8bba\u7ed9\u4f5c\u8005\u5efa\u8bae\u3002"));return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"sticky-wrap ".concat(q?"sticky-top":""," functional-area-left d-none d-xl-flex justify-content-center pt-5 ").concat("article"===A?"functional-area-left2":""),style:U},i.a.createElement(l["a"],{vertical:!0,className:"align-items-center"},i.a.createElement(o["a"],{variant:"outline-primary",className:"func-btn mainLike  sflex-center shadow-sm rounded-circle main-".concat(H,"-Like ").concat(W?"mb-2":"mb-3"),active:be,onClick:We,"aria-label":"\u70b9\u8d5e"},i.a.createElement("i",{className:"far fa-thumbs-up"}),"question"===A||"answer"===A?i.a.createElement("span",{className:"mainLikeNum ".concat(0!==ne?"":"invisible")},ne):i.a.createElement("span",{className:"mainLikeNum ".concat(ne>0?"":"invisible")},ne)),W&&i.a.createElement(s["a"],{trigger:"click",placement:"right",show:Ve,overlay:Ze},i.a.createElement(o["a"],{variant:"outline-secondary",className:"shadow-sm func-btn sflex-center rounded-circle main-".concat(H,"-Like main-hate mb-3"),active:le,onClick:Ge,onBlur:function(){return He(!1)},"aria-label":"\u70b9\u8e29"},i.a.createElement("i",{className:"far fa-thumbs-down fa-flip-horizontal"}))),Q&&i.a.createElement(o["a"],{variant:"outline-secondary",className:"func-btn sflex-center rounded-circle mb-2",onClick:$e,active:ge,"aria-label":"\u6536\u85cf"},i.a.createElement("i",{className:"far fa-bookmark"})),P&&i.a.createElement("a",{className:"func-btn sflex-center btn btn-outline-secondary rounded-circle mb-2",href:"#comment-area","aria-label":"\u8bc4\u8bba"},i.a.createElement("i",{className:"far fa-comment-alt-lines"})),Z&&i.a.createElement(m["a"],null,i.a.createElement(m["a"].Toggle,{as:d["a"],className:"func-btn nav-tab-item  rounded-pill btn btn-outline-secondary sflex-center rounded-circle"},i.a.createElement("i",{className:"far fa-share-alt"})),i.a.createElement(m["a"].Menu,{className:"dropdown-menu-down",show:T},i.a.createElement("div",{className:"text-center mt-2"},i.a.createElement("div",{className:"qr"},i.a.createElement("img",{crossOrigin:"anonymous",src:Fe,width:"118",height:"118"})),"\u626b\u4e00\u626b\u5206\u4eab"),i.a.createElement("div",{className:"dropdown-divider"}),i.a.createElement(m["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&Ye.current.click()}},i.a.createElement(u["a"],{title:De,url:_e,image:I,ref:Ye,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},i.a.createElement("i",{className:"fab fa-weibo fa-fw"})," \u65b0\u6d6a\u5fae\u535a")),i.a.createElement(m["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&Ke.current.click()}},i.a.createElement(f["a"],{title:Le,url:_e,ref:Ke,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},i.a.createElement("i",{className:"fab fa-twitter fa-fw"})," Twitter")),i.a.createElement(m["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&Je.current.click()}},i.a.createElement(v["a"],{title:Le,url:_e,ref:Je,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},i.a.createElement("i",{className:"fab fa-facebook fa-fw"})," Facebook")))))),i.a.createElement(p["a"],{id:t,isShow:we,setShowStatus:ke,setBookmarkedState:Qe,source:A}),i.a.createElement("canvas",{hidden:!0,className:"qrcode"}))};t["a"]=Object(O["b"])((function(e){var t=e.action;return{action:t}}))(i.a.memo(j))},kwfb:function(e,t,a){"use strict";var n=a("tJVT"),c=a("q1tI"),i=a.n(c),r=function(e){var t=e.name,a=Object(c["useState"])(""),r=Object(n["a"])(a,2),l=r[0],o=r[1];return Object(c["useEffect"])((function(){var e,a=null;(null===(e=window.OA_output)||void 0===e?void 0:e[t])&&clearInterval(a),a=setInterval((function(){var e,n;(null===(e=window.OA_output)||void 0===e?void 0:e[t])&&((null===(n=window.OA_output)||void 0===n?void 0:n[t])&&clearInterval(a),o(window.OA_output[t]))}))}),[]),Object(c["useEffect"])((function(){l&&l.indexOf("adsbygoogle")>-1&&(window.adsbygoogle=window.adsbygoogle||[]).push({})}),[l]),i.a.createElement("div",{id:"OA_holder_".concat(t),className:"ad-container",style:{display:5===Number(t)?"none":"block"},dangerouslySetInnerHTML:{__html:l}})};t["a"]=r},nWVH:function(e,t,a){},nlcd:function(e,t,a){"use strict";var n=a("EVdn");t["a"]=function(){var e='\n  <div class="is-active ImageView p-4" style="display: none;">\n      <div class="ImageView-inner" style="overflow: auto;">\n          <img src="" class="ImageView-img" alt="preview" style="max-width: 100%">\n      </div>\n  </div>';n("body ImageView")&&n(".ImageView").remove(),n("body").append(e).on("click",".ImageView",(function(){n(this).fadeOut()})).on("click","article img",(function(){var e=n(this).attr("src");n(this).parents("a").length||(e.startsWith("/img/")&&!e.match(/\/view$/)&&(e+="/view"),n(".ImageView").find("img").attr("src",e)[0].onload=function(){n(".ImageView").fadeIn()})}))}},oGiJ:function(e,t,a){"use strict";a.r(t);var n=a("WmNS"),c=a.n(n),i=a("9og8"),r=a("k1fw"),l=a("tJVT"),o=a("q1tI"),s=a.n(o),m=a("7vrA"),d=a("3Z9Z"),u=a("JI6e"),f=a("TUci"),v=a("kUPb"),b=a("6xyR"),p=a("HToz"),h=a.n(p),E=a("dDCJ"),g=a("AINe"),O=a("Wgwc"),y=a.n(O),j=a("Dp36"),w=a("QgiU"),k=a.n(w),N=(a("pHGr"),a("bdvc"));y.a.locale("zh-cn"),y.a.extend(k.a);var x=function(e){var t,a,n,c,i,r,l,o=e.title,m=e.user,d=e.id,u=e.created,f=e.modified,v=e.initPage,b=e.actions,p=e.member_actions,h=function(){(null===b||void 0===b?void 0:b.find((function(e){return"recommend"===e.action})))?Object(j["i"])(d).then((function(e){e&&(null===v||void 0===v||v())})):Object(j["e"])(d).then((function(e){e&&(null===v||void 0===v||v())}))};return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"h2 mb-3"},s.a.createElement("a",{href:"/a/".concat(d),className:"text-body"},o)),s.a.createElement("div",{className:"d-flex align-items-center mb-4"},s.a.createElement("a",{href:null===m||void 0===m?void 0:m.url,className:"d-flex align-items-center"},s.a.createElement("picture",{className:"mr-2 d-sm-block d-none"},s.a.createElement("img",{src:(null===m||void 0===m?void 0:m.avatar_url)||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",alt:"",className:"d-inline-block rounded-circle",width:"32"})),s.a.createElement("strong",{className:"align-self-center font-size-14"},null===m||void 0===m?void 0:m.name)),(null===m||void 0===m||null===(t=m.user_auth)||void 0===t?void 0:t.is_auth)?s.a.createElement("ul",{className:"list-inline mb-0 authentication-info sflex-center font-size-14 ml-1"},s.a.createElement("li",{className:"list-inline-item",style:{color:"#BF7158"}},s.a.createElement(E["a"],{placement:"top",overlay:s.a.createElement(g["a"],{id:"top"},s.a.createElement("span",{className:""},null===m||void 0===m||null===(a=m.user_auth)||void 0===a?void 0:a.info))},s.a.createElement("i",{className:"fas fa-badge-check text-warning"})))):null,u!==f&&f>u?s.a.createElement(E["a"],{placement:"top",overlay:s.a.createElement(g["a"],{id:"top"},s.a.createElement("span",{className:""},"\u66f4\u65b0\u4e8e ",Object(N["c"])(f)))},s.a.createElement("time",{className:"text-secondary font-size-14",dateTime:y.a.unix(u).toISOString(),itemProp:"datePublished",style:{marginLeft:"12px"}},"\u53d1\u5e03\u4e8e ",Object(N["c"])(u))):s.a.createElement("time",{className:"text-secondary font-size-14",dateTime:y.a.unix(u).toISOString(),itemProp:"datePublished",style:{marginLeft:"12px"}},"\u53d1\u5e03\u4e8e ",Object(N["c"])(u)),(null===p||void 0===p||null===(n=p.find((function(e){return"edit"===e.action})))||void 0===n?void 0:n.name)?s.a.createElement("a",{href:"/a/".concat(d,"/edit"),className:"font-size-14",style:{marginLeft:"12px"}},"\u7f16\u8f91"):null,(null===b||void 0===b||null===(c=b.find((function(e){return"recommend"===e.action})))||void 0===c?void 0:c.name)||(null===b||void 0===b||null===(i=b.find((function(e){return"cancel-recommend"===e.action})))||void 0===i?void 0:i.name)?s.a.createElement("a",{href:"#",className:"font-size-14",onClick:h,style:{marginLeft:"12px"}},(null===b||void 0===b||null===(r=b.find((function(e){return"recommend"===e.action})))||void 0===r?void 0:r.name)||(null===b||void 0===b||null===(l=b.find((function(e){return"cancel-recommend"===e.action})))||void 0===l?void 0:l.name)):null))},_=x,C=a("tSvB"),S=a("4GjR"),I=a("9kvl"),L=(a("5SRE"),function(e){var t=e.realRed,a=void 0===t?0:t,n=e.read,c=void 0===n?0:n,i=e.created,r=void 0===i?0:i,l=e.modified,o=void 0===l?0:l,m=e.id,f=e.actions,v=void 0===f?[]:f,b=e.initPage,p=e.isEditor,h=e.memberActions,O=Object(I["g"])(),j=function(){O({type:"global/saveSingleNotice",payload:""})},w=function(e,t){switch(window.scroll(0,0),t){case"report":C["m"].confirm({content:"string"===typeof e?e:"\u4e3e\u62a5\u6210\u529f"});break;case"hide-setting":case"delete":O({type:"global/saveSingleNotice",payload:"string"===typeof e?e:""}),null===b||void 0===b||b();break;case"reject":j(),null===b||void 0===b||b();break;default:"string"===typeof e&&O({type:"global/saveSingleNotice",payload:"string"===typeof e?e:""}),null===b||void 0===b||b();break}};return s.a.createElement(s.a.Fragment,null,s.a.createElement(d["a"],{className:"text-secondary font-size-14 mt-3 mb-5 d-flex justify-content-between"},s.a.createElement(u["a"],null,s.a.createElement("span",null,"\u9605\u8bfb ",Object(N["f"])(c),p&&a>0&&"\uff08UV ".concat(Object(N["f"])(a),"\uff09")),s.a.createElement("span",{className:"split-dot"}),r!==o&&o>r?s.a.createElement(E["a"],{placement:"top",overlay:s.a.createElement(g["a"],{id:"tip-top"},"\u53d1\u5e03\u4e8e ",s.a.createElement("span",null,Object(N["c"])(r)))},s.a.createElement("time",{dateTime:y.a.unix(r).toISOString(),itemProp:"datePublished"},"\u66f4\u65b0\u4e8e ",Object(N["c"])(o))):s.a.createElement("time",{dateTime:y.a.unix(r).toISOString(),itemProp:"datePublished"},"\u53d1\u5e03\u4e8e ",Object(N["c"])(r))),s.a.createElement(u["a"],{className:"operation col-6 text-right col-xs-3"},s.a.createElement(S["a"],{id:m,actions:v,type:"article",onCallBack:w,member_actions:h}))))}),R=s.a.memo(L),T=a("pJDg"),A=a("cWnB"),D=a("97+O"),P=a("24g8"),B=a("QeUd"),M=a("aWbt"),F=a("wFk/"),q=a("6Yt9"),z=a("0FX9"),U=a.n(z),V=a("YdHu"),H=(a("78gL"),function(e){var t=e.id,a=e.isLiked,n=void 0!==a&&a,c=e.votes,i=void 0===c?0:c,r=e.isBookmarked,m=void 0!==r&&r,d=e.bookmarks,u=void 0===d?0:d,f=e.title,v=void 0===f?"":f,b=e.banner,p=void 0===b?"":b,h=e.isAuthor,E=e.dispatch,g=Object(o["useState"])(i),O=Object(l["a"])(g,2),y=O[0],w=O[1],k=Object(o["useState"])(u),N=Object(l["a"])(k,2),x=N[0],_=N[1],S=Object(o["useState"])(n),I=Object(l["a"])(S,2),L=I[0],R=I[1],z=Object(o["useState"])(m),H=Object(l["a"])(z,2),Y=H[0],K=H[1],J=Object(o["useState"])(!1),W=Object(l["a"])(J,2),$=W[0],Q=W[1],G=Object(o["useState"])(""),Z=Object(l["a"])(G,2),X=Z[0],ee=Z[1],te=Object(o["useState"])(""),ae=Object(l["a"])(te,2),ne=ae[0],ce=ae[1],ie=Object(o["useState"])(""),re=Object(l["a"])(ie,2),le=re[0],oe=re[1],se=Object(o["useState"])(""),me=Object(l["a"])(se,2),de=me[0],ue=me[1],fe=Object(o["useRef"])(),ve=Object(o["useRef"])(),be=Object(o["useRef"])();Object(o["useEffect"])((function(){R(n),K(m),w(i),_(u)}),[n,m,i,u]),Object(o["useEffect"])((function(){ee("".concat(window.location.origin).concat(window.location.pathname)),ce("\u3010".concat(v,"\u3011\u5206\u4eab\u81ea @segment_fault\uff0c\u4f20\u9001\u95e8\uff1a")),oe("\u3010".concat(v,"\u3011\u5206\u4eab\u81ea @SegmentFault\uff0c\u4f20\u9001\u95e8\uff1a"))}),[X]),Object(o["useEffect"])((function(){if(!de){var e,t=null===(e=document)||void 0===e?void 0:e.querySelector(".qrcode");U.a.toCanvas(t,window.location.href,{margin:0},(function(e,t){ue(t.toDataURL())}))}}),[de]);var pe=function(){Object(q["c"])()&&(h?C["m"].confirm({content:"\u4f60\u662f\u4f5c\u8005\uff0c\u65e0\u6cd5\u5bf9\u81ea\u5df1\u8fdb\u884c\u6b64\u64cd\u4f5c"}):(Object(j["ob"])({id:t,type:"article",is_like:L?0:1}),w(L?y-1:y+1),R(!L),E({type:"action/saveLike",payload:{votes:L?y-1:y+1,votesState:!L}})))},he=function(){Object(q["c"])()&&Q(!0)},Ee=function(e){_(e?x+1:x-1),K(e),E({type:"action/saveBookmark",payload:{bookmarks:e?x+1:x-1,bookmarkState:e}})};return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"functional-area-bottom text-center"},s.a.createElement(T["a"],{className:"btn-group like-group align-items-center",role:"group"},s.a.createElement(A["a"],{className:"btn mr-2 rounded",variant:"outline-primary",active:L,onClick:pe},s.a.createElement("i",{className:"far fa-thumbs-up"}),s.a.createElement("span",{className:"ml-1"},L?"\u5df2\u8d5e":"\u8d5e"),y>0&&s.a.createElement("span",{className:"mainLikeNum ml-1"},y)),s.a.createElement(A["a"],{className:"btn mr-2 rounded",variant:"outline-secondary",active:Y,onClick:he},s.a.createElement("i",{className:"far fa-bookmark"}),s.a.createElement("span",{className:"ml-1"},Y?"\u5df2\u6536\u85cf":"\u6536\u85cf"),x>0&&s.a.createElement("span",{className:"ml-1"},x)),s.a.createElement(D["a"],{className:"bottom-share-wrap"},s.a.createElement(D["a"].Toggle,{as:V["a"],className:"nav-tab-item  btn d-flex justify-content-center align-items-center"},s.a.createElement(A["a"],{className:"btn rounded",variant:"outline-secondary",active:!1},s.a.createElement("i",{className:"far fa-share-alt"}),s.a.createElement("span",{className:"ml-1"},"\u5206\u4eab"))),s.a.createElement(D["a"].Menu,{className:"dropdown-menu-down"},s.a.createElement("div",{className:"text-center mt-2",style:{cursor:"auto"}},s.a.createElement("div",{className:"qr"},s.a.createElement("img",{crossOrigin:"anonymous",src:de,width:"118",height:"118"})),"\u626b\u4e00\u626b\u5206\u4eab"),s.a.createElement("div",{className:"dropdown-divider"}),s.a.createElement(D["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&fe.current.click()}},s.a.createElement(P["a"],{title:le,url:X,image:p,ref:fe,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},s.a.createElement("i",{className:"fab fa-weibo fa-fw"})," \u65b0\u6d6a\u5fae\u535a")),s.a.createElement(D["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&ve.current.click()}},s.a.createElement(B["a"],{title:ne,url:X,ref:ve,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},s.a.createElement("i",{className:"fab fa-twitter fa-fw"})," Twitter")),s.a.createElement(D["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&be.current.click()}},s.a.createElement(M["a"],{title:ne,url:X,ref:be,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},s.a.createElement("i",{className:"fab fa-facebook fa-fw"})," Facebook")))))),s.a.createElement(F["a"],{id:t,isShow:$,setShowStatus:Q,setBookmarkedState:Ee,source:"article"}),s.a.createElement("canvas",{hidden:!0,className:"qrcode"}))}),Y=Object(I["b"])((function(e){var t=e.action;return Object(r["a"])({},t)}))(s.a.memo(H)),K=function(e){var t=e.type,a=e.licence;return s.a.createElement("div",{className:"font-size-14 text-secondary text-center mt-3 mb-5"},(0===t||1===t)&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",null,"\u672c\u4f5c\u54c1\u7cfb\u539f\u521b\uff0c"),"sa"===a?s.a.createElement("a",{target:"_blank",rel:"noreferrer",className:"text-secondary",href:"https://creativecommons.org/licenses/by-nc-sa/4.0/"},"\u91c7\u7528\u300a\u7f72\u540d-\u975e\u5546\u4e1a\u6027\u4f7f\u7528-\u76f8\u540c\u65b9\u5f0f\u5171\u4eab 4.0 \u56fd\u9645\u300b\u8bb8\u53ef\u534f\u8bae"):"nd"===a?s.a.createElement("a",{target:"_blank",rel:"noreferrer",className:"text-secondary",href:"https://segmentfault.com/tos#sec-licence-4"},"\u4f5c\u8005\u4fdd\u7559\u6240\u6709\u6743\u5229\uff0c\u672a\u7ecf\u4f5c\u8005\u5141\u8bb8\uff0c\u7981\u6b62\u8f6c\u8f7d\u548c\u6f14\u7ece"):s.a.createElement("a",{target:"_blank",rel:"noreferrer",className:"text-secondary",href:"https://creativecommons.org/licenses/by-nc-nd/4.0/"},"\u91c7\u7528\u300a\u7f72\u540d-\u975e\u5546\u4e1a\u6027\u4f7f\u7528-\u7981\u6b62\u6f14\u7ece 4.0 \u56fd\u9645\u300b\u8bb8\u53ef\u534f\u8bae")))},J=s.a.memo(K),W=a("kwfb"),$=function(e){var t=e.originUrl,a=void 0===t?"":t,n=e.type;return s.a.createElement("div",{className:"bg-light my-4 p-3"},s.a.createElement("a",{className:"d-flex align-items-center text-body",href:a,target:"_blank",rel:"noreferrer"},s.a.createElement("div",{className:"d-flex align-items-center bg-secondary justify-content-center mr-3 rounded px-3",style:{width:"48px",height:"48px"}},s.a.createElement("i",{className:"far fa-file-alt font-size-20 text-white"})),s.a.createElement("div",{className:"media-body w-100"},s.a.createElement("div",{className:"text-body mb-0 font-weight-bold"},s.a.createElement("span",{style:{color:"#000"}},"\u672c\u6587\u7cfb",2===n?"\u8f6c\u8f7d":"\u7ffb\u8bd1","\uff0c\u9605\u8bfb\u539f\u6587")),s.a.createElement("div",{className:"font-size-13 text-secondary text-truncate w-75"},s.a.createElement("small",{style:{wordBreak:"break-word"}},a)))))},Q=s.a.memo($),G=a("heTN"),Z=a("EVdn"),X=a("wwbV"),ee=function(e){var t=e.blog,a=Object(o["useState"])((null===t||void 0===t?void 0:t.is_followed)||0),n=Object(l["a"])(a,2),r=n[0],m=n[1],d=function(){var e=Object(i["a"])(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Object(q["c"])()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Object(j["B"])({id:t.id,is_follow:r?0:1});case 4:return m(!r),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o["useEffect"])((function(){Z(document.body).width()<576&&Z("#followUser button").addClass("col-12"),Z(window).resize((function(){Z(document.body).width()<576?Z("#followUser button").addClass("col-12"):Z("#followUser button").removeClass("col-12")}))})),s.a.createElement(s.a.Fragment,null,s.a.createElement("hr",{className:"mb-0"}),s.a.createElement("div",{className:"d-flex flex-sm-row align-items-center pt-4 row"},s.a.createElement("div",{className:"d-flex align-items-center flex-grow-1 author-left col-sm-9 col-12"},s.a.createElement("img",{className:"mr-3 rounded",width:"64",src:"https://image-static.segmentfault.com/383/303/3833030929-5ffd15fc110ab","aria-hidden":"true"}),s.a.createElement("div",{className:"w-100"},s.a.createElement("a",{href:null===t||void 0===t?void 0:t.url,className:"text-body"},s.a.createElement("h5",{className:"mb-0"},null===t||void 0===t?void 0:t.name)),(null===t||void 0===t?void 0:t.excerpt)&&s.a.createElement("div",{className:"text-truncate text-secondary mt-2"},null===t||void 0===t?void 0:t.excerpt))),s.a.createElement("div",{className:"author-right flex-shrink-0 col-sm-3 col-12 text-sm-right text-left mt-sm-0 mt-3",id:"followUser"},s.a.createElement(X["a"],{onClick:d},r?"\u5df2\u5173\u6ce8":"\u5173\u6ce8\u4e13\u680f"))))},te=s.a.memo(ee),ae=a("LvDl"),ne=function(e){var t,n,c=e.detail,i=e.actionData,r=e.actions,m=e.initPage,d=e.imageUrl,u=e.isEditor,f=e.isAuthor,v=e.memberActions,p=e.articleHtml,E=Object(o["useState"])(Object(I["e"])()?"":"https://cdn.segmentfault.com/r-7b7553ca/"),g=Object(l["a"])(E,2),O=g[0],j=g[1],w=c.article,k=c.blog,N=Object(o["useState"])(!1),x=Object(l["a"])(N,2),C=x[0],S=x[1],L=Object(o["useState"])(Object(I["e"])()?(null===(t=document.querySelector(".article.fmt"))||void 0===t?void 0:t.innerHTML)||w.parsed_text:p),T=Object(l["a"])(L,2),A=T[0],D=T[1],P=Object(I["g"])();Object(I["e"])()&&!C&&(window.articleHtml=(null===(n=document.querySelector(".article.fmt"))||void 0===n?void 0:n.innerHTML)||"");return Object(o["useEffect"])((function(){if(!Object(ae["isEmpty"])(c)){var e=new h.a;e.update()}})),Object(o["useEffect"])((function(){S(!0),j(window.publicPath||""),P({type:"articleDetail/saveArticleHtml",payload:{id:w.id,parsed_text:window.articleHtml}})}),[]),Object(o["useEffect"])((function(){w.parsed_text&&D(w.parsed_text)}),[w.parsed_text]),Object(o["useEffect"])((function(){if(!Object(ae["isEmpty"])(c)){var e=new h.a;e.update()}})),s.a.createElement(s.a.Fragment,null,s.a.createElement(I["a"],null,s.a.createElement("meta",{name:"twitter:card",content:d?"summary_large_image":"summary"}),s.a.createElement("meta",{name:"twitter:image",content:d||"".concat(O,"touch-icon.png")}),s.a.createElement("meta",{name:"twitter:site",content:"@segment_fault"}),s.a.createElement("meta",{name:"twitter:creator",content:"@segmentfault"}),s.a.createElement("meta",{name:"twitter:title",content:null===w||void 0===w?void 0:w.title}),s.a.createElement("meta",{name:"og:type",content:"article"}),s.a.createElement("meta",{name:"og:image",content:d||"".concat(O,"touch-icon.png")}),s.a.createElement("meta",{name:"og:title",content:null===w||void 0===w?void 0:w.title}),s.a.createElement("meta",{name:"msvalidate.01",content:"2C018C53297C8388F3E7052F5E9CA6AF"}),s.a.createElement("meta",{name:"event-object",value:'{"current": ["article", ["'.concat(null===w||void 0===w?void 0:w.id,'"]], "root": ["article", "').concat(null===w||void 0===w?void 0:w.id,'"]}'),id:"SFEventObject"}),s.a.createElement("script",{type:"application/ld+json"},'{\n            "@context": "https://schema.org",\n            "@type": "Article",\n            "mainEntityOfPage": {\n              "@type": "WebPage",\n              "@id": "https://google.com/article"\n            },\n            "name": '.concat(JSON.stringify((null===w||void 0===w?void 0:w.title)||""),',\n            "headline": ').concat(JSON.stringify((null===w||void 0===w?void 0:w.title)||""),',\n            "image": "').concat((null===w||void 0===w?void 0:w.cover)?null===w||void 0===w?void 0:w.cover:d||"".concat(O,"touch-icon.png"),'",\n            "datePublished": "').concat(y.a.unix(null===w||void 0===w?void 0:w.created).toISOString(),'",\n            "dateModified": "').concat(y.a.unix((null===w||void 0===w?void 0:w.created)>(null===w||void 0===w?void 0:w.modified)?null===w||void 0===w?void 0:w.created:null===w||void 0===w?void 0:w.modified).toISOString(),'",\n            "url": "https://segmentfault.com/a/').concat(null===w||void 0===w?void 0:w.id,'",\n            "author": {\n              "@type": "Person",\n              "name": ').concat(JSON.stringify(null===w||void 0===w?void 0:w.user.name),'\n            },\n            "publisher": {\n              "@type": "Organization",\n              "name": "SegmentFault",\n              "logo": {\n                "@type": "ImageObject",\n                "url":\n                  "https://assets.segmentfault.com/v-5fc4b0b2/global/img/static/touch-icon.png"\n              }\n            }\n          }'))),s.a.createElement(b["a"],{className:"border-0 mb-4"},(null===w||void 0===w?void 0:w.cover)&&s.a.createElement(b["a"].Img,{variant:"top",src:a("xQMv"),className:"w-100 rounded-top",style:{background:"no-repeat center url(".concat(w.cover,")"),backgroundSize:"cover"},alt:"\u5934\u56fe"}),s.a.createElement(b["a"].Body,{className:"p-lg-30 position-relative"},s.a.createElement(_,{title:null===w||void 0===w?void 0:w.title,user:null===w||void 0===w?void 0:w.user,id:null===w||void 0===w?void 0:w.id,created:null===w||void 0===w?void 0:w.created,modified:null===w||void 0===w?void 0:w.modified,initPage:m,actions:r,member_actions:v}),s.a.createElement(W["a"],{name:"25"}),s.a.createElement("article",{className:"article fmt article-content ",dangerouslySetInnerHTML:{__html:A}}),s.a.createElement(G["a"],{tags:null===w||void 0===w?void 0:w.tags}),(null===w||void 0===w?void 0:w.article_type)>1&&s.a.createElement(Q,{originUrl:null===w||void 0===w?void 0:w.origin_url,type:null===w||void 0===w?void 0:w.article_type}),s.a.createElement("div",{className:"my-4"},s.a.createElement(W["a"],{name:"3"})),s.a.createElement(R,{realRed:null===w||void 0===w?void 0:w.real_unique_views,read:null===w||void 0===w?void 0:w.real_views,created:null===w||void 0===w?void 0:w.created,modified:null===w||void 0===w?void 0:w.modified,id:null===w||void 0===w?void 0:w.id,actions:r,initPage:m,isEditor:u,memberActions:v}),s.a.createElement(Y,{id:null===w||void 0===w?void 0:w.id,title:null===w||void 0===w?void 0:w.title,votes:null===i||void 0===i?void 0:i.votes,isLiked:null===i||void 0===i?void 0:i.votesState,isBookmarked:null===i||void 0===i?void 0:i.bookmarkState,bookmarks:null===i||void 0===i?void 0:i.bookmarks,banner:null===w||void 0===w?void 0:w.cover,isAuthor:f}),s.a.createElement(J,{type:null===w||void 0===w?void 0:w.article_type,licence:null===k||void 0===k?void 0:k.licence}),(null===k||void 0===k?void 0:k.id)&&s.a.createElement(te,{blog:k}))))},ce=s.a.memo(ne),ie=a("cor7"),re=a("sjrs"),le=function(e){var t,a=e.data;return s.a.createElement("a",{className:"list-group-item list-group-item-action py-3",href:"".concat(null===a||void 0===a?void 0:a.url,"?utm_source=sf-related"),target:"_blank"},s.a.createElement("h5",{className:"h5 mb-2 text-break",style:{color:"#212529"}},null===a||void 0===a?void 0:a.title),s.a.createElement("p",{className:"mb-2 text-truncate text-secondary"},null===a||void 0===a?void 0:a.excerpt),s.a.createElement("p",{className:"d-flex align-items-center font-size-14 mb-0"},s.a.createElement("span",{className:"text-primary"},null===a||void 0===a||null===(t=a.user)||void 0===t?void 0:t.name),(null===a||void 0===a?void 0:a.views)>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"split-dot"}),s.a.createElement("span",null,"\u9605\u8bfb ",Object(N["f"])(null===a||void 0===a?void 0:a.views))),(null===a||void 0===a?void 0:a.votes)>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"split-dot"}),s.a.createElement("span",null,Object(N["f"])(null===a||void 0===a?void 0:a.votes)," \u8d5e")),(null===a||void 0===a?void 0:a.comments)>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"split-dot"}),s.a.createElement("span",null,Object(N["f"])((null===a||void 0===a?void 0:a.comments)||0)," \u8bc4\u8bba"))))},oe=s.a.memo(le),se=(a("wroQ"),function(e){var t=e.list,a=void 0===t?[]:t;return a.length?s.a.createElement(re["a"],{className:"recommend-list-wrap mt-4"},s.a.createElement("h5",{className:"h5 mb-2 px-4 px-md-0",style:{fontWeight:600}},"\u63a8\u8350\u9605\u8bfb"),s.a.createElement("div",{className:"card border-0"},s.a.createElement("div",{className:"list-group list-group-flush"},a.map((function(e){return s.a.createElement(oe,{key:null===e||void 0===e?void 0:e.id,data:e})}))))):null}),me=s.a.memo(se),de=a("6T2I"),ue=function(e){var t,a,n,c,i,r,l,o=e.id,m=e.extra,d=e.status,u=e.sessionUser,v=void 0===u?{}:u;return s.a.createElement(s.a.Fragment,null,"rejected"===d&&s.a.createElement(f["a"],{className:"mb-3",variant:"warning"},s.a.createElement("div",{className:""},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:m.reason}}),s.a.createElement("div",null,s.a.createElement("span",null,"\u4f60\u53ef\u4ee5"),s.a.createElement("a",{href:"/a/".concat(o,"/edit")}," \u518d\u6b21\u7f16\u8f91 "),s.a.createElement("span",null,"\u4ee5\u91cd\u65b0\u53d1\u8868"))),s.a.createElement("div",{className:"mt-3"},"\u6ce8\u610f\uff1a\u5982\u679c\u8be5\u5185\u5bb9"),s.a.createElement("ul",null,s.a.createElement("li",null,"\u8fde\u7eed 3 \u6b21\u53d1\u8868\u672a\u901a\u8fc7"),s.a.createElement("li",null,"\u53d1\u8868\u672a\u6210\u529f\u4e00\u5468\u5185\u672a\u505a\u4efb\u4f55\u6539\u52a8")),s.a.createElement("div",{className:"mt-3"},"\u90fd\u5c06\u88ab\u7cfb\u7edf\u81ea\u52a8\u5220\u9664\uff0c\u5982\u6709\u5fc5\u8981\uff0c\u8bf7\u505a\u597d\u5907\u4efd\u3002")),"deleted"===d&&s.a.createElement(f["a"],{className:"mb-3",variant:"warning"},s.a.createElement("span",{dangerouslySetInnerHTML:{__html:m.reason}}),s.a.createElement("div",null,"\u64cd\u4f5c\u8005\uff1a",s.a.createElement("a",{href:null===m||void 0===m||null===(t=m.operator)||void 0===t?void 0:t.url},null===m||void 0===m||null===(a=m.operator)||void 0===a?void 0:a.name))),"hidden"===d&&(null===v||void 0===v||null===(n=v.roles)||void 0===n?void 0:n.is_editor)&&s.a.createElement(f["a"],{className:"mb-3",variant:"warning"},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:m.reason}}),(null===m||void 0===m?void 0:m.operator)?s.a.createElement("div",null,"\u64cd\u4f5c\u8005\uff1a",s.a.createElement("a",{href:null===m||void 0===m||null===(c=m.operator)||void 0===c?void 0:c.url},null===m||void 0===m||null===(i=m.operator)||void 0===i?void 0:i.name)):""),"locked"===d&&s.a.createElement(f["a"],{className:"mb-3",variant:"warning"},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:m.reason}}),s.a.createElement("div",null,"\u64cd\u4f5c\u8005\uff1a",s.a.createElement("a",{href:null===m||void 0===m||null===(r=m.operator)||void 0===r?void 0:r.url},null===m||void 0===m||null===(l=m.operator)||void 0===l?void 0:l.name),s.a.createElement("br",null),"\u64cd\u4f5c\u8005\u65f6\u95f4\uff1a",y.a.unix(null===m||void 0===m?void 0:m.operator_time).format("YYYY-MM-DD HH:MM"))))},fe=ue,ve=function(e){var t,a,n,r=e.user,m=Object(o["useState"])(null===r||void 0===r?void 0:r.is_followed),d=Object(l["a"])(m,2),u=d[0],f=d[1],v=Object(o["useState"])(null===r||void 0===r?void 0:r.followers),p=Object(l["a"])(v,2),h=p[0],E=p[1],g=function(){var e=Object(i["a"])(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Object(q["c"])()){e.next=2;break}return e.abrupt("return",!1);case 2:return Object(j["C"])({id:r.id,is_follow:u?0:1}).then((function(e){E((null===e||void 0===e?void 0:e.is_followed)?h+1:h-1),f(null===e||void 0===e?void 0:e.is_followed)})),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(b["a"],{className:"mb-4 border-0"},s.a.createElement(b["a"].Body,null,s.a.createElement("div",{className:"d-flex align-items-center mb-3"},s.a.createElement("picture",{className:"rounded-circle mr-3"},s.a.createElement("a",{href:null===r||void 0===r?void 0:r.url},s.a.createElement("img",{src:(null===r||void 0===r?void 0:r.avatar_url)||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",alt:"avatar",width:"64",height:"64",className:"rounded-circle"}))),s.a.createElement("div",null,s.a.createElement("h5",{className:"mb-0"},s.a.createElement("a",{href:null===r||void 0===r?void 0:r.url,className:"text-body"},null===r||void 0===r?void 0:r.name)),Boolean(null===r||void 0===r||null===(t=r.user_auth)||void 0===t?void 0:t.is_auth)&&(null===r||void 0===r||null===(a=r.user_auth)||void 0===a?void 0:a.info)&&s.a.createElement("div",{className:"mt-2 font-size-14 authentication-info"},s.a.createElement("i",{className:"mr-1 text-warning fas fa-badge-check"}),null===r||void 0===r||null===(n=r.user_auth)||void 0===n?void 0:n.info))),(null===r||void 0===r?void 0:r.excerpt)&&s.a.createElement("div",{className:"text-secondary text-truncate-2 userExcerpt mb-3",dangerouslySetInnerHTML:{__html:null===r||void 0===r?void 0:r.excerpt}}),s.a.createElement("div",{className:"d-flex align-items-center mb-3"},s.a.createElement("div",{className:"mr-4"},s.a.createElement("strong",null,null===r||void 0===r?void 0:r.rankWord),s.a.createElement("span",{className:"text-secondary"}," \u58f0\u671b")),s.a.createElement("div",null,s.a.createElement("strong",null,Object(N["f"])(h)||0),s.a.createElement("span",{className:"text-secondary"}," \u7c89\u4e1d"))),s.a.createElement(X["a"],{block:!0,variant:"primary",onClick:g},u?"\u5df2\u5173\u6ce8":"\u5173\u6ce8\u4f5c\u8005")))},be=s.a.memo(ve),pe=a("DZHF"),he=(a("47/0"),function(e){var t=e.onOpen,a=Object(o["useState"])(void 0),n=Object(l["a"])(a,2),c=n[0],i=n[1],r=function(e){e?(i(90),t&&t("open")):(i(void 0),t&&t("close"))};return s.a.createElement(pe["a"],{onSelect:r,"data-article-nav":!0},s.a.createElement(b["a"],{className:"border-0 overflow-hidden d-none d-xl-flex"},s.a.createElement(b["a"].Body,null,s.a.createElement(pe["a"].Toggle,{as:V["a"],eventKey:"1",domType:"div"},s.a.createElement("h6",{className:"nav-header h6 p-0 m-0"},s.a.createElement("i",{className:"fas fa-play fa-rotate-".concat(c)}),s.a.createElement("span",null," \u76ee\u5f55"))),s.a.createElement(pe["a"].Collapse,{eventKey:"1",id:"collapseTarget"},s.a.createElement("nav",{id:"article-nav-list",className:"d-flex flex-column font-size-14","data-article-nav-list":!0})))))}),Ee=s.a.memo(he),ge=a("fWQN"),Oe=a("mtLc"),ye=(a("2EET"),function(){function e(t,a){Object(ge["a"])(this,e),this.$parent=void 0,this.$article=void 0,this.$headList=void 0,this.$parent=t,this.$article=a,this.init()}return Object(Oe["a"])(e,[{key:"buildNavTitle",value:function(){var e,t,a=this;for(t=1;t<=3;t++)if(this.$article.find("h"+t).length){e=3===t?this.$article.find("h"+t):this.$article.find("h".concat(t,", h").concat(t+1));break}var n=0,c=0;return e&&e.length&&e.each((function(e,i){i.nodeName.substr(1,1)==t?(n++,Z(i).attr("id","item-".concat(n)),a.$parent.append('<a class="nav-link text-secondary p-0 my-1 text-truncate" scroll-href="#item-'.concat(n,'" href="javascript:;">').concat(Z(i).text(),"</a>"))):(c++,Z(i).attr("id","item-".concat(n,"-").concat(c)),a.$parent.append('<a class="nav-link text-secondary py-0 pr-0 my-1 text-truncate" scroll-href="#item-'.concat(n,"-").concat(c,'" href="javascript:;">').concat(Z(i).text(),"</a>")))})),!!(e&&e.length>5)&&!!e}},{key:"init",value:function(){if(this.$parent){var e=this.buildNavTitle();if(e){if(this.$parent.parents("div[data-article-nav]").show(),this.$parent.find("a").length>10){var t=a("qAqF");t.initEl(this.$parent[0])}Z(document).on("click","[data-article-nav] a",(function(){var e,t=Z(this).attr("scroll-href");Z("div[data-article-nav] a").addClass("text-secondary"),Z(this).removeClass("text-secondary");var a=null===(e=document.querySelector(t))||void 0===e?void 0:e.offsetTop;window.scrollTo({top:a,behavior:"auto"})}))}else this.$parent.parents("div[data-article-nav]").remove()}}}]),e}()),je=a("paDM"),we=a("YKRR"),ke=function(e){var t,a,n,c;if(!(Z(document.body).width()<576)){var i=Z(window).scrollTop(),r=(null===(t=Z("#gridAd"))||void 0===t||null===(a=t.offset())||void 0===a?void 0:a.top)||0,l=Z("#gridAd").height(),o=Z("#first-ad").height(),s=Z("#second-ad").height(),m=Z("#author").height(),d=Z("#collapseTarget").hasClass("show"),u=Z("#sf-header").height()+20,f=(null===(n=document)||void 0===n||null===(c=n.getElementById("footer"))||void 0===c?void 0:c.getBoundingClientRect().top)||0;if(f-50<o+s+m)Object(ae["debounce"])((function(){Z("#first-ad").removeClass("data-fix").animate(),Z("#cataLog").removeClass("data-fix").css({top:"atuo"}).animate(),Z("#author").removeClass("data-fix").css({top:"atuo"}).animate(),Z("#second-ad").removeClass("data-fix").css({top:"auto",marginTop:0}).animate()}),200)();else if(i>r+l/2){if("open"===e)return Z("#cataLog").addClass("data-fix").css({top:"".concat(u,"px")}),Z("#first-ad").removeClass("data-fix").css({top:"auto"}),void Z("#second-ad").removeClass("data-fix").css({top:"auto"});if("close"===e)return Z("#cataLog").removeClass("data-fix"),Z("#first-ad").css({top:"".concat(u+m+20,"px")}).addClass("data-fix"),void Z("#second-ad").css({top:"".concat(u+o+m+45,"px")}).addClass("data-fix");d?(Z("#author").css({top:"".concat(u+20,"px")}).addClass("data-fix"),Z("#cataLog").addClass("data-fix").css({top:"".concat(u+m-4,"px")})):(Z("#author").css({top:"".concat(u+20,"px")}).addClass("data-fix"),Z("#first-ad").css({top:"".concat(u+m+20,"px")}).addClass("data-fix"),Z("#second-ad").css({top:"".concat(u+o+m+45,"px")}).addClass("data-fix"))}else Z("#author").removeClass("data-fix").css({top:"atuo"}),Z("#first-ad").removeClass("data-fix"),Z("#second-ad").removeClass("data-fix").css({top:"auto",marginTop:0}),Z("#cataLog").removeClass("data-fix").css({top:"auto"})}},Ne=a("nlcd"),xe=(a("SoKV"),a("Ty5D")),_e=(a("PmrS"),a("PFmq")),Ce=a("9F+u"),Se=a("2CDT"),Ie=Object(ae["debounce"])((function(){Z("#collapseTarget").animate({scrollTop:0})}),150),Le=function(e){if(null===e||void 0===e?void 0:e.length)for(var t=0;t<e.length;t++){var a,n,c=(null===(a=document)||void 0===a||null===(n=a.getElementById(e[t].substr(1)))||void 0===n?void 0:n.getBoundingClientRect().top)||0;if(c>0&&c<60){if(t>0&&t%9===0){var i=e.length>16?8*Math.floor(t/9)*25:25*(e.length-8);Z("#collapseTarget").animate({scrollTop:i})}else t<9&&t>=0&&Ie();Z("div[data-article-nav] a").addClass("text-secondary"),Z(Z("#article-nav-list a")[t]).removeClass("text-secondary")}}},Re=!0,Te=function e(t){var n,c,i,b,p,h=t.artDetail,E=t.action,g=t.match,O=t.dispatch,y=t.sessionUser,w=t.articleRelated,k=Object(xe["j"])(),x=Object(o["useRef"])(null);x.current=null===y||void 0===y||null===(n=y.user)||void 0===n?void 0:n.id;var _=g,C=_.params.aid,S=h[C]||{},L=S.article,R=void 0===L?{}:L,T=S.actions,A=S.extra,D=S.member_actions,P=S.tag,B=void 0===P?{}:P,M=S.description,F=S.keywords,q=E.votes,z=void 0===q?0:q,U=E.votesState,V=E.bookmarks,H=void 0===V?0:V,Y=E.bookmarkState,K=(null===y||void 0===y?void 0:y.roles)||{},J=K.is_editor,$=Number(null===R||void 0===R||null===(c=R.user)||void 0===c?void 0:c.id)===(null===y||void 0===y||null===(i=y.user)||void 0===i?void 0:i.id),Q=Object(o["useState"])(!1),G=Object(l["a"])(Q,2),X=G[0],ee=G[1],te=Object(o["useState"])(""),ne=Object(l["a"])(te,2),re=ne[0],le=ne[1],oe=Object(o["useState"])(null),se=Object(l["a"])(oe,2),ue=se[0],ve=se[1];Object(o["useEffect"])((function(){Object(ae["isEmpty"])(h[C])&&O({type:"articleDetail/getArtDetail",payload:{aid:C},callback:function(e){"error"===e&&k.replace("/404")}}),O({type:"articleDetail/getRelated",payload:C})}),[C]),Object(o["useEffect"])((function(){if(null===R||void 0===R?void 0:R.tags){var e,t=null===R||void 0===R?void 0:R.tags.map((function(e){return e.name})),a=null===t||void 0===t?void 0:t.join(",");Object(Se["a"])(a,null===y||void 0===y||null===(e=y.user)||void 0===e?void 0:e.rank)}}),[null===R||void 0===R?void 0:R.tags]);var pe=function(){O({type:"articleDetail/getArtDetail",payload:{aid:C},callback:function(){window.scroll(0,0)}})};Object(o["useEffect"])((function(){var e=Object(N["d"])(window.location.href,"openShare");return ee(Boolean("true"===e)),Object(Ne["a"])(),window.addEventListener("scroll",(function(){return ke("")})),Object(Ce["a"])("article"),function(){window.removeEventListener("scroll",(function(){return ke("")})),window.removeEventListener("scroll",(function(){return Le("")}))}}),[]),Object(o["useEffect"])((function(){if(!Object(ae["isEmpty"])(R)){var e,t=new URL(window.location.href).searchParams.get("_ea")||"";if(t&&Object(j["ib"])(t).then((function(e){ve(e)})),new ye(Z("nav[data-article-nav-list]"),Z("article.article-content")),Object(I["e"])()&&(O({type:"global/saveTitle",payload:{title:R.title}}),O({type:"global/saveHeadOptions",payload:{keywords:F,description:M}})),Promise.all([a.e(2),a.e(7),a.e(9)]).then(a.bind(null,"0lfv")).then((function(t){var a=t.highlight,n=t.renderMath,c=t.changeSpecialUrl,i=Z(".article.fmt");clearTimeout(e),e=setTimeout((function(){a(i)}),1e3),Z(".article.fmt").children.length&&(n(i[0]),c(i))})),Z(window).resize((function(){Z(document.body).width()<576&&Z("#first-ad").removeClass("data-fix")})),Z(document.body).width()<576)return void Z("article.article img").change((function(e){e.each((function(e,t){var a=t.getAttribute("src"),n=t.getAttribute("data-src"),c="";if(a=n||a,a){var i=a.indexOf("?");i>0&&(c=a.substring(i),a=a.substring(0,i)),a.match(/^\/img\//)&&!a.match(/\/view$/)&&(a=a+"/view"+c,t.setAttribute(n?"data-src":"src",a),t.setAttribute("data-src",a))}}))}),(function(e){e.each((function(e,t){var a=t.getAttribute("src"),n=t.getAttribute("data-src"),c="";if(a=n||a,a){var i=a.indexOf("?");i>0&&(c=a.substring(i),a=a.substring(0,i)),a.match(/^\/img\//)&&a.match(/\/view$/)&&(a=a.substring(0,a.length-5)+c,t.setAttribute(n?"data-src":"src",a))}}))}));var n=Z("article.article img");if((null===n||void 0===n?void 0:n.length)>0){var c,i=n[0].getAttribute("src"),r=n[0].getAttribute("data-src");i=r||i,i&&!(null===(c=i)||void 0===c?void 0:c.includes("http"))&&(i="".concat(window.location.origin).concat(i)),le(i||"")}}}),[R.id]);var he=function(e){ke(e),setTimeout((function(){if("open"===e&&Re){Re=!1;for(var t=[],a=Z("#article-nav-list a"),n=0;n<a.length;n++){var c=Z(a[n]).attr("scroll-href");t.push(c)}if(!t.length)return;Z(Z("#article-nav-list a")[0]).removeClass("text-secondary"),window.addEventListener("scroll",(function(){return Le(t)}))}}),100)};return h[C]?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"d-none d-xl-flex justify-content-center"},s.a.createElement(W["a"],{name:"2"})),s.a.createElement(m["a"],{className:"article-content"},s.a.createElement(de["a"],{className:"mx-4 mx-md-0",data:[{name:"\u4e13\u680f",url:"/blogs"},Object(r["a"])(Object(r["a"])({},B),{},{url:"".concat(null===B||void 0===B?void 0:B.url,"/blogs")}),{name:"\u6587\u7ae0\u8be6\u60c5",url:"###"}]}),s.a.createElement(d["a"],null,s.a.createElement(u["a"],{className:"col-12 col-xl w-0"},(null===R||void 0===R?void 0:R.status_key)&&(null===A||void 0===A?void 0:A.reason)&&s.a.createElement(fe,{id:C,extra:A,sessionUser:y,status:null===R||void 0===R?void 0:R.status_key}),"deleted"===(null===R||void 0===R?void 0:R.status_key)&&!(null===A||void 0===A?void 0:A.reason)&&s.a.createElement(f["a"],{className:"mb-3",variant:"warning"},s.a.createElement("span",null,"\u8fd9\u7bc7\u6587\u7ae0\u5df2\u88ab\u5220\u9664")),s.a.createElement(v["a"],{id:null===R||void 0===R?void 0:R.id,votes:z,title:null===R||void 0===R?void 0:R.title,isLiked:U,isBookmarked:Y,bookmarks:H,showShare:X,banner:(null===R||void 0===R?void 0:R.cover)||re,isAuthor:$,source:"article"}),s.a.createElement(ce,{detail:h[C],articleHtml:e.articleHtml,actionData:{votes:z,votesState:U,bookmarks:H,bookmarkState:Y},actions:T,initPage:pe,imageUrl:R.cover,isEditor:J,isAuthor:$,memberActions:D}),s.a.createElement("div",{className:"d-block d-xl-none mt-sm-4"},(null===R||void 0===R||null===(b=R.user)||void 0===b?void 0:b.url)&&s.a.createElement(be,{user:null===R||void 0===R?void 0:R.user})),s.a.createElement(ie["a"],{id:C,event_object:ue,user:R.user}),s.a.createElement(me,{list:w})),s.a.createElement(u["a"],{className:"col-12 col-xl-auto"},s.a.createElement("div",{className:"w-xl-300"},s.a.createElement("div",{className:"w-xl-300 d-none d-xl-block",id:"author"},(null===R||void 0===R||null===(p=R.user)||void 0===p?void 0:p.url)&&s.a.createElement(be,{user:null===R||void 0===R?void 0:R.user})),s.a.createElement("div",{className:"w-xl-300 mb-4",id:"first-ad"},s.a.createElement("div",{className:"card border-0 overflow-hidden d-none d-xl-flex justify-content-center align-items-center float-ads"},s.a.createElement(W["a"],{name:"1"}))),s.a.createElement("div",{id:"gridAd",className:"d-none d-xl-block mb-4"},s.a.createElement(je["a"],null)),s.a.createElement("div",{id:"second-ad",className:"d-none d-xl-block"},s.a.createElement(W["a"],{name:"31"})),s.a.createElement("div",{id:"cataLog",className:"d-none d-xl-block w-xl-300 mt-4"},s.a.createElement(Ee,{onOpen:he}))))),s.a.createElement(we["a"],null))):null};Te.getInitialProps=Object(_e["a"])({requireState:["articleDetail.artDetail"]},function(){var e=Object(i["a"])(c.a.mark((function e(t){var a,n,i,l,o,s,m,d,u;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.store,n=t.match,i=t.isServer,i){e.next=3;break}return e.abrupt("return");case 3:return l=n,o=l.params.aid,e.next=6,Promise.allSettled([a.dispatch({type:"articleDetail/getArtDetail",payload:{aid:o,isServerLoaded:!0}})]);case 6:return Object(ae["isEmpty"])(a.getState().articleDetail.artDetail[o])||(s=a.getState().articleDetail.artDetail[o],m=s.article,d=s.keywords,u=s.description,Te.articleHtml=m.parsed_text,a.dispatch({type:"global/saveTitle",payload:{title:m.title}}),a.dispatch({type:"global/saveHeadOptions",payload:{keywords:d,description:u}}),a.dispatch({type:"articleDetail/saveArticleHtml",payload:{id:o,parsed_text:""}})),e.abrupt("return",Object(r["a"])({},a.getState()));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());t["default"]=Object(I["b"])((function(e){var t=e.articleDetail,a=e.action,n=e.global;return Object(r["a"])(Object(r["a"])({},t),{},{action:a,sessionUser:n.sessionUser})}))(Te)},paDM:function(e,t,a){"use strict";var n=a("q1tI"),c=a.n(n),i=a("6xyR"),r=(a("nWVH"),a("kwfb")),l=function(){return c.a.createElement(i["a"],{className:"border-0"},c.a.createElement(i["a"].Header,{className:"bg-white border-0"},c.a.createElement("h5",{className:"mb-0"},"\u5ba3\u4f20\u680f")),c.a.createElement(i["a"].Body,null,c.a.createElement("div",{className:"mb-3"},c.a.createElement(r["a"],{name:"7"})),c.a.createElement("div",{className:"mb-3"},c.a.createElement(r["a"],{name:"9"})),c.a.createElement("div",null,c.a.createElement(r["a"],{name:"10"}))))};t["a"]=c.a.memo(l)},qAqF:function(e,t,a){(function(t,a){e.exports=a(window,document)})(0,(function(e,t){var a=e.requestAnimationFrame||e.setImmediate||function(e){return setTimeout(e,0)};function n(e){Object.prototype.hasOwnProperty.call(e,"data-simple-scrollbar")||Object.defineProperty(e,"data-simple-scrollbar",{value:new l(e)})}function c(e,n){var c;function i(e){var t=e.pageY-c;c=e.pageY,a((function(){n.el.scrollTop+=t/n.scrollRatio}))}function r(){e.classList.remove("ss-grabbed"),t.body.classList.remove("ss-grabbed"),t.removeEventListener("mousemove",i),t.removeEventListener("mouseup",r)}e.addEventListener("mousedown",(function(a){return c=a.pageY,e.classList.add("ss-grabbed"),t.body.classList.add("ss-grabbed"),t.addEventListener("mousemove",i),t.addEventListener("mouseup",r),!1}))}function i(a){this.target=a,this.direction=e.getComputedStyle(this.target).direction,this.bar='<div class="ss-scroll">',this.wrapper=t.createElement("div"),this.wrapper.setAttribute("class","ss-wrapper"),this.el=t.createElement("div"),this.el.setAttribute("class","ss-content"),"rtl"===this.direction&&this.el.classList.add("rtl"),this.wrapper.appendChild(this.el);while(this.target.firstChild)this.el.appendChild(this.target.firstChild);this.target.appendChild(this.wrapper),this.target.insertAdjacentHTML("beforeend",this.bar),this.bar=this.target.lastChild,c(this.bar,this),this.moveBar(),e.addEventListener("resize",this.moveBar.bind(this)),this.el.addEventListener("scroll",this.moveBar.bind(this)),this.el.addEventListener("mouseenter",this.moveBar.bind(this)),this.target.classList.add("ss-container");var n=e.getComputedStyle(a);"0px"===n["height"]&&"0px"!==n["max-height"]&&(a.style.height=n["max-height"])}function r(){for(var e=t.querySelectorAll("*[ss-container]"),a=0;a<e.length;a++)n(e[a])}i.prototype={moveBar:function(e){var t=this.el.scrollHeight,n=this.el.clientHeight,c=this;this.scrollRatio=n/t;var i="rtl"===c.direction,r=i?c.target.clientWidth-c.bar.clientWidth+18:-1*(c.target.clientWidth-c.bar.clientWidth);a((function(){c.scrollRatio>=1?c.bar.classList.add("ss-hidden"):(c.bar.classList.remove("ss-hidden"),c.bar.style.cssText="height:"+Math.max(100*c.scrollRatio,10)+"%; top:"+c.el.scrollTop/t*100+"%;right:"+r+"px;")}))}},t.addEventListener("DOMContentLoaded",r),i.initEl=n,i.initAll=r;var l=i;return l}))},rNPM:function(e,t,a){},vYJ8:function(e,t,a){"use strict";var n,c=a("wx14"),i=a("zLVn"),r=a("TSYQ"),l=a.n(r),o=a("7j6X"),s=a("q1tI"),m=a.n(s),d=a("dRu9"),u=a("wsUu"),f=a("Qg85"),v=a("z+q/"),b={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function p(e,t){var a="offset"+e[0].toUpperCase()+e.slice(1),n=t[a],c=b[e];return n+parseInt(Object(o["a"])(t,c[0]),10)+parseInt(Object(o["a"])(t,c[1]),10)}var h=(n={},n[d["c"]]="collapse",n[d["d"]]="collapsing",n[d["b"]]="collapsing",n[d["a"]]="collapse show",n),E={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:p},g=m.a.forwardRef((function(e,t){var a=e.onEnter,n=e.onEntering,r=e.onEntered,o=e.onExit,b=e.onExiting,E=e.className,g=e.children,O=e.dimension,y=void 0===O?"height":O,j=e.getDimensionValue,w=void 0===j?p:j,k=Object(i["a"])(e,["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"]),N="function"===typeof y?y():y,x=Object(s["useMemo"])((function(){return Object(f["a"])((function(e){e.style[N]="0"}),a)}),[N,a]),_=Object(s["useMemo"])((function(){return Object(f["a"])((function(e){var t="scroll"+N[0].toUpperCase()+N.slice(1);e.style[N]=e[t]+"px"}),n)}),[N,n]),C=Object(s["useMemo"])((function(){return Object(f["a"])((function(e){e.style[N]=null}),r)}),[N,r]),S=Object(s["useMemo"])((function(){return Object(f["a"])((function(e){e.style[N]=w(N,e)+"px",Object(v["a"])(e)}),o)}),[o,w,N]),I=Object(s["useMemo"])((function(){return Object(f["a"])((function(e){e.style[N]=null}),b)}),[N,b]);return m.a.createElement(d["e"],Object(c["a"])({ref:t,addEndListener:u["a"]},k,{"aria-expanded":k.role?k.in:null,onEnter:x,onEntering:_,onEntered:C,onExit:S,onExiting:I}),(function(e,t){return m.a.cloneElement(g,Object(c["a"])({},t,{className:l()(E,g.props.className,h[e],"width"===N&&"width")}))}))}));g.defaultProps=E,t["a"]=g},"wFk/":function(e,t,a){"use strict";var n=a("k1fw"),c=a("oBTY"),i=a("WmNS"),r=a.n(i),l=a("9og8"),o=a("tJVT"),s=a("q1tI"),m=a.n(s),d=a("7U2o"),u=a("QojX"),f=a("HRRZ"),v=a("Dp36"),b=a("9kvl"),p=function(e){var t=e.id,a=e.setBookmarkedState,i=e.isShow,b=e.setShowStatus,p=e.sessionUser,h=e.source,E=void 0===h?"":h,g=Object(s["useState"])(!1),O=Object(o["a"])(g,2),y=O[0],j=O[1],w=Object(s["useState"])([]),k=Object(o["a"])(w,2),N=k[0],x=k[1],_=Object(s["useState"])([]),C=Object(o["a"])(_,2),S=C[0],I=C[1],L=Object(s["useState"])({value:"",isInvalid:!1,errorMsg:""}),R=Object(o["a"])(L,2),T=R[0],A=R[1],D=Object(s["useState"])(""),P=Object(o["a"])(D,2),B=P[0],M=P[1],F=Object(s["useState"])(1),q=Object(o["a"])(F,2),z=q[0],U=q[1];Object(s["useEffect"])((function(){0===N.length&&p&&i&&V()}),[i]);var V=function(){var e=Object(l["a"])(r.a.mark((function e(){var a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(v["m"])({objectId:t});case 2:a=e.sent,a&&a.rows&&(x(a.rows),I(a.rows.filter((function(e){return e.is_bookmarked})).map((function(e){return e.id}))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){b(!1),j(!1),A({value:"",isInvalid:!1,errorMsg:""}),M(""),U(1)},Y=function(e){e.is_bookmarked?I(S.filter((function(t){return t!==e.id}))):I([].concat(Object(c["a"])(S),[e.id])),x(N.map((function(t){return e.id===t.id&&(t.is_bookmarked=e.is_bookmarked?0:1),t})))},K=function(){var e=Object(l["a"])(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!y){e.next=10;break}if(T.value){e.next=4;break}return A(Object(n["a"])(Object(n["a"])({},T),{},{isInvalid:!0,errorMsg:"\u540d\u79f0\u5fc5\u586b"})),e.abrupt("return");case 4:return e.next=6,Object(v["b"])({name:T.value,description:B,is_private:z})["catch"]((function(e){(null===e||void 0===e?void 0:e.isError)&&A(Object(n["a"])(Object(n["a"])({},T),{},{isInvalid:!0,errorMsg:e.name}))}));case 6:V(),j(!y),e.next=13;break;case 10:Object(v["l"])({type:E,id:t,is_bookmark:0===S.length?0:1,archive_ids:S}),a(!(0===S.length)),b(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return m.a.createElement(d["a"],{show:i,title:y?"\u521b\u5efa\u6536\u85cf\u5939":"\u6536\u85cf",onCancel:H,onOk:K},y?m.a.createElement(u["a"],{className:"bookmarklist-form",id:"bookmarkArchives"},m.a.createElement(f["a"],null,m.a.createElement(u["a"].Label,{htmlFor:"bookmarkArchiveName",className:"required"},"\u540d\u79f0")," ",m.a.createElement(u["a"].Control,{type:"text",className:"form-control",value:T.value,onChange:function(e){return A(Object(n["a"])(Object(n["a"])({},T),{},{value:e.target.value}))},placeholder:"\u6700\u591a\u8f93\u516532\u4e2a\u5b57",maxLength:32,autoComplete:"off",required:!0,isInvalid:T.isInvalid}),m.a.createElement(u["a"].Control.Feedback,{type:"invalid"},T.errorMsg)),m.a.createElement(f["a"],null,m.a.createElement(u["a"].Label,{htmlFor:"bookmarkArchiveDescription"},"\u63cf\u8ff0")," ",m.a.createElement(u["a"].Control,{as:"textarea",value:B,onChange:function(e){return M(e.target.value)},placeholder:"\u6700\u591a\u8f93\u5165256\u4e2a\u5b57",maxLength:256})),m.a.createElement("div",{className:"form-check"},m.a.createElement("input",{className:"form-check-input",type:"radio",name:"isPrivate",value:"1",onChange:function(){return U(1)},checked:1===z,id:"bookmark-private"}),m.a.createElement("label",{className:"form-check-label",htmlFor:"bookmark-private"},"\u79c1\u5bc6\uff1a"),m.a.createElement("span",{className:"text-secondary"},"\u4ec5\u81ea\u5df1\u53ef\u89c1")),m.a.createElement("div",{className:"form-check"},m.a.createElement("input",{className:"form-check-input",type:"radio",name:"isPrivate",onChange:function(){return U(0)},checked:0===z,id:"bookmark-public"}),m.a.createElement("label",{className:"form-check-label",htmlFor:"bookmark-public"},"\u516c\u5f00\uff1a"),m.a.createElement("span",{className:"text-secondary"},"\u516c\u5f00\u540e\u4e0d\u53ef\u518d\u8bbe\u7f6e\u4e3a\u79c1\u5bc6"))):m.a.createElement("form",null,m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"form-title"},"\u6dfb\u52a0\u5230\u6536\u85cf\u5939\uff1a"),null===N||void 0===N?void 0:N.map((function(e){return m.a.createElement("div",{className:"form-check mb-2",key:e.id},m.a.createElement("input",{className:"form-check-input",type:"checkbox",name:"bookmarkItem[]",id:e.id,value:e.id,onChange:function(){return Y(e)},checked:Boolean(e.is_bookmarked)}),m.a.createElement("label",{className:"form-check-label",htmlFor:e.id},e.name,Boolean(e.is_private)&&m.a.createElement("span",{className:"text-secondary"},"\uff08\u79c1\u5bc6\uff09")))})),m.a.createElement("button",{className:"btn btn-link new-bookmark p-0",onClick:function(){return j(!0)}},"+ \u521b\u5efa\u6536\u85cf\u5939"))))};t["a"]=Object(b["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(m.a.memo(p))},wroQ:function(e,t,a){},xQMv:function(e,t,a){e.exports=a.p+"static/bg-219.7a1acf4f.svg"}}]);