# 单例模式

## 定义

 单例设计模式（Singleton Design Pattern）理解起来非常简单。一个类只允许创建一个对象（或者实例），那这个类就是一个单例类，这种设计模式就叫作单例设计模式，简称单例模式。 

## 用处

1. 全局唯一的数据，提供**唯一的访问入口**

## 实现

1. 饿汉式 ：根据Fail-Fast，推荐使用，防止使用过程中崩溃
2. 懒汉式 ：synchronized性能差
3. 双重检测 ：懒汉式的优化，类锁+volatile
4. 静态内部类 ：写起来麻烦
5. 枚举 ：推荐但是不常用

## 缺点

1.  单例对 OOP 特性的支持不友好 ：单例一般只会有一个实现
2.  单例会隐藏类之间的依赖关系：如果全局唯一，问题不大
3.  单例对代码的扩展性不友好 ：同1
4.  单例对代码的可测试性不友好 ：没有怎么遇到过
5.  单例不支持有参数的构造函数 ：单例只为了创建唯一对象，**参数建议写在配置文件**

## 唯一性：

1、进程唯一：JVM层面的单例

2、线程唯一：ThreadLocal

3、集群唯一：集群db，redis存储都行，类似分布式锁

4、多例模式：ConcurrentHashMap

