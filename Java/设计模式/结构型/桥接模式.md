# 桥接模式

## 定义

 桥接模式，也叫作桥梁模式，英文是 Bridge Design Pattern。  对于这个模式有两种不同的理解方式。在 GoF 的《设计模式》一书中，桥接模式被定义为：“将抽象和实现解耦，让它们可以独立变化。”在其他资料和书籍中，还有另外一种更加简单的理解方式：“一个类存在两个（或多个）独立变化的维度，我们通过组合的方式，让这两个（或多个）维度可以独立进行扩展。” 

------



## 理解
### 类之间存在多个独立维度时，根据各自的维度拆分，最后再组合。

桥接，就是将**独立**的模块通过某种规则连接到一起。

下面举个例子：

Alarm 告警 （普通告警，危险告警）
Strategy 告警策略 （页面提示，邮件提示）
按照继承的设计模式，Alarm是一个Abstract基类，假设有M个告警，N个告警策略，一共要写MN个类去描述所有组合。(因为业务在不断变化，普通告警也可能将来需要邮件提示)
使用桥接模式后，只有M+N个类就可以描述所有类型，这就是MN的继承类爆炸简化成了M+N组合。 

常见模型如下：

|          | 页面提示                                 | 邮件提示                                    |
| -------- | ---------------------------------------- | ------------------------------------------- |
| 普通告警 | nomralAlarm.setStrategy(new PageAlarm()) |                                             |
| 危险告警 |                                          | emergentAlarm.setStrategy(new EmailAlarm()) |

相关模块的装配可以在服务启动时装配，而使用时可以根据工厂选择告警，直接使用。

------

## 深入

谨记：该模式适用于**独立的维度**。因为**复杂度只能被转移，不能被消灭。**

如果不同维度之间需要有关联，比如普通告警发送邮件时，需要有新的特定行为，那么将无法实现。

因为不管是哪个维度，相交的特性代码**必须有一个维度承载**，而此时这个维度又需要感知其余模块，就又回到了原始的形态。

